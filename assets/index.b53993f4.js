import{d as e,aV as a,T as r,t,g as l,j as o,k as s,c as n,K as i,o as u,V as c,_ as d,a7 as p,a2 as g,w as v,A as m,b as f,y,E as x,H as h,F as b,q as I,M as z,J as S,p as C,r as $,a as k,D as j,s as E,v as F}from"./index.e00e4771.js";import{u as L}from"./use-index.96c5958d.js";import{R}from"./index.1a1aab71.js";import{P as w}from"./index.24b73bb5.js";const O=Symbol("ArcoAvatarGroup");var T=Object.defineProperty,A=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,B=(e,a,r)=>a in e?T(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,G=(e,a)=>{for(var r in a||(a={}))P.call(a,r)&&B(e,r,a[r]);if(A)for(var r of A(a))U.call(a,r)&&B(e,r,a[r]);return e};const N=e({name:"Avatar",components:{ResizeObserver:R,IconImageClose:a,IconLoading:r},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:a,emit:r,attrs:d}){const{shape:g,size:v,autoFixFontSize:m,triggerType:f,triggerIconStyle:y}=t(e),x=l("avatar"),h=o(O,void 0),b=s(),I=s(),z=n((()=>{var e;return null!=(e=null==h?void 0:h.shape)?e:g.value})),S=n((()=>{var e;return null!=(e=null==h?void 0:h.size)?e:v.value})),C=n((()=>{var e;return null!=(e=null==h?void 0:h.autoFixFontSize)?e:m.value})),$=s(!1),k=s(!1),j=s(!0),E=s(!1),F=h?L({itemRef:b,selector:`.${x}`}).computedIndex:s(-1),R=n((()=>{var e;const a=i(S.value)?{width:`${S.value}px`,height:`${S.value}px`,fontSize:S.value/2+"px"}:{};return h&&(a.zIndex=h.zIndexAscend?F.value+1:h.total-F.value,a.marginLeft=0!==F.value?`-${(null!=(e=S.value)?e:40)/4}px`:"0"),a})),w=M({triggerIconStyle:null==y?void 0:y.value,inlineStyle:d.style,triggerType:f.value}),T=()=>{$.value||e.imageUrl||p((()=>{var e;if(!I.value||!b.value)return;const a=I.value.clientWidth,r=null!=(e=S.value)?e:b.value.offsetWidth,t=r/(a+8);r&&t<1&&(I.value.style.transform=`scale(${t}) translateX(-50%)`),j.value=!0}))};u((()=>{var e;(null==(e=I.value)?void 0:e.firstElementChild)&&["IMG","PICTURE"].includes(I.value.firstElementChild.tagName)&&($.value=!0),C.value&&T()})),c(v,(()=>{C.value&&T()}));const A=n((()=>[x,`${x}-${z.value}`])),P=n((()=>$.value||e.imageUrl?`${x}-image`:`${x}-text`));return{prefixCls:x,itemRef:b,cls:A,outerStyle:R,wrapperRef:I,wrapperCls:P,computedTriggerIconStyle:w,isImage:$,shouldLoad:j,isLoaded:E,hasError:k,onClick:e=>{r("click",e)},handleResize:()=>{C.value&&T()},handleImgLoad:()=>{E.value=!0,r("load")},handleImgError:()=>{k.value=!0,r("error")}}}}),M=({triggerType:e,inlineStyle:a={},triggerIconStyle:r={}})=>{let t={};return"button"===e&&(!r||r&&!r.color)&&a&&a.backgroundColor&&(t={color:a.backgroundColor}),G(G({},r),t)},V=["src"];var W=d(N,[["render",function(e,a,r,t,l,o){const s=g("IconImageClose"),n=g("IconLoading"),i=g("resize-observer");return v(),m("div",{ref:"itemRef",style:S(e.outerStyle),class:h([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:Boolean(e.$slots["trigger-icon"])}]),onClick:a[2]||(a[2]=(...a)=>e.onClick&&e.onClick(...a))},[f(i,{onResize:e.handleResize},{default:y((()=>[x("span",{ref:"wrapperRef",class:h(e.wrapperCls)},[e.imageUrl?(v(),m(b,{key:0},[e.hasError?I(e.$slots,"error",{key:0},(()=>[x("div",{class:h(`${e.prefixCls}-image-icon`)},[f(s)],2)])):z("v-if",!0),e.hasError||!e.shouldLoad||e.isLoaded?z("v-if",!0):I(e.$slots,"default",{key:1},(()=>[x("div",{class:h(`${e.prefixCls}-image-icon`)},[f(n)],2)])),!e.hasError&&e.shouldLoad?(v(),m("img",{key:2,src:e.imageUrl,style:S({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:a[0]||(a[0]=(...a)=>e.handleImgLoad&&e.handleImgLoad(...a)),onError:a[1]||(a[1]=(...a)=>e.handleImgError&&e.handleImgError(...a))},null,44,V)):z("v-if",!0)],64)):I(e.$slots,"default",{key:1})],2)])),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(v(),m("div",{key:0,class:h(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:S(e.computedTriggerIconStyle)},[I(e.$slots,"trigger-icon")],6)):z("v-if",!0)],6)}]]);const _=e({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:a}){const{shape:r,size:o,autoFixFontSize:n,zIndexAscend:i}=t(e),u=l("avatar-group"),c=s(0);return C(O,$({shape:r,size:o,autoFixFontSize:n,zIndexAscend:i,total:c})),()=>{var r,t;const l=k(null!=(t=null==(r=a.default)?void 0:r.call(a))?t:[]),o=e.maxCount>0?l.slice(0,e.maxCount):l,s=e.maxCount>0?l.slice(e.maxCount):[];return c.value!==o.length&&(c.value=o.length),f("div",{class:u},[o,s.length>0&&f(w,e.maxPopoverTriggerProps,{default:()=>[f(W,{class:`${u}-max-count-avatar`,style:e.maxStyle},{default:()=>[j("+"),s.length]})],content:()=>f("div",null,[s])})])}}}),q=Object.assign(W,{Group:_,install:(e,a)=>{E(e,a);const r=F(a);e.component(r+W.name,W),e.component(r+_.name,_)}});export{q as A};
