import{g as e,_ as l,k as a,s as t,a as o,m as n,f as u,i as r,d as i,j as s,l as d,h as p,n as v}from"./plugin-vue_export-helper-806773bb.js";import{i as c}from"./index.es-d9b928a1.js";import{I as f,c as m}from"./index-6fda0b20.js";import{I as b}from"./index-562f739b.js";import{I as y}from"./index-b338cdb0.js";import{u as h,B as g}from"./index-25db428f.js";import{I as x}from"./index-b89ecf38.js";import{u as S,I as O}from"./use-size-9fed8212.js";import{g as C,K as w}from"./index-8b66000a.js";import{d as V,a4 as $,c as B,o as k,j as I,k as j,e as z,n as R,b as P,K as M,q as T,a as N,l as _,m as K,f as E,a8 as D,w as F,t as A,a7 as L,ao as H,ac as W,T as q,r as G,a5 as Q,g as U,a9 as J,s as X,F as Y,p as Z,Q as ee,ak as le,an as ae,as as te,al as oe}from"./runtime-core.esm-bundler-808dc7a8.js";import{R as ne,T as ue}from"./index-924037e1.js";import{E as re,F as ie,B as se}from"./input-search-529dae64.js";import{o as de,I as pe}from"./use-popup-manager-c09cb0b2.js";import{p as ve}from"./pick-c9d12df4.js";import{w as ce,T as fe,v as me,d as be,e as ye}from"./index-952d7730.js";import{I as he}from"./index-f2c4e0e2.js";import{R as ge}from"./resize-observer-aef80884.js";import{I as xe}from"./index-83b30376.js";import{E as Se}from"./index-7710f62e.js";import{S as Oe}from"./index-0a51ce0a.js";import{o as Ce,a as we,e as Ve}from"./dom-68e13361.js";import{C as $e}from"./index-eed2c438.js";import{b as Be}from"./vue-utils-fe41050b.js";const ke=V({name:"Thumb",props:{data:{type:Object},direction:{type:String,default:"horizontal"},alwaysShow:{type:Boolean,default:!1},both:{type:Boolean,default:!1}},emits:["scroll"],setup(l,{emit:a}){const t=e("scrollbar"),o=$(!1),n=$(),u=$(),r=B((()=>"horizontal"===l.direction?{size:"width",direction:"left",offset:"offsetWidth",client:"clientX"}:{size:"height",direction:"top",offset:"offsetHeight",client:"clientY"})),i=$(0),s=$(!1),d=$(0),p=B((()=>{var e,a;return{[r.value.size]:`${null!=(a=null==(e=l.data)?void 0:e.thumbSize)?a:0}px`,[r.value.direction]:`${i.value}px`}})),v=e=>e<0?0:l.data&&e>l.data.max?l.data.max:e,c=e=>{if(n.value&&u.value){const l=v(e[r.value.client]-n.value.getBoundingClientRect()[r.value.direction]-d.value);l!==i.value&&(i.value=l,a("scroll",l))}},f=()=>{s.value=!1,we(window,"mousemove",c),we(window,"mouseup",f)},m=B((()=>[`${t}-thumb`,`${t}-thumb-direction-${l.direction}`,{[`${t}-thumb-dragging`]:s.value}]));return{visible:o,trackRef:n,thumbRef:u,prefixCls:t,thumbCls:m,thumbStyle:p,handleThumbMouseDown:e=>{e.preventDefault(),u.value&&(d.value=e[r.value.client]-u.value.getBoundingClientRect()[r.value.direction],s.value=!0,Ce(window,"mousemove",c),Ce(window,"mouseup",f),Ce(window,"contextmenu",f))},handleTrackClick:e=>{var t,o,n,s;if(e.preventDefault(),u.value){const d=v(e[r.value.client]>u.value.getBoundingClientRect()[r.value.direction]?i.value+(null!=(o=null==(t=l.data)?void 0:t.thumbSize)?o:0):i.value-(null!=(s=null==(n=l.data)?void 0:n.thumbSize)?s:0));d!==i.value&&(i.value=d,a("scroll",d))}},setOffset:e=>{s.value||(e=v(e))!==i.value&&(i.value=e)}}}});var Ie=l(V({name:"Scrollbar",components:{ResizeObserver:ne,Thumb:l(ke,[["render",function(e,l,a,t,o,n){return k(),I(fe,null,{default:j((()=>[z("div",{ref:"trackRef",class:R([`${e.prefixCls}-track`,`${e.prefixCls}-track-direction-${e.direction}`]),onMousedown:l[1]||(l[1]=ce(((...l)=>e.handleTrackClick&&e.handleTrackClick(...l)),["self"]))},[z("div",{ref:"thumbRef",class:R(e.thumbCls),style:P(e.thumbStyle),onMousedown:l[0]||(l[0]=(...l)=>e.handleThumbMouseDown&&e.handleThumbMouseDown(...l))},[z("div",{class:R(`${e.prefixCls}-thumb-bar`)},null,2)],38)],34)])),_:1})}]])},inheritAttrs:!1,props:{type:{type:String,default:"embed"},outerClass:[String,Object,Array],outerStyle:{type:[String,Object,Array]},hide:{type:Boolean,default:!1},disableHorizontal:{type:Boolean,default:!1},disableVertical:{type:Boolean,default:!1}},emits:{scroll:e=>!0},setup(l,{emit:a}){const t=e("scrollbar"),o=$(),n=$(),u=$(),r=$(),i=$(),s=$(!1),d=$(!1),p=B((()=>s.value&&!l.disableHorizontal)),v=B((()=>d.value&&!l.disableVertical)),c=$(!1),f=()=>{var e,a,t,f,m,b;if(o.value){const{clientWidth:y,clientHeight:h,offsetWidth:g,offsetHeight:x,scrollWidth:S,scrollHeight:O,scrollTop:C,scrollLeft:w}=o.value;s.value=S>y,d.value=O>h,c.value=p.value&&v.value;const V="embed"===l.type&&c.value?g-15:g,$="embed"===l.type&&c.value?x-15:x,B=Math.round(V/Math.min(S/y,V/20)),k=V-B,I=(S-y)/k,j=Math.round($/Math.min(O/h,$/20)),z=$-j,R=(O-h)/z;if(n.value={ratio:I,thumbSize:B,max:k},u.value={ratio:R,thumbSize:j,max:z},C>0){const l=Math.round(C/(null!=(a=null==(e=u.value)?void 0:e.ratio)?a:1));null==(t=i.value)||t.setOffset(l)}if(w>0){const e=Math.round(w/(null!=(m=null==(f=u.value)?void 0:f.ratio)?m:1));null==(b=r.value)||b.setOffset(e)}}};M((()=>{f()}));const m=B((()=>{const e={};return"track"===l.type&&(p.value&&(e.paddingBottom="15px"),v.value&&(e.paddingRight="15px")),[e,l.outerStyle]})),b=B((()=>[`${t}`,`${t}-type-${l.type}`,{[`${t}-both`]:c.value},l.outerClass]));return{prefixCls:t,cls:b,style:m,containerRef:o,horizontalThumbRef:r,verticalThumbRef:i,horizontalData:n,verticalData:u,isBoth:c,hasHorizontalScrollbar:p,hasVerticalScrollbar:v,handleResize:()=>{f()},handleScroll:e=>{var t,s,d,c,f,m;if(o.value){if(p.value&&!l.disableHorizontal){const e=Math.round(o.value.scrollLeft/(null!=(s=null==(t=n.value)?void 0:t.ratio)?s:1));null==(d=r.value)||d.setOffset(e)}if(v.value&&!l.disableVertical){const e=Math.round(o.value.scrollTop/(null!=(f=null==(c=u.value)?void 0:c.ratio)?f:1));null==(m=i.value)||m.setOffset(e)}}a("scroll",e)},handleHorizontalScroll:e=>{var l,a;o.value&&o.value.scrollTo({left:e*(null!=(a=null==(l=n.value)?void 0:l.ratio)?a:1)})},handleVerticalScroll:e=>{var l,a;o.value&&o.value.scrollTo({top:e*(null!=(a=null==(l=u.value)?void 0:l.ratio)?a:1)})}}},methods:{scrollTo(e,l){var t,o;a(e)?null==(t=this.$refs.containerRef)||t.scrollTo(e):(e||l)&&(null==(o=this.$refs.containerRef)||o.scrollTo(e,l))},scrollTop(e){var l;null==(l=this.$refs.containerRef)||l.scrollTo({top:e})},scrollLeft(e){var l;null==(l=this.$refs.containerRef)||l.scrollTo({left:e})}}}),[["render",function(e,l,a,t,o,n){const u=T("ResizeObserver"),r=T("thumb");return k(),N("div",{class:R(e.cls),style:P(e.style)},[_(u,{onResize:e.handleResize},{default:j((()=>[z("div",K({ref:"containerRef",class:`${e.prefixCls}-container`},e.$attrs,{onScroll:l[0]||(l[0]=(...l)=>e.handleScroll&&e.handleScroll(...l))}),[_(u,{onResize:e.handleResize},{default:j((()=>[E(e.$slots,"default")])),_:3},8,["onResize"])],16)])),_:3},8,["onResize"]),!e.hide&&e.hasHorizontalScrollbar?(k(),I(r,{key:0,ref:"horizontalThumbRef",data:e.horizontalData,direction:"horizontal",both:e.isBoth,onScroll:e.handleHorizontalScroll},null,8,["data","both","onScroll"])):D("v-if",!0),!e.hide&&e.hasVerticalScrollbar?(k(),I(r,{key:1,ref:"verticalThumbRef",data:e.verticalData,direction:"vertical",both:e.isBoth,onScroll:e.handleVerticalScroll},null,8,["data","both","onScroll"])):D("v-if",!0)],6)}]]);const je=Object.assign(Ie,{install:(e,l)=>{t(e,l);const a=o(l);e.component(a+Ie.name,Ie)}}),ze=e=>{const l=$(),a=()=>n(l.value)?l.value.$refs[e]:l.value,t=$();return M((()=>{t.value=a()})),F([l],(()=>{t.value=a()})),{componentRef:l,elementRef:t}};var Re=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Ne=(e,l,a)=>l in e?Re(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a;const _e=e=>({displayScrollbar:B((()=>Boolean(e.value))),scrollbarProps:B((()=>{if(e.value)return((e,l)=>{for(var a in l||(l={}))Me.call(l,a)&&Ne(e,a,l[a]);if(Pe)for(var a of Pe(l))Te.call(l,a)&&Ne(e,a,l[a]);return e})({type:"embed"},u(e.value)?void 0:e.value)}))});var Ke=l(V({name:"SelectDropdown",components:{ScrollbarComponent:je,Empty:Se,Spin:Oe},props:{loading:Boolean,empty:Boolean,virtualList:Boolean,bottomOffset:{type:Number,default:0},scrollbar:{type:[Boolean,Object],default:!0},onScroll:{type:[Function,Array]},onReachBottom:{type:[Function,Array]}},emits:["scroll","reachBottom"],setup(l,{emit:a,slots:t}){const{scrollbar:o}=A(l),n=e("select-dropdown"),{componentRef:u,elementRef:r}=ze("containerRef"),{displayScrollbar:i,scrollbarProps:s}=_e(o),d=B((()=>[n,{[`${n}-has-footer`]:Boolean(t.footer)}]));return{prefixCls:n,cls:d,wrapperRef:r,wrapperComRef:u,handleScroll:e=>{const{scrollTop:t,scrollHeight:o,offsetHeight:n}=e.target;o-(t+n)<=l.bottomOffset&&a("reachBottom",e),a("scroll",e)},displayScrollbar:i,scrollbarProps:s}}}),[["render",function(e,l,a,t,o,n){const u=T("spin"),r=T("empty");return k(),N("div",{class:R(e.cls)},[e.loading?(k(),I(u,{key:0,class:R(`${e.prefixCls}-loading`)},null,8,["class"])):e.empty?(k(),N("div",{key:1,class:R(`${e.prefixCls}-empty`)},[E(e.$slots,"empty",{},(()=>[_(r)]))],2)):D("v-if",!0),!e.virtualList||e.loading||e.empty?D("v-if",!0):E(e.$slots,"virtual-list",{key:2}),e.virtualList?D("v-if",!0):L((k(),I(H(e.displayScrollbar?"ScrollbarComponent":"div"),K({key:3,ref:"wrapperComRef",class:`${e.prefixCls}-list-wrapper`},e.scrollbarProps,{onScroll:e.handleScroll}),{default:j((()=>[z("ul",{class:R(`${e.prefixCls}-list`)},[E(e.$slots,"default")],2)])),_:3},16,["class","onScroll"])),[[me,!e.loading&&!e.empty]]),e.$slots.footer&&!e.empty?(k(),N("div",{key:4,class:R(`${e.prefixCls}-footer`)},[E(e.$slots,"footer")],2)):D("v-if",!0)],2)}]]);const Ee=Symbol("ArcoSelectContext");var De=Object.defineProperty,Fe=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,qe=(e,l,a)=>l in e?De(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,Ge=(e,l)=>{for(var a in l||(l={}))He.call(l,a)&&qe(e,a,l[a]);if(Le)for(var a of Le(l))We.call(l,a)&&qe(e,a,l[a]);return e},Qe=(e,l)=>Fe(e,Ae(l));const Ue=e=>a(e)&&"isGroup"in e,Je=(e,l="value")=>String(a(e)?e[l]:e),Xe=(e,l="value")=>a(e)?`__arco__option__object__${e[l]}`:e||r(e)?`__arco__option__${typeof e}-${e}`:"",Ye=(e,{valueKey:l,fieldNames:t,origin:o,index:n=-1})=>{var u;if(a(e)){const a=e[t.value];return{raw:e,index:n,key:Xe(a,l),origin:o,value:a,label:null!=(u=e[t.label])?u:Je(a,l),render:e[t.render],disabled:Boolean(e[t.disabled]),tagProps:e[t.tagProps]}}const r={value:e,label:String(e),disabled:!1};return Ge({raw:r,index:n,key:Xe(e,l),origin:o},r)},Ze=(e,{valueKey:l,fieldNames:t,origin:o,optionInfoMap:n})=>{var u;const r=[];for(const s of e)if(a(i=s)&&"isGroup"in i){const e=Ze(null!=(u=s.options)?u:[],{valueKey:l,fieldNames:t,origin:o,optionInfoMap:n});e.length>0&&r.push(Qe(Ge({},s),{key:`__arco__group__${s.label}`,options:e}))}else{const e=Ye(s,{valueKey:l,fieldNames:t,origin:o});r.push(e),n.get(e.key)||n.set(e.key,e)}var i;return r},el=(e,{inputValue:l,filterOption:a})=>{const t=e=>{var o;const n=[];for(const u of e)if(Ue(u)){const e=t(null!=(o=u.options)?o:[]);e.length>0&&n.push(Qe(Ge({},u),{options:e}))}else ll(u,{inputValue:l,filterOption:a})&&n.push(u);return n};return t(e)},ll=(e,{inputValue:l,filterOption:a})=>i(a)?!l||a(l,e.raw):!a||e.label.toLowerCase().includes((null!=l?l:"").toLowerCase()),al=(e,l)=>{const a=Object.prototype.toString.call(e);return a===Object.prototype.toString.call(l)&&("[object Object]"===a?((e,l)=>{if(!e||!l)return!1;if(e.length!==l.length)return!1;for(const a of Object.keys(e))if(!al(e[a],l[a]))return!1;return!0})(e,l):"[object Array]"===a?((e,l)=>{if(!e||!l)return!1;const{length:a}=e;if(a!==l.length)return!1;for(let t=0;t<a;t++)if(!al(e[t],l[t]))return!1;return!0})(e,l):"[object Function]"===a?e===l||e.toString()===l.toString():e===l)};var tl=l(V({name:"Option",components:{Checkbox:$e},props:{value:[String,Number,Object],label:String,disabled:Boolean,tagProps:{type:Object},extra:{type:Object},index:{type:Number},internal:Boolean},setup(l){const{disabled:a,tagProps:t,index:o}=A(l),n=e("select-option"),u=W(Ee,void 0),r=U(),i=$(),s=$(t.value);F(t,((e,l)=>{al(e,l)||(s.value=e)}));const d=$(""),p=B((()=>{var e,a;return null!=(a=null!=(e=l.value)?e:l.label)?a:d.value})),v=B((()=>{var e;return null!=(e=l.label)?e:d.value})),c=B((()=>Xe(p.value,null==u?void 0:u.valueKey))),f=B((()=>{var e;return null!=(e=null==u?void 0:u.component)?e:"li"})),m=()=>{var e;if(!l.label&&i.value){const l=null!=(e=i.value.textContent)?e:"";d.value!==l&&(d.value=l)}};M((()=>m())),q((()=>m()));const b=B((()=>{var e;return null!=(e=null==u?void 0:u.valueKeys.includes(c.value))&&e})),y=B((()=>(null==u?void 0:u.activeKey)===c.value));let h=$(!0);if(!l.internal){const e=G({raw:{value:p,label:v,disabled:a,tagProps:s},ref:i,index:o,key:c,origin:"slot",value:p,label:v,disabled:a,tagProps:s});h=B((()=>ll(e,{inputValue:null==u?void 0:u.inputValue,filterOption:null==u?void 0:u.filterOption}))),r&&(null==u||u.addSlotOptionInfo(r.uid,e)),Q((()=>{r&&(null==u||u.removeSlotOptionInfo(r.uid))}))}const g=B((()=>[n,{[`${n}-disabled`]:l.disabled,[`${n}-active`]:y.value,[`${n}-multiple`]:null==u?void 0:u.multiple}]));return{prefixCls:n,cls:g,selectCtx:u,itemRef:i,component:f,isSelected:b,isValid:h,handleClick:e=>{l.disabled||null==u||u.onSelect(c.value,e)},handleMouseEnter:()=>{l.disabled||null==u||u.setActiveKey(c.value)},handleMouseLeave:()=>{l.disabled||null==u||u.setActiveKey()}}}}),[["render",function(e,l,a,t,o,n){const u=T("checkbox");return L((k(),I(H(e.component),{ref:"itemRef",class:R([e.cls,{[`${e.prefixCls}-has-suffix`]:Boolean(e.$slots.suffix)}]),onClick:e.handleClick,onMouseenter:e.handleMouseEnter,onMouseleave:e.handleMouseLeave},{default:j((()=>[e.$slots.icon?(k(),N("span",{key:0,class:R(`${e.prefixCls}-icon`)},[E(e.$slots,"icon")],2)):D("v-if",!0),e.selectCtx&&e.selectCtx.multiple?(k(),I(u,{key:1,class:R(`${e.prefixCls}-checkbox`),"model-value":e.isSelected,disabled:e.disabled,"uninject-group-context":""},{default:j((()=>[E(e.$slots,"default",{},(()=>[J(X(e.label),1)]))])),_:3},8,["class","model-value","disabled"])):(k(),N("span",{key:2,class:R(`${e.prefixCls}-content`)},[E(e.$slots,"default",{},(()=>[J(X(e.label),1)]))],2)),e.$slots.suffix?(k(),N("span",{key:3,class:R(`${e.prefixCls}-suffix`)},[E(e.$slots,"suffix")],2)):D("v-if",!0)])),_:3},8,["class","onClick","onMouseenter","onMouseleave"])),[[me,e.isValid]])}]]),ol=Object.defineProperty,nl=Object.defineProperties,ul=Object.getOwnPropertyDescriptors,rl=Object.getOwnPropertySymbols,il=Object.prototype.hasOwnProperty,sl=Object.prototype.propertyIsEnumerable,dl=(e,l,a)=>l in e?ol(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,pl=(e,l)=>{for(var a in l||(l={}))il.call(l,a)&&dl(e,a,l[a]);if(rl)for(var a of rl(l))sl.call(l,a)&&dl(e,a,l[a]);return e};const vl={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"},cl=({options:e,extraOptions:l,inputValue:a,filterOption:t,showExtraOptions:o,valueKey:n,fieldNames:u})=>{const i=B((()=>pl(pl({},vl),null==u?void 0:u.value))),s=G(new Map),d=$([]);F(s,(e=>{d.value=Array.from(e.values()).sort(((e,l)=>r(e.index)&&r(l.index)?e.index-l.index:0))}),{deep:!0});const p=B((()=>{var l,a;const t=new Map;return{optionInfos:Ze(null!=(l=null==e?void 0:e.value)?l:[],{valueKey:null!=(a=null==n?void 0:n.value)?a:"value",fieldNames:i.value,origin:"options",optionInfoMap:t}),optionInfoMap:t}})),v=B((()=>{var e,a;const t=new Map;return{optionInfos:Ze(null!=(e=null==l?void 0:l.value)?e:[],{valueKey:null!=(a=null==n?void 0:n.value)?a:"value",fieldNames:i.value,origin:"extraOptions",optionInfoMap:t}),optionInfoMap:t}})),c=G(new Map);F([s,null!=e?e:$([]),null!=l?l:$([]),null!=n?n:$("value")],(()=>{c.clear(),d.value.forEach(((e,l)=>{var a;c.set(e.key,(a=pl({},e),nl(a,ul({index:l}))))})),p.value.optionInfoMap.forEach((e=>{c.has(e.key)||(e.index=c.size,c.set(e.key,e))})),v.value.optionInfoMap.forEach((e=>{c.has(e.key)||(e.index=c.size,c.set(e.key,e))}))}),{immediate:!0,deep:!0});const f=B((()=>{var e;const l=el(p.value.optionInfos,{inputValue:null==a?void 0:a.value,filterOption:null==t?void 0:t.value});return(null==(e=null==o?void 0:o.value)||e)&&l.push(...el(v.value.optionInfos,{inputValue:null==a?void 0:a.value,filterOption:null==t?void 0:t.value})),l})),m=B((()=>Array.from(c.values()).filter((e=>("extraOptions"!==e.origin||!1!==(null==o?void 0:o.value))&&ll(e,{inputValue:null==a?void 0:a.value,filterOption:null==t?void 0:t.value}))))),b=B((()=>m.value.filter((e=>!e.disabled)).map((e=>e.key))));return{validOptions:f,optionInfoMap:c,validOptionInfos:m,enabledOptionKeys:b,getNextSlotOptionIndex:()=>s.size,addSlotOptionInfo:(e,l)=>{s.set(e,l)},removeSlotOptionInfo:e=>{s.delete(e)}}},fl=({popupVisible:e,defaultPopupVisible:l,emit:a})=>{var t;const o=$(null!=(t=null==l?void 0:l.value)&&t),n=B((()=>{var l;return null!=(l=null==e?void 0:e.value)?l:o.value}));return F(n,(e=>{o.value!==e&&(o.value=e)})),{computedPopupVisible:n,handlePopupVisibleChange:e=>{e!==n.value&&(o.value=e,a("update:popupVisible",e),a("popupVisibleChange",e))}}};var ml=V({name:"InputLabel",inheritAttrs:!1,props:{modelValue:Object,inputValue:{type:String,default:""},enabledInput:Boolean,formatLabel:Function,placeholder:String,retainInputValue:Boolean,disabled:Boolean,baseCls:String,size:String,error:Boolean,focused:Boolean,uninjectFormItemContext:Boolean},emits:["update:inputValue","inputValueChange","focus","blur"],setup(l,{attrs:a,emit:t,slots:o}){var n;const{size:u,disabled:r,error:i,inputValue:s,uninjectFormItemContext:d}=A(l),p=null!=(n=l.baseCls)?n:e("input-label"),{mergedSize:v,mergedDisabled:c,mergedError:f,eventHandlers:m}=h({size:u,disabled:r,error:i,uninject:null==d?void 0:d.value}),{mergedSize:b}=S(v),{inputRef:y,_focused:g,computedValue:x,handleInput:O,handleComposition:C,handleFocus:w,handleBlur:V,handleMousedown:k}=(({defaultValue:e,modelValue:l,emit:a,eventName:t="input",updateEventName:o="update:modelValue",eventHandlers:n})=>{var u;const r=$(),i=$(null!=(u=null==e?void 0:e.value)?u:""),s=$(!1),d=$(!1),p=$("");let v;const c=B((()=>{var e;return null!=(e=null==l?void 0:l.value)?e:i.value})),f=(e,l)=>{i.value=e,a(o,e),a(t,e,l)},m=e=>{"input"===t&&c.value!==v&&(v=c.value,a("change",c.value,e))};return F(c,(e=>{r.value&&e!==r.value.value&&(r.value.value=e)})),{inputRef:r,_value:i,_focused:s,isComposition:d,compositionValue:p,computedValue:c,handleInput:e=>{const{value:l}=e.target;d.value||(f(l,e),Y((()=>{r.value&&c.value!==r.value.value&&(r.value.value=c.value)})))},handleComposition:e=>{var l;const{value:a}=e.target;"compositionend"===e.type?(d.value=!1,p.value="",f(a,e),Y((()=>{r.value&&c.value!==r.value.value&&(r.value.value=c.value)}))):(d.value=!0,p.value=c.value+(null!=(l=e.data)?l:""))},handleFocus:e=>{var l,t;s.value=!0,v=c.value,a("focus",e),null==(t=null==(l=null==n?void 0:n.value)?void 0:l.onFocus)||t.call(l,e)},handleBlur:e=>{var l,t;s.value=!1,a("blur",e),null==(t=null==(l=null==n?void 0:n.value)?void 0:l.onBlur)||t.call(l,e),m(e)},handleKeyDown:e=>{const l=e.key||e.code;d.value||l!==re.key||(a("pressEnter",e),m(e))},handleMousedown:e=>{r.value&&e.target!==r.value&&(e.preventDefault(),r.value.focus())}}})({modelValue:s,emit:t,eventName:"inputValueChange",updateEventName:"update:inputValue",eventHandlers:m}),I=B((()=>{var e;return null!=(e=l.focused)?e:g.value})),j=B((()=>l.enabledInput&&g.value||!l.modelValue)),z=B((()=>l.enabledInput&&l.modelValue?l.modelValue.label:l.placeholder)),R=B((()=>[p,`${p}-size-${b.value}`,{[`${p}-search`]:l.enabledInput,[`${p}-focus`]:I.value,[`${p}-disabled`]:c.value,[`${p}-error`]:f.value}])),P=B((()=>de(a,pe))),M=B((()=>ve(a,pe)));return{inputRef:y,render:()=>{return _("span",K(P.value,{class:R.value,onMousedown:k}),[o.prefix&&_("span",{class:`${p}-prefix`},[o.prefix()]),_("input",K(M.value,{ref:y,class:[`${p}-input`,{[`${p}-input-hidden`]:!j.value}],value:x.value,readonly:!l.enabledInput,placeholder:z.value,disabled:c.value,onInput:O,onFocus:w,onBlur:V,onCompositionstart:C,onCompositionupdate:C,onCompositionend:C}),null),_("span",{class:[`${p}-value`,{[`${p}-value-hidden`]:j.value}]},[l.modelValue?null!=(u=null!=(t=null==(e=o.default)?void 0:e.call(o,{data:l.modelValue}))?t:null==(a=l.formatLabel)?void 0:a.call(l,l.modelValue))?u:null==(n=l.modelValue)?void 0:n.label:null]),o.suffix&&_("span",{class:`${p}-suffix`},[o.suffix()])]);var e,a,t,n,u}}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}}),bl=Object.defineProperty,yl=Object.getOwnPropertySymbols,hl=Object.prototype.hasOwnProperty,gl=Object.prototype.propertyIsEnumerable,xl=(e,l,a)=>l in e?bl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,Sl=(e,l)=>{for(var a in l||(l={}))hl.call(l,a)&&xl(e,a,l[a]);if(yl)for(var a of yl(l))gl.call(l,a)&&xl(e,a,l[a]);return e};const Ol=["red","orangered","orange","gold","lime","green","cyan","blue","arcoblue","purple","pinkpurple","magenta","gray"];var Cl=l(V({name:"Tag",components:{IconHover:be,IconClose:he,IconLoading:O},props:{color:{type:String},size:{type:String},bordered:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,default:!0}},emits:{"update:visible":e=>!0,"update:checked":e=>!0,close:e=>!0,check:(e,l)=>!0},setup(l,{emit:a}){const{size:t}=A(l),o=e("tag"),n=B((()=>l.color&&Ol.includes(l.color))),u=B((()=>l.color&&!Ol.includes(l.color))),r=$(l.defaultVisible),i=$(l.defaultChecked),s=B((()=>{var e;return null!=(e=l.visible)?e:r.value})),d=B((()=>{var e;return!l.checkable||(null!=(e=l.checked)?e:i.value)})),{mergedSize:p}=S(t),v=B((()=>"mini"===p.value?"small":p.value)),c=B((()=>[o,`${o}-size-${v.value}`,{[`${o}-loading`]:l.loading,[`${o}-hide`]:!s.value,[`${o}-${l.color}`]:n.value,[`${o}-bordered`]:l.bordered,[`${o}-checkable`]:l.checkable,[`${o}-checked`]:d.value,[`${o}-custom-color`]:u.value}])),f=B((()=>{if(u.value)return{backgroundColor:l.color}}));return{prefixCls:o,cls:c,style:f,computedVisible:s,computedChecked:d,handleClick:e=>{if(l.checkable){const l=!d.value;i.value=l,a("update:checked",l),a("check",l,e)}},handleClose:e=>{r.value=!1,a("update:visible",!1),a("close",e)}}}}),[["render",function(e,l,a,t,o,n){const u=T("icon-close"),r=T("icon-hover"),i=T("icon-loading");return e.computedVisible?(k(),N("span",{key:0,class:R(e.cls),style:P(e.style),onClick:l[0]||(l[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[e.$slots.icon?(k(),N("span",{key:0,class:R(`${e.prefixCls}-icon`)},[E(e.$slots,"icon")],2)):D("v-if",!0),E(e.$slots,"default"),e.closable?(k(),I(r,{key:1,role:"button","aria-label":"Close",prefix:e.prefixCls,class:R(`${e.prefixCls}-close-btn`),onClick:ce(e.handleClose,["stop"])},{default:j((()=>[E(e.$slots,"close-icon",{},(()=>[_(u)]))])),_:3},8,["prefix","class","onClick"])):D("v-if",!0),e.loading?(k(),N("span",{key:2,class:R(`${e.prefixCls}-loading-icon`)},[_(i)],2)):D("v-if",!0)],6)):D("v-if",!0)}]]);const wl=Object.assign(Cl,{install:(e,l)=>{t(e,l);const a=o(l);e.component(a+Cl.name,Cl)}});var Vl=Object.defineProperty,$l=Object.getOwnPropertySymbols,Bl=Object.prototype.hasOwnProperty,kl=Object.prototype.propertyIsEnumerable,Il=(e,l,a)=>l in e?Vl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,jl=(e,l)=>{for(var a in l||(l={}))Bl.call(l,a)&&Il(e,a,l[a]);if($l)for(var a of $l(l))kl.call(l,a)&&Il(e,a,l[a]);return e};const zl={value:"value",label:"label",closable:"closable",tagProps:"tagProps"};var Rl=V({name:"InputTag",inheritAttrs:!1,props:{modelValue:{type:Array},defaultValue:{type:Array,default:()=>[]},inputValue:String,defaultInputValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},size:{type:String},maxTagCount:{type:Number,default:0},retainInputValue:{type:[Boolean,Object],default:!1},formatTag:{type:Function},uniqueValue:{type:Boolean,default:!1},fieldNames:{type:Object},baseCls:String,focused:Boolean,disabledInput:Boolean,uninjectFormItemContext:Boolean},emits:{"update:modelValue":e=>!0,"update:inputValue":e=>!0,change:(e,l)=>!0,inputValueChange:(e,l)=>!0,pressEnter:(e,l)=>!0,remove:(e,l)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(l,{emit:t,slots:o,attrs:n}){const{size:u,disabled:i,error:p,uninjectFormItemContext:v,modelValue:c}=A(l),f=l.baseCls||e("input-tag"),m=$(),b=$(),{mergedSize:y,mergedDisabled:g,mergedError:x,feedback:O,eventHandlers:C}=h({size:u,disabled:i,error:p,uninject:null==v?void 0:v.value}),{mergedSize:w}=S(y),V=B((()=>jl(jl({},zl),l.fieldNames))),k=$(!1),I=$(l.defaultValue),j=$(l.defaultInputValue),z=$(!1),R=$(""),P=B((()=>a(l.retainInputValue)?jl({create:!1,blur:!1},l.retainInputValue):{create:l.retainInputValue,blur:l.retainInputValue})),T=G({width:"12px"}),N=B((()=>l.focused||k.value)),E=(e,l)=>{j.value=e,t("update:inputValue",e),t("inputValueChange",e,l)},D=e=>{var l;const{value:a}=e.target;"compositionend"===e.type?(z.value=!1,R.value="",E(a,e),Y((()=>{m.value&&H.value!==m.value.value&&(m.value.value=H.value)}))):(z.value=!0,R.value=H.value+(null!=(l=e.data)?l:""))},L=B((()=>{var e;return null!=(e=l.modelValue)?e:I.value})),H=B((()=>{var e;return null!=(e=l.inputValue)?e:j.value}));F(c,(e=>{(s(e)||d(e))&&(I.value=[])}));const W=e=>{m.value&&e.target!==m.value&&(e.preventDefault(),m.value.focus())},q=e=>{const{value:l}=e.target;z.value||(E(l,e),Y((()=>{m.value&&H.value!==m.value.value&&(m.value.value=H.value)})))},Q=B((()=>((e,l)=>{const t=[];for(const o of e)if(a(o))t.push({raw:o,value:o[l.value],label:o[l.label],closable:o[l.closable],tagProps:o[l.tagProps]});else if(e||r(e)){const e={value:o,label:String(o),closable:!0};t.push(Sl({raw:e},e))}return t})(L.value,V.value))),U=B((()=>{if(l.maxTagCount>0){const e=Q.value.length-l.maxTagCount;if(e>0){const a=Q.value.slice(0,l.maxTagCount),t={value:"__arco__more",label:`+${e}...`,closable:!1};return a.push(jl({raw:t},t)),a}}return Q.value})),J=(e,l)=>{var a,o;I.value=e,t("update:modelValue",e),t("change",e,l),null==(o=null==(a=C.value)?void 0:a.onChange)||o.call(a,l)},X=(e,l,a)=>{var o;const n=null==(o=L.value)?void 0:o.filter(((e,a)=>a!==l));J(n,a),t("remove",e,a)},Z=e=>{J([],e),t("clear",e)},ee=B((()=>!g.value&&!l.readonly&&l.allowClear&&Boolean(L.value.length))),le=e=>{var l,a;k.value=!0,t("focus",e),null==(a=null==(l=C.value)?void 0:l.onFocus)||a.call(l,e)},ae=e=>{var l,a;k.value=!1,!P.value.blur&&H.value&&E("",e),t("blur",e),null==(a=null==(l=C.value)?void 0:l.onBlur)||a.call(l,e)},te=e=>{const a=e.key||e.code;if(!z.value&&H.value&&a===re.key&&(e=>{var a;if(H.value){if(e.preventDefault(),l.uniqueValue&&(null==(a=L.value)?void 0:a.includes(H.value)))return void t("pressEnter",H.value,e);const o=L.value.concat(H.value);J(o,e),t("pressEnter",H.value,e),P.value.create||E("",e)}})(e),!z.value&&U.value.length>0&&!H.value&&a===se.key){const l=(()=>{for(let e=Q.value.length-1;e>=0;e--)if(Q.value[e].closable)return e;return-1})();l>=0&&X(Q.value[l].value,l,e)}},oe=e=>{T.width=e>12?`${e}px`:"12px"};M((()=>{b.value&&oe(b.value.offsetWidth)}));const ne=()=>{b.value&&oe(b.value.offsetWidth)};F(H,(e=>{m.value&&!z.value&&e!==m.value.value&&(m.value.value=e)}));const ue=B((()=>[f,`${f}-size-${w.value}`,{[`${f}-disabled`]:g.value,[`${f}-disabled-input`]:l.disabledInput,[`${f}-error`]:x.value,[`${f}-focus`]:N.value,[`${f}-readonly`]:l.readonly,[`${f}-has-tag`]:U.value.length>0,[`${f}-has-prefix`]:Boolean(o.prefix),[`${f}-has-suffix`]:Boolean(o.suffix)||ee.value||O.value,[`${f}-has-placeholder`]:!L.value.length}])),ce=B((()=>de(n,pe))),fe=B((()=>ve(n,pe)));return{inputRef:m,render:()=>{var e;return _("span",K({class:ue.value,onMousedown:W},ce.value),[_(ge,{onResize:ne},{default:()=>[_("span",{ref:b,class:`${f}-mirror`},[U.value.length>0?R.value||H.value:R.value||H.value||l.placeholder])]}),o.prefix&&_("span",{class:`${f}-prefix`},[o.prefix()]),_(ye,{tag:"span",name:"input-tag-zoom",class:`${f}-inner`},{default:()=>[U.value.map(((e,a)=>_(wl,K({key:`tag-${e.value}`,class:`${f}-tag`,closable:!g.value&&!l.readonly&&e.closable,visible:!0},e.tagProps,{onClose:l=>X(e.value,a,l)}),{default:()=>{var a,t,n,u;return[null!=(u=null!=(n=null==(a=o.tag)?void 0:a.call(o,{data:e.raw}))?n:null==(t=l.formatTag)?void 0:t.call(l,e.raw))?u:e.label]}}))),_("input",K(fe.value,{ref:m,key:"input-tag-input",class:`${f}-input`,style:T,placeholder:0===U.value.length?l.placeholder:void 0,disabled:g.value,readonly:l.readonly||l.disabledInput,onInput:q,onKeydown:te,onFocus:le,onBlur:ae,onCompositionstart:D,onCompositionupdate:D,onCompositionend:D}),null)]}),ee.value&&_(be,{class:`${f}-clear-btn`,onClick:Z,onMousedown:e=>e.stopPropagation()},{default:()=>[_(he,null,null)]}),(o.suffix||Boolean(O.value))&&_("span",{class:`${f}-suffix`},[null==(e=o.suffix)?void 0:e.call(o),Boolean(O.value)&&_(ie,{type:O.value},null)])])}}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}});const Pl=Object.assign(Rl,{install:(e,l)=>{t(e,l);const a=o(l);e.component(a+Rl.name,Rl)}});var Ml=V({name:"SelectView",props:{modelValue:{type:Array,required:!0},inputValue:String,placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},opened:{type:Boolean,default:!1},size:{type:String},bordered:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},allowSearch:{type:Boolean,default:e=>p(e.modelValue)},maxTagCount:{type:Number,default:0},retainInputValue:{type:Boolean,default:!1}},emits:["remove","clear","focus","blur"],setup(l,{emit:a,slots:t}){const{size:o,disabled:n,error:u}=A(l),r=e("select-view"),{feedback:i,eventHandlers:s,mergedDisabled:d,mergedSize:p,mergedError:v}=h({size:o,disabled:n,error:u}),{mergedSize:c}=S(p),{opened:m}=A(l),b=$(),y=B((()=>{var e;return null==(e=b.value)?void 0:e.inputRef})),g=B((()=>0===l.modelValue.length)),x=B((()=>l.allowSearch||l.allowCreate)),C=B((()=>l.allowClear&&!l.disabled&&!g.value)),w=e=>{var l,t;a("focus",e),null==(t=null==(l=s.value)?void 0:l.onFocus)||t.call(l,e)},V=e=>{var l,t;a("blur",e),null==(t=null==(l=s.value)?void 0:l.onBlur)||t.call(l,e)},k=e=>{a("remove",e)},I=e=>{a("clear",e)},j=()=>{return _(ee,null,[C.value&&_(be,{class:`${r}-clear-btn`,onClick:I,onMousedown:e=>e.stopPropagation()},{default:()=>[_(he,null,null)]}),_("span",{class:`${r}-icon`},[l.loading?null!=(a=null==(e=t["loading-icon"])?void 0:e.call(t))?a:_(O,null,null):l.allowSearch&&l.opened?null!=(n=null==(o=t["search-icon"])?void 0:o.call(t))?n:_(xe,null,null):t["arrow-icon"]?t["arrow-icon"]():_(f,{class:`${r}-arrow-icon`},null)]),Boolean(i.value)&&_(ie,{type:i.value},null)]);var e,a,o,n};F(m,(e=>{!e&&y.value&&y.value.isSameNode(document.activeElement)&&y.value.blur()}));const z=B((()=>[`${r}-${l.multiple?"multiple":"single"}`,{[`${r}-opened`]:l.opened,[`${r}-borderless`]:!l.bordered}]));return{inputRef:y,handleFocus:w,handleBlur:V,render:()=>l.multiple?_(Pl,{ref:b,baseCls:r,class:z.value,modelValue:l.modelValue,inputValue:l.inputValue,focused:l.opened,placeholder:l.placeholder,disabled:d.value,size:c.value,error:v.value,maxTagCount:l.maxTagCount,disabledInput:!l.allowSearch&&!l.allowCreate,retainInputValue:!0,uninjectFormItemContext:!0,onRemove:k,onFocus:w,onBlur:V},{prefix:t.prefix,suffix:j,tag:t.label}):_(ml,{ref:b,baseCls:r,class:z.value,modelValue:l.modelValue[0],inputValue:l.inputValue,focused:l.opened,placeholder:l.placeholder,disabled:d.value,size:c.value,error:v.value,enabledInput:x.value,uninjectFormItemContext:!0,onFocus:w,onBlur:V},{default:t.label,prefix:t.prefix,suffix:j})}},methods:{focus(){this.inputRef&&this.inputRef.focus()},blur(){this.inputRef&&this.inputRef.blur()}},render(){return this.render()}});const Tl="undefined"==typeof window?global:window;c.enableBoundaryChecking(!1);var Nl=V({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:Infinity},min:{type:Number,default:-Infinity},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"},readOnly:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:(e,l)=>!0,focus:e=>!0,blur:e=>!0,clear:e=>!0,input:(e,l,a)=>!0},setup(l,{emit:a,slots:t}){var o;const{size:n,disabled:u}=A(l),i=e("input-number"),d=$(),{mergedSize:p,mergedDisabled:v,eventHandlers:O}=h({size:n,disabled:u}),{mergedSize:V}=S(p),k=B((()=>{if(r(l.precision)){const e=`${l.step}`.split(".")[1],a=e&&e.length||0;return Math.max(a,l.precision)}})),I=e=>{var a,t;if(!r(e))return"";const o=k.value?e.toFixed(k.value):String(e);return null!=(t=null==(a=l.formatter)?void 0:a.call(l,o))?t:o},j=$(I(null!=(o=l.modelValue)?o:l.defaultValue)),z=B((()=>{var e,a;if(!j.value)return;const t=Number(null!=(a=null==(e=l.parser)?void 0:e.call(l,j.value))?a:j.value);return Number.isNaN(t)?void 0:t})),R=$(r(z.value)&&z.value<=l.min),P=$(r(z.value)&&z.value>=l.max);let M=0;const T=()=>{M&&(window.clearTimeout(M),M=0)},N=e=>{if(!s(e))return r(l.min)&&e<l.min&&(e=l.min),r(l.max)&&e>l.max&&(e=l.max),r(k.value)?c.round(e,k.value):e},K=e=>{let a=!1,t=!1;r(e)&&(e<=l.min&&(a=!0),e>=l.max&&(t=!0)),P.value!==t&&(P.value=t),R.value!==a&&(R.value=a)},E=()=>{const e=N(z.value),l=I(e);e===z.value&&j.value===l||(j.value=l),a("update:modelValue",e)};F((()=>l.min),(e=>{const l=r(z.value)&&z.value<=e;R.value!==l&&(R.value=l);r(z.value)&&z.value<e&&E()})),F((()=>l.max),(e=>{const l=r(z.value)&&z.value>=e;P.value!==l&&(P.value=l);r(z.value)&&z.value>e&&E()}));const D=(e,t)=>{if(v.value||"plus"===e&&P.value||"minus"===e&&R.value)return;let o;o=r(z.value)?N(c[e](z.value,l.step)):-Infinity===l.min?0:l.min,j.value=I(o),K(o),a("update:modelValue",o),a("change",o,t)},L=(e,l,a=!1)=>{var t;e.preventDefault(),null==(t=d.value)||t.focus(),D(l,e),a&&(M=window.setTimeout((()=>e.target.dispatchEvent(e)),150))},H=(e,t)=>{var o,n,u,i;e=e.trim().replace(/。/g,"."),e=null!=(n=null==(o=l.parser)?void 0:o.call(l,e))?n:e,(r(Number(e))||/^(\.|-)$/.test(e))&&(j.value=null!=(i=null==(u=l.formatter)?void 0:u.call(l,e))?i:e,K(z.value),"input"===l.modelEvent&&a("update:modelValue",z.value),a("input",z.value,j.value,t))},W=e=>{a("focus",e)},q=(e,t)=>{const o=N(z.value),n=I(o);o===z.value&&j.value===n||(j.value=n,K(o)),Y((()=>{r(l.modelValue)&&l.modelValue!==o&&(j.value=I(l.modelValue),K(l.modelValue))})),a("update:modelValue",o),a("change",o,t)},G=e=>{a("blur",e)},Q=e=>{var l,t;j.value="",a("update:modelValue",void 0),a("change",void 0,e),null==(t=null==(l=O.value)?void 0:l.onChange)||t.call(l,e),a("clear",e)},U=C(new Map([[w.ARROW_UP,e=>{e.preventDefault(),!l.readOnly&&D("plus",e)}],[w.ARROW_DOWN,e=>{e.preventDefault(),!l.readOnly&&D("minus",e)}]]));F((()=>l.modelValue),(e=>{e!==z.value&&(j.value=I(e),K(e))}));const J=()=>{var e;return l.readOnly?null:_(ee,null,[null==(e=t.suffix)?void 0:e.call(t),_("div",{class:`${i}-step`},[_("button",{class:[`${i}-step-button`,{[`${i}-step-button-disabled`]:v.value||P.value}],type:"button",tabindex:"-1",disabled:v.value||P.value,onMousedown:e=>L(e,"plus",!0),onMouseup:T,onMouseleave:T},[_(m,null,null)]),_("button",{class:[`${i}-step-button`,{[`${i}-step-button-disabled`]:v.value||R.value}],type:"button",tabindex:"-1",disabled:v.value||R.value,onMousedown:e=>L(e,"minus",!0),onMouseup:T,onMouseleave:T},[_(f,null,null)])])])},X=B((()=>[i,`${i}-mode-${l.mode}`,`${i}-size-${V.value}`,{[`${i}-readonly`]:l.readOnly}])),Z=()=>_(g,{size:V.value,tabindex:"-1",class:`${i}-step-button`,disabled:v.value||R.value,onMousedown:e=>L(e,"minus",!0),onMouseup:T,onMouseleave:T},{icon:()=>_(y,null,null)}),le=()=>_(g,{size:V.value,tabindex:"-1",class:`${i}-step-button`,disabled:v.value||P.value,onMousedown:e=>L(e,"plus",!0),onMouseup:T,onMouseleave:T},{icon:()=>_(b,null,null)});return{inputRef:d,render:()=>{const e="embed"===l.mode?{prepend:t.prepend,prefix:t.prefix,suffix:l.hideButton?t.suffix:J,append:t.append}:{prepend:Z,prefix:t.prefix,suffix:t.suffix,append:le};return _(x,{key:`__arco__${l.mode}`,ref:d,class:X.value,type:"text",allowClear:l.allowClear,size:V.value,modelValue:j.value,placeholder:l.placeholder,disabled:v.value,readonly:l.readOnly,error:l.error,inputAttrs:{role:"spinbutton","aria-valuemax":l.max,"aria-valuemin":l.min,"aria-valuenow":j.value},onInput:H,onFocus:W,onBlur:G,onClear:Q,onChange:q,onKeydown:U},e)}}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}});const _l=Object.assign(Nl,{install:(e,l)=>{t(e,l);const a=o(l);e.component(a+Nl.name,Nl)}});var Kl=l(V({name:"Optgroup",props:{label:{type:String}},setup:()=>({prefixCls:e("select-group")})}),[["render",function(e,l,a,t,o,n){return k(),N(ee,null,[z("li",{class:R(`${e.prefixCls}-title`)},[E(e.$slots,"label",{},(()=>[J(X(e.label),1)]))],2),E(e.$slots,"default")],64)}]]);const El=({dataKeys:e,contentRef:l,fixedSize:a,estimatedSize:t,buffer:o})=>{const n=$(0),u=new Map,r=B((()=>e.value.length)),i=$(0),s=B((()=>{const e=i.value+3*o.value;return e>r.value?r.value:e})),d=B((()=>{const e=r.value-3*o.value;return e<0?0:e})),p=$(a.value),v=B((()=>30!==t.value?t.value:n.value||t.value)),c=l=>{var a;if(p.value)return v.value;const t=e.value[l];return null!=(a=u.get(t))?a:v.value};M((()=>{const e=Array.from(u.values()).reduce(((e,l)=>e+l),0);e>0&&(n.value=e/u.size)}));const f=(e,l)=>{let a=0;for(let t=e;t<l;t++)a+=c(t);return a},m=B((()=>p.value?v.value*i.value:f(0,i.value))),b=B((()=>p.value?v.value*(r.value-s.value):f(s.value,r.value)));return{frontPadding:m,behindPadding:b,start:i,end:s,getStartByScroll:e=>{const l=(e=>{const l=e>=m.value;let a=Math.abs(e-m.value);const t=l?i.value:i.value-1;let o=0;for(;a>0;)a-=c(t+o),l?o++:o--;return o})(e),a=i.value+l-o.value;return a<0?0:a>d.value?d.value:a},setItemSize:(e,l)=>{u.set(e,l)},hasItemSize:e=>u.has(e),setStart:e=>{e<0?i.value=0:e>d.value?i.value=d.value:i.value=e},getScrollOffset:e=>p.value?v.value*e:f(0,e)}};var Dl=V({name:"VirtualListItem",props:{hasItemSize:{type:Function,required:!0},setItemSize:{type:Function,required:!0}},setup(e,{slots:l}){var a;const t=null==(a=U())?void 0:a.vnode.key,o=$(),n=()=>{var l,a,n,u;const r=null!=(a=null==(l=o.value)?void 0:l.$el)?a:o.value,i=null!=(u=null==(n=null==r?void 0:r.getBoundingClientRect)?void 0:n.call(r).height)?u:null==r?void 0:r.offsetHeight;i&&e.setItemSize(t,i)};return M((()=>n())),Q((()=>n())),()=>{var e;const a=Be(null==(e=l.default)?void 0:e.call(l));return a?le(a,{ref:o},!0):null}}}),Fl=Object.defineProperty,Al=Object.getOwnPropertySymbols,Ll=Object.prototype.hasOwnProperty,Hl=Object.prototype.propertyIsEnumerable,Wl=(e,l,a)=>l in e?Fl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a;var ql=l(V({name:"VirtualList",components:{VirtualListItem:Dl},props:{height:{type:[Number,String],default:200},data:{type:Array,default:()=>[]},threshold:{type:Number,default:0},itemKey:{type:String,default:"key"},fixedSize:{type:Boolean,default:!1},estimatedSize:{type:Number,default:30},buffer:{type:Number,default:10},component:{type:[String,Object],default:"div"},listAttrs:{type:Object},contentAttrs:{type:Object},paddingPosition:{type:String,default:"content"}},emits:{scroll:e=>!0,reachBottom:e=>!0},setup(l,{emit:t}){const{data:o,itemKey:n,fixedSize:u,estimatedSize:i,buffer:s,height:d}=A(l),p=e("virtual-list"),v=B((()=>a(l.component)?((e,l)=>{for(var a in l||(l={}))Ll.call(l,a)&&Wl(e,a,l[a]);if(Al)for(var a of Al(l))Hl.call(l,a)&&Wl(e,a,l[a]);return e})({container:"div",list:"div",content:"div"},l.component):{container:l.component,list:"div",content:"div"})),c=$(),f=$(),m=B((()=>({height:r(d.value)?`${d.value}px`:d.value,overflow:"auto"}))),b=B((()=>o.value.map(((e,l)=>{var a;return null!=(a=e[n.value])?a:l})))),{frontPadding:y,behindPadding:h,start:g,end:x,getStartByScroll:S,setItemSize:O,hasItemSize:C,setStart:w,getScrollOffset:V}=El({dataKeys:b,contentRef:f,fixedSize:u,estimatedSize:i,buffer:s}),k=B((()=>l.threshold&&o.value.length<=l.threshold?o.value:o.value.slice(g.value,x.value)));return{prefixCls:p,containerRef:c,contentRef:f,frontPadding:y,currentList:k,behindPadding:h,onScroll:e=>{const{scrollTop:l,scrollHeight:a,offsetHeight:o}=e.target,n=S(l);n!==g.value&&w(n),t("scroll",e);Math.floor(a-(l+o))<=0&&t("reachBottom",e)},setItemSize:O,hasItemSize:C,start:g,scrollTo:e=>{var l,a;if(c.value)if(r(e))c.value.scrollTop=e;else{const t=null!=(a=e.index)?a:b.value.indexOf(null!=(l=e.key)?l:"");w(t-s.value),c.value.scrollTop=V(t),Y((()=>{if(c.value){const e=V(t);e!==c.value.scrollTop&&(c.value.scrollTop=e)}}))}},style:m,mergedComponent:v}}}),[["render",function(e,l,a,t,o,n){const u=T("VirtualListItem");return k(),I(H(e.mergedComponent.container),{ref:"containerRef",class:R(e.prefixCls),style:P(e.style),onScroll:e.onScroll},{default:j((()=>[(k(),I(H(e.mergedComponent.list),K(e.listAttrs,{style:"list"===e.paddingPosition?{paddingTop:`${e.frontPadding}px`,paddingBottom:`${e.behindPadding}px`}:{}}),{default:j((()=>[(k(),I(H(e.mergedComponent.content),K({ref:"contentRef"},e.contentAttrs,{style:"content"===e.paddingPosition?{paddingTop:`${e.frontPadding}px`,paddingBottom:`${e.behindPadding}px`}:{}}),{default:j((()=>[(k(!0),N(ee,null,ae(e.currentList,((l,a)=>{var t;return k(),I(u,{key:null!=(t=l[e.itemKey])?t:e.start+a,"has-item-size":e.hasItemSize,"set-item-size":e.setItemSize},{default:j((()=>[E(e.$slots,"item",{item:l,index:e.start+a})])),_:2},1032,["has-item-size","set-item-size"])})),128))])),_:3},16,["style"]))])),_:3},16,["style"]))])),_:3},8,["class","style","onScroll"])}]]),Gl=Object.defineProperty,Ql=Object.defineProperties,Ul=Object.getOwnPropertyDescriptors,Jl=Object.getOwnPropertySymbols,Xl=Object.prototype.hasOwnProperty,Yl=Object.prototype.propertyIsEnumerable,Zl=(e,l,a)=>l in e?Gl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,ea=(e,l)=>{for(var a in l||(l={}))Xl.call(l,a)&&Zl(e,a,l[a]);if(Jl)for(var a of Jl(l))Yl.call(l,a)&&Zl(e,a,l[a]);return e};const la={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"};var aa=V({name:"Select",components:{Trigger:ue,SelectView:Ml},inheritAttrs:!1,props:{multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:e=>s(e.multiple)?"":[]},inputValue:{type:String},defaultInputValue:{type:String,default:""},size:{type:String},placeholder:String,loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowSearch:{type:[Boolean,Object],default:e=>Boolean(e.multiple)},allowCreate:{type:Boolean,default:!1},maxTagCount:{type:Number,default:0},popupContainer:{type:[String,Object]},bordered:{type:Boolean,default:!0},defaultActiveFirstOption:{type:Boolean,default:!0},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},unmountOnClose:{type:Boolean,default:!1},filterOption:{type:[Boolean,Function],default:!0},options:{type:Array,default:()=>[]},virtualListProps:{type:Object},triggerProps:{type:Object},formatLabel:{type:Function},fallbackOption:{type:[Boolean,Function],default:!0},showExtraOptions:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},searchDelay:{type:Number,default:500},limit:{type:Number,default:0},fieldNames:{type:Object},scrollbar:{type:[Boolean,Object],default:!0}},emits:{"update:modelValue":e=>!0,"update:inputValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,popupVisibleChange:e=>!0,clear:e=>!0,remove:e=>!0,search:e=>!0,dropdownScroll:e=>!0,dropdownReachBottom:e=>!0,exceedLimit:(e,l)=>!0},setup(l,{slots:t,emit:o,attrs:n}){const{size:u,disabled:c,error:f,options:m,filterOption:b,valueKey:y,multiple:g,popupVisible:x,showExtraOptions:S,modelValue:O,fieldNames:V,loading:k}=A(l),I=e("select"),{mergedSize:j,mergedDisabled:z,mergedError:R,eventHandlers:P}=h({size:u,disabled:c,error:f}),M=B((()=>l.virtualListProps?"div":"li")),T=B((()=>a(l.allowSearch)&&Boolean(l.allowSearch.retainInputValue)));B((()=>{if(i(l.formatLabel))return e=>{const a=be.get(e.value);return l.formatLabel(a)}}));const N=$(),E=$({}),D=$(),{computedPopupVisible:L,handlePopupVisibleChange:H}=fl({popupVisible:x,emit:o}),W=$(l.defaultValue),q=B((()=>{var e;const a=null!=(e=l.modelValue)?e:W.value;return(p(a)?a:a||r(a)?[a]:[]).map((e=>({value:e,key:Xe(e,l.valueKey)})))}));F(O,(e=>{(s(e)||d(e))&&(W.value=g.value?[]:"")}));const Q=B((()=>q.value.map((e=>e.key)))),U=B((()=>ea(ea({},la),null==V?void 0:V.value))),J=$(),X=e=>{J.value=(e=>{const l={};return e.forEach((e=>{l[e]=be.get(e)})),l})(e)},ee=$([]),le=B((()=>ee.value.map((e=>{var t;let o=(n=e.value,i(l.fallbackOption)?l.fallbackOption(n):{[U.value.value]:n,[U.value.label]:String(a(n)?n[null==y?void 0:y.value]:n)});var n;const u=null==(t=J.value)?void 0:t[e.key];return s(u)||v(u)||(o=ea(ea({},o),u)),o}))));Y((()=>{te((()=>{var e;const a=(()=>{const e=[],a=[];if(l.allowCreate||l.fallbackOption)for(const l of q.value)if(!a.includes(l.key)){const t=be.get(l.key);t&&"extraOptions"!==t.origin||(e.push(l),a.push(l.key))}if(l.allowCreate&&ne.value){const l=Xe(ne.value);if(!a.includes(l)){const a=be.get(l);a&&"extraOptions"!==a.origin||e.push({value:ne.value,key:l})}}return e})();if(a.length!==ee.value.length)ee.value=a;else if(a.length>0)for(let l=0;l<a.length;l++)if(a[l].key!==(null==(e=ee.value[l])?void 0:e.key)){ee.value=a;break}}))}));const ae=$(""),ne=B((()=>{var e;return null!=(e=l.inputValue)?e:ae.value}));F(L,(e=>{e||T.value||!ne.value||ie("")}));const re=e=>{var a,t;const n=(e=>{var a,t;return l.multiple?e.map((e=>{var l,a;return null!=(a=null==(l=be.get(e))?void 0:l.value)?a:""})):null!=(t=null==(a=be.get(e[0]))?void 0:a.value)?t:""})(e);W.value=n,o("update:modelValue",n),o("change",n),null==(t=null==(a=P.value)?void 0:a.onChange)||t.call(a),X(e)},ie=e=>{ae.value=e,o("update:inputValue",e),o("inputValueChange",e)},se=function(e,l){let a=0;return(...t)=>{a&&Tl.clearTimeout(a),a=Tl.setTimeout((()=>{a=0,e(...t)}),l)}}((e=>{o("search",e)}),l.searchDelay),de=e=>{e!==ne.value&&(L.value||H(!0),ie(e),l.allowSearch&&se(e))},pe=e=>{const l=be.get(e),a=Q.value.filter((l=>l!==e));re(a),o("remove",null==l?void 0:l.value)},ve=e=>{null==e||e.stopPropagation();const l=Q.value.filter((e=>{var l;return null==(l=be.get(e))?void 0:l.disabled}));re(l),ie(""),o("clear",e)},ce=e=>{o("dropdownScroll",e)},fe=e=>{o("dropdownReachBottom",e)},{validOptions:me,optionInfoMap:be,validOptionInfos:ye,enabledOptionKeys:he,handleKeyDown:ge}=(({multiple:e,options:l,extraOptions:a,inputValue:t,filterOption:o,showExtraOptions:n,component:u,valueKey:r,fieldNames:i,loading:s,popupVisible:d,valueKeys:p,dropdownRef:v,optionRefs:c,virtualListRef:f,onSelect:m,onPopupVisibleChange:b,enterToOpen:y=!0})=>{const{validOptions:h,optionInfoMap:g,validOptionInfos:x,enabledOptionKeys:S,getNextSlotOptionIndex:O,addSlotOptionInfo:V,removeSlotOptionInfo:B}=cl({options:l,extraOptions:a,inputValue:t,filterOption:o,showExtraOptions:n,valueKey:r,fieldNames:i}),k=$();F(S,(e=>{k.value&&e.includes(k.value)||(k.value=e[0])}));const I=e=>{k.value=e},j=e=>{const l=S.value.length;if(0===l)return;if(!k.value)return"down"===e?S.value[0]:S.value[l-1];const a=(l+S.value.indexOf(k.value)+("up"===e?-1:1))%l;return S.value[a]},z=e=>{var l,a;(null==f?void 0:f.value)&&f.value.scrollTo({key:e});const t=g.get(e),o=null==(l=null==v?void 0:v.value)?void 0:l.wrapperRef,n=null!=(a=null==c?void 0:c.value[e])?a:null==t?void 0:t.ref;if(!o||!n)return;if(o.scrollHeight===o.offsetHeight)return;const u=Ve(n,o),r=o.scrollTop;u.top<0?o.scrollTo(0,r+u.top):u.bottom<0&&o.scrollTo(0,r-u.bottom)};F(d,(e=>{if(e){const e=p.value[p.value.length-1],l=S.value.includes(e)?e:S.value[0];l!==k.value&&(k.value=l),Y((()=>{k.value&&z(k.value)}))}}));const R=C(new Map([[w.ENTER,e=>{(null==s?void 0:s.value)||(d.value?k.value&&(m(k.value,e),e.preventDefault()):y&&(b(!0),e.preventDefault()))}],[w.ESC,e=>{d.value&&(b(!1),e.preventDefault())}],[w.ARROW_DOWN,e=>{if(d.value){const l=j("down");l&&(k.value=l,z(l)),e.preventDefault()}}],[w.ARROW_UP,e=>{if(d.value){const l=j("up");l&&(k.value=l,z(l)),e.preventDefault()}}]]));return Z(Ee,G({multiple:e,valueKey:r,inputValue:t,filterOption:o,component:u,valueKeys:p,activeKey:k,setActiveKey:I,onSelect:m,getNextSlotOptionIndex:O,addSlotOptionInfo:V,removeSlotOptionInfo:B})),{validOptions:h,optionInfoMap:g,validOptionInfos:x,enabledOptionKeys:S,activeKey:k,setActiveKey:I,addSlotOptionInfo:V,removeSlotOptionInfo:B,getNextActiveKey:j,scrollIntoView:z,handleKeyDown:R}})({multiple:g,options:m,extraOptions:le,inputValue:ne,filterOption:b,showExtraOptions:S,component:M,valueKey:y,fieldNames:V,loading:k,popupVisible:L,valueKeys:Q,dropdownRef:N,optionRefs:E,virtualListRef:D,onSelect:(e,a)=>{if(l.multiple){if(Q.value.includes(e)){const l=Q.value.filter((l=>l!==e));re(l)}else if(he.value.includes(e))if(l.limit>0&&Q.value.length>=l.limit){const l=be.get(e);o("exceedLimit",null==l?void 0:l.value,a)}else{const l=Q.value.concat(e);re(l)}T.value||ie("")}else{if(e!==Q.value[0]&&re([e]),T.value){const l=be.get(e);l&&ie(l.label)}H(!1)}},onPopupVisibleChange:H}),xe=B((()=>{var e;const l=[];for(const n of q.value){const u=be.get(n.key);u&&l.push((t=ea({},u),o={value:n.key,label:null!=(e=null==u?void 0:u.label)?e:String(a(n.value)?n.value[null==y?void 0:y.value]:n.value),closable:!(null==u?void 0:u.disabled),tagProps:null==u?void 0:u.tagProps},Ql(t,Ul(o))))}var t,o;return l})),Se=e=>{if(i(t.option)){const l=t.option;return()=>l({data:e.raw})}return i(e.render)?e.render:()=>e.label},Oe=e=>{if(Ue(e)){let a;return _(Kl,{key:e.key,label:e.label},"function"==typeof(l=a=e.options.map((e=>Oe(e))))||"[object Object]"===Object.prototype.toString.call(l)&&!oe(l)?a:{default:()=>[a]})}var l;return ll(e,{inputValue:ne.value,filterOption:null==b?void 0:b.value})?_(tl,{ref:l=>{(null==l?void 0:l.$el)&&(E.value[e.key]=l.$el)},key:e.key,value:e.value,label:e.label,disabled:e.disabled,internal:!0},{default:Se(e)}):null},Ce=()=>_(Ke,{ref:N,loading:l.loading,empty:0===ye.value.length,virtualList:Boolean(l.virtualListProps),scrollbar:l.scrollbar,onScroll:ce,onReachBottom:fe},{default:()=>{var e,l;return[...null!=(l=null==(e=t.default)?void 0:e.call(t))?l:[],...me.value.map(Oe)]},"virtual-list":()=>_(ql,K(l.virtualListProps,{ref:D,data:me.value}),{item:({item:e})=>Oe(e)}),empty:t.empty,footer:t.footer}),we=({data:e})=>{var a,o,n,u;if((t.label||i(l.formatLabel))&&e){const u=be.get(e.value);if(null==u?void 0:u.raw)return null!=(n=null==(a=t.label)?void 0:a.call(t,{data:u.raw}))?n:null==(o=l.formatLabel)?void 0:o.call(l,u.raw)}return null!=(u=null==e?void 0:e.label)?u:""};return()=>_(ue,K({trigger:"click",position:"bl",popupOffset:4,animationName:"slide-dynamic-origin",hideEmpty:!0,preventFocus:!0,autoFitPopupWidth:!0,autoFitTransformOrigin:!0,disabled:z.value,popupVisible:L.value,unmountOnClose:l.unmountOnClose,clickToClose:!(l.allowSearch||l.allowCreate),popupContainer:l.popupContainer,onPopupVisibleChange:H},l.triggerProps),{default:()=>{var e,a;return[null!=(a=null==(e=t.trigger)?void 0:e.call(t))?a:_(Ml,K({class:I,modelValue:xe.value,inputValue:ne.value,multiple:l.multiple,disabled:z.value,error:R.value,loading:l.loading,allowClear:l.allowClear,allowCreate:l.allowCreate,allowSearch:Boolean(l.allowSearch),opened:L.value,maxTagCount:l.maxTagCount,placeholder:l.placeholder,bordered:l.bordered,size:j.value,onInputValueChange:de,onRemove:pe,onClear:ve,onKeydown:ge},n),{label:we,prefix:t.prefix,"arrow-icon":t["arrow-icon"],"loading-icon":t["loading-icon"],"search-icon":t["search-icon"]})]},content:Ce})}});const ta=Object.assign(aa,{Option:tl,OptGroup:Kl,install:(e,l)=>{t(e,l);const a=o(l);e.component(a+aa.name,aa),e.component(a+tl.name,tl),e.component(a+Kl.name,Kl)}});export{_l as I,ta as S,ql as V,_e as a,je as b,fl as c,ze as u};
