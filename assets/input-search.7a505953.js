import{d as e,T as l,ai as a,aj as t,ak as n,g as u,c as r,_ as o,a2 as s,w as i,A as c,x as p,M as d,H as v,k as f,t as h,ae as y,u as g,V as m,W as b,af as x,i as B,al as k,am as $,h as S,b as w,a4 as L,ad as C,an as z,D as I,a7 as O,ao as E,F as T,B as j}from"./index.e00e4771.js";import{p as F}from"./pick.50d21532.js";var R=o(e({name:"FeedbackIcon",components:{IconLoading:l,IconCheckCircleFill:a,IconExclamationCircleFill:t,IconCloseCircleFill:n},props:{type:{type:String}},setup(e){const l=u("feedback-icon");return{cls:r((()=>[l,`${l}-status-${e.type}`]))}}}),[["render",function(e,l,a,t,n,u){const r=s("icon-loading"),o=s("icon-check-circle-fill"),f=s("icon-exclamation-circle-fill"),h=s("icon-close-circle-fill");return i(),c("span",{class:v(e.cls)},["validating"===e.type?(i(),p(r,{key:0})):"success"===e.type?(i(),p(o,{key:1})):"warning"===e.type?(i(),p(f,{key:2})):"error"===e.type?(i(),p(h,{key:3})):d("v-if",!0)],2)}]]);const V={key:"Enter",code:"Enter"},W={key:"Backspace",code:"Backspace"};var P=Object.defineProperty,A=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,H=(e,l,a)=>l in e?P(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,_=(e,l)=>{for(var a in l||(l={}))M.call(l,a)&&H(e,a,l[a]);if(A)for(var a of A(l))D.call(l,a)&&H(e,a,l[a]);return e},K=e({name:"Input",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},size:{type:String},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},placeholder:String,maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},wordLength:{type:Function},wordSlice:{type:Function},inputAttrs:{type:Object},type:{type:String,default:"text"}},emits:{"update:modelValue":e=>!0,input:(e,l)=>!0,change:(e,l)=>!0,pressEnter:e=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:l,slots:a,attrs:t}){const{size:n,disabled:o,error:s,modelValue:i}=h(e),c=u("input"),p=f(),{mergedSize:d,mergedDisabled:v,mergedError:E,feedback:T,eventHandlers:j}=y({size:n,disabled:o,error:s}),{mergedSize:W}=g(d),[P,A]=function(e){const l=f();return[function(){if(!e.value)return;const{selectionStart:a,selectionEnd:t,value:n}=e.value;if(null==a||null==t)return;const u=n.slice(0,Math.max(0,a)),r=n.slice(Math.max(0,t));l.value={selectionStart:a,selectionEnd:t,value:n,beforeTxt:u,afterTxt:r}},function(){if(!e.value||!l.value)return;const{value:a}=e.value,{beforeTxt:t,afterTxt:n,selectionStart:u}=l.value;if(!t||!n||!u)return;let r=a.length;if(a.endsWith(n))r=a.length-n.length;else if(a.startsWith(t))r=t.length;else{const e=t[u-1],l=a.indexOf(e,u-1);-1!==l&&(r=l+1)}e.value.setSelectionRange(r,r)}]}(p),M=f(e.defaultValue),D=r((()=>{var l;return null!=(l=e.modelValue)?l:M.value}));m(i,(e=>{(b(e)||x(e))&&(M.value="")}));let H=D.value;const K=f(!1),N=r((()=>e.allowClear&&!v.value&&Boolean(D.value))),q=f(!1),G=f(""),J=l=>{var a;return S(e.wordLength)?e.wordLength(l):null!=(a=l.length)?a:0},Q=r((()=>J(D.value))),U=r((()=>E.value||Boolean(B(e.maxLength)&&e.maxLength.errorOnly&&Q.value>Y.value))),X=r((()=>B(e.maxLength)&&Boolean(e.maxLength.errorOnly))),Y=r((()=>B(e.maxLength)?e.maxLength.length:e.maxLength)),Z=a=>{var t,n;Y.value&&!X.value&&J(a)>Y.value&&(a=null!=(n=null==(t=e.wordSlice)?void 0:t.call(e,a,Y.value))?n:a.slice(0,Y.value)),M.value=a,l("update:modelValue",a)},ee=e=>{p.value&&e.target!==p.value&&(e.preventDefault(),p.value.focus())},le=(e,a)=>{var t,n;e!==H&&(H=e,l("change",e,a),null==(n=null==(t=j.value)?void 0:t.onChange)||n.call(t,a))},ae=e=>{var a,t;K.value=!0,H=D.value,l("focus",e),null==(t=null==(a=j.value)?void 0:a.onFocus)||t.call(a,e)},te=e=>{var a,t;K.value=!1,le(D.value,e),l("blur",e),null==(t=null==(a=j.value)?void 0:a.onBlur)||t.call(a,e)},ne=e=>{var a,t,n;const{value:u,selectionStart:r,selectionEnd:o}=e.target;if("compositionend"===e.type){if(q.value=!1,G.value="",Y.value&&!X.value&&D.value.length>=Y.value&&J(u)>Y.value&&r===o)return void ue();Z(u),l("input",u,e),null==(t=null==(a=j.value)?void 0:a.onInput)||t.call(a,e),ue()}else q.value=!0,G.value=D.value+(null!=(n=e.data)?n:"")},ue=()=>{P(),O((()=>{p.value&&D.value!==p.value.value&&(p.value.value=D.value,A())}))},re=e=>{var a,t;const{value:n}=e.target;if(!q.value){if(Y.value&&!X.value&&(D.value.length>=Y.value||J(n)>Y.value)&&"insertText"===e.inputType)return void ue();Z(n),l("input",n,e),null==(t=null==(a=j.value)?void 0:a.onInput)||t.call(a,e),ue()}},oe=e=>{Z(""),le("",e),l("clear",e)},se=e=>{const a=e.key||e.code;q.value||a!==V.key||(le(D.value,e),l("pressEnter",e))},ie=r((()=>[`${c}-outer`,`${c}-outer-size-${W.value}`,{[`${c}-outer-has-suffix`]:Boolean(a.suffix),[`${c}-outer-disabled`]:v.value}])),ce=r((()=>[`${c}-wrapper`,{[`${c}-error`]:U.value,[`${c}-disabled`]:v.value,[`${c}-focus`]:K.value}])),pe=r((()=>[c,`${c}-size-${W.value}`])),de=r((()=>k(t,$))),ve=r((()=>F(t,$))),fe=r((()=>{const l=_(_({},ve.value),e.inputAttrs);return U.value&&(l["aria-invalid"]=!0),l})),he=l=>{var t;return w("span",L({class:ce.value,onMousedown:ee},l?void 0:de.value),[a.prefix&&w("span",{class:`${c}-prefix`},[a.prefix()]),w("input",L(fe.value,{ref:p,class:pe.value,value:D.value,type:e.type,placeholder:e.placeholder,readonly:e.readonly,disabled:v.value,onInput:re,onKeydown:se,onFocus:ae,onBlur:te,onCompositionstart:ne,onCompositionupdate:ne,onCompositionend:ne}),null),N.value&&w(C,{prefix:c,class:`${c}-clear-btn`,onClick:oe},{default:()=>[w(z,null,null)]}),(a.suffix||Boolean(e.maxLength)&&e.showWordLimit||Boolean(T.value))&&w("span",{class:[`${c}-suffix`,{[`${c}-suffix-has-feedback`]:T.value}]},[Boolean(e.maxLength)&&e.showWordLimit&&w("span",{class:`${c}-word-limit`},[Q.value,I("/"),Y.value]),null==(t=a.suffix)?void 0:t.call(a),Boolean(T.value)&&w(R,{type:T.value},null)])])};return{inputRef:p,render:()=>a.prepend||a.append?w("span",L({class:ie.value},de.value),[a.prepend&&w("span",{class:`${c}-prepend`},[a.prepend()]),he(!0),a.append&&w("span",{class:`${c}-append`},[a.append()])]):he()}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}}),N=e({name:"InputSearch",props:{searchButton:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String},buttonText:{type:String},buttonProps:{type:Object}},emits:{search:(e,l)=>!0},setup(e,{emit:a,slots:t}){const{size:n}=h(e),r=u("input-search"),{mergedSize:o}=g(n),s=f(),i=e=>{s.value.inputRef&&a("search",s.value.inputRef.value,e)},c=()=>{var a;return w(T,null,[e.loading?w(l,null,null):w(C,{onClick:i},{default:()=>[w(E,null,null)]}),null==(a=t.suffix)?void 0:a.call(t)])},p=()=>{var l;let a={};return a=e.buttonText||t["button-default"]||t["button-icon"]?{default:null!=(l=t["button-default"])?l:e.buttonText?()=>e.buttonText:void 0,icon:t["button-icon"]}:{icon:()=>w(E,null,null)},w(j,L({type:"primary",class:`${r}-btn`,disabled:e.disabled,size:o.value,loading:e.loading},e.buttonProps,{onClick:i}),a)};return{inputRef:s,render:()=>w(K,{ref:s,class:r,size:o.value,disabled:e.disabled},{prepend:t.prepend,prefix:t.prefix,suffix:e.searchButton?t.suffix:c,append:e.searchButton?p:t.append})}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}});export{W as B,V as E,R as F,N as I,K as _};
