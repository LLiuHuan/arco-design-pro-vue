import{ae as e,k as t,l as o,h as l,d as a,t as r,g as n,c as s,av as i,j as u,O as p,aQ as c,aR as d,p as f,r as h,aS as v,Q as g,aI as b,o as m,m as y,aT as w,b as C,aU as O,aV as S,$ as P,a7 as B,aW as R,aX as T,F as j,aJ as M,aj as F,s as x,v as $,_ as A,w as V,x as E,z as L,A as z,S as W,q as k,I as D,B as H,D as N}from"./index.eabfbd96.js";import{u as I,R as q}from"./resize-observer-v2.694b619e.js";import{i as Q}from"./ResizeObserver.es.bd9ff68d.js";const X="undefined"==typeof window?global:window,_=X.requestAnimationFrame,J=X.cancelAnimationFrame;function U(e){let t=0;const o=(...o)=>{t&&J(t),t=_((()=>{e(...o),t=0}))};return o.cancel=()=>{J(t),t=0},o}var Y=Object.defineProperty,G=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,ee=(e,t,o)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,te=(e,t)=>{for(var o in t||(t={}))K.call(t,o)&&ee(e,o,t[o]);if(G)for(var o of G(t))Z.call(t,o)&&ee(e,o,t[o]);return e};const oe=(e,t)=>{var o,l;const a=e.getBoundingClientRect();return{top:a.top,bottom:a.bottom,left:a.left,right:a.right,scrollTop:a.top-t.top,scrollBottom:a.bottom-t.top,scrollLeft:a.left-t.left,scrollRight:a.right-t.left,width:null!=(o=e.offsetWidth)?o:e.clientWidth,height:null!=(l=e.offsetHeight)?l:e.clientHeight}},le=(e,t)=>{switch(t){case"top":switch(e){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return e}case"bottom":switch(e){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return e}case"left":switch(e){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return e}case"right":switch(e){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return e}default:return e}},ae=(e,t,{containerRect:o,triggerRect:l,popupRect:a,offset:r,translate:n})=>{const s=(e=>{switch(e){case"top":case"tl":case"tr":default:return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right"}})(e),i={width:document.documentElement.clientWidth||window.innerWidth,height:document.documentElement.clientHeight||window.innerHeight},u=o.top+t.top,p=i.height-(o.top+t.top+a.height),c=o.left+t.left,d=i.width-(o.left+t.left+a.width);let f=e;if("top"===s&&u<0)if(l.top>a.height)t.top=-o.top;else{const s=re("bottom",l,a,{offset:r,translate:n});i.height-(o.top+s.top+a.height)>0&&(f=le(e,"bottom"),t.top=s.top)}if("bottom"===s&&p<0)if(i.height-l.bottom>a.height)t.top=-o.top+(i.height-a.height);else{const s=re("top",l,a,{offset:r,translate:n});o.top+s.top>0&&(f=le(e,"top"),t.top=s.top)}if("left"===s&&c<0)if(l.left>a.width)t.left=-o.left;else{const s=re("right",l,a,{offset:r,translate:n});i.width-(o.left+s.left+a.width)>0&&(f=le(e,"right"),t.left=s.left)}if("right"===s&&d<0)if(i.width-l.right>a.width)t.left=-o.left+(i.width-a.width);else{const s=re("left",l,a,{offset:r,translate:n});o.left+s.left>0&&(f=le(e,"left"),t.left=s.left)}return"top"!==s&&"bottom"!==s||(c<0?t.left=-o.left:d<0&&(t.left=-o.left+(i.width-a.width))),"left"!==s&&"right"!==s||(u<0?t.top=-o.top:p<0&&(t.top=-o.top+(i.height-a.height))),{popupPosition:t,position:f}},re=(t,o,l,{offset:a=0,translate:r=[0,0]}={})=>{var n;const s=null!=(n=e(r)?r:r[t])?n:[0,0];switch(t){case"top":return{left:o.scrollLeft+Math.round(o.width/2)-Math.round(l.width/2)+s[0],top:o.scrollTop-l.height-a+s[1]};case"tl":return{left:o.scrollLeft+s[0],top:o.scrollTop-l.height-a+s[1]};case"tr":return{left:o.scrollRight-l.width+s[0],top:o.scrollTop-l.height-a+s[1]};case"bottom":return{left:o.scrollLeft+Math.round(o.width/2)-Math.round(l.width/2)+s[0],top:o.scrollBottom+a+s[1]};case"bl":return{left:o.scrollLeft+s[0],top:o.scrollBottom+a+s[1]};case"br":return{left:o.scrollRight-l.width+s[0],top:o.scrollBottom+a+s[1]};case"left":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollTop+Math.round(o.height/2)-Math.round(l.height/2)+s[1]};case"lt":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollTop+s[1]};case"lb":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollBottom-l.height+s[1]};case"right":return{left:o.scrollRight+a+s[0],top:o.scrollTop+Math.round(o.height/2)-Math.round(l.height/2)+s[1]};case"rt":return{left:o.scrollRight+a+s[0],top:o.scrollTop+s[1]};case"rb":return{left:o.scrollRight+a+s[0],top:o.scrollBottom-l.height+s[1]};default:return{left:0,top:0}}},ne=e=>{let t="0";["top","bottom"].includes(e)?t="50%":["left","lt","lb","tr","br"].includes(e)&&(t="100%");let o="0";return["left","right"].includes(e)?o="50%":["top","tl","tr","lt","rt"].includes(e)&&(o="100%"),`${t} ${o}`},se=e=>e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth,ie=e=>{var t;const o=[];let l=e;for(;l&&l!==document.documentElement;)se(l)&&o.push(l),l=null!=(t=l.parentElement)?t:void 0;return o};function ue(e,l){const a=t(e[l]);return o((()=>{const t=e[l];a.value!==t&&(a.value=t)})),a}const pe=Symbol("ArcoTrigger");var ce=Object.defineProperty,de=Object.defineProperties,fe=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,be=(e,t,o)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,me=(e,t)=>{for(var o in t||(t={}))ve.call(t,o)&&be(e,o,t[o]);if(he)for(var o of he(t))ge.call(t,o)&&be(e,o,t[o]);return e};const ye=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var we=a({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(e,{emit:a,slots:x,attrs:$}){const{popupContainer:A}=r(e),V=n("trigger"),E=s((()=>i($,ye))),L=u(p,void 0),z=s((()=>[].concat(e.trigger))),W=new Set,k=u(pe,void 0),{children:D,firstElement:H}=I(),N=t(),X=t(e.defaultPopupVisible),_=t(e.position),J=t({}),Y=t({}),G=t({}),K=t(),Z=t({top:0,left:0}),ee=s((()=>{var t;return null!=(t=e.popupVisible)?t:X.value})),{teleportContainer:le,containerRef:se}=c({popupContainer:A,visible:ee,documentContainer:!0}),{zIndex:ce}=d("popup",{visible:ee});let he=0,ve=!1;const ge=t=>{if(e.alignPoint){const{pageX:e,pageY:o}=t;Z.value={top:o,left:e}}},be=()=>{if(!H.value||!N.value||!se.value)return;const t=se.value.getBoundingClientRect(),o=e.alignPoint?{top:Z.value.top,bottom:Z.value.top,left:Z.value.left,right:Z.value.left,scrollTop:Z.value.top,scrollBottom:Z.value.top,scrollLeft:Z.value.left,scrollRight:Z.value.left,width:0,height:0}:oe(H.value,t),l=oe(N.value,t),{style:a,position:r}=((e,t,o,l,{offset:a=0,translate:r=[0,0],customStyle:n={},autoFitPosition:s=!1}={})=>{let i=e,u=re(e,o,l,{offset:a,translate:r});if(s){const n=ae(e,u,{containerRect:t,popupRect:l,triggerRect:o,offset:a,translate:r});u=n.popupPosition,i=n.position}return{style:te({left:`${u.left}px`,top:`${u.top}px`},n),position:i}})(e.position,t,o,l,{offset:e.popupOffset,translate:e.popupTranslate,customStyle:e.popupStyle,autoFitPosition:e.autoFitPosition});e.autoFitTransformOrigin&&(Y.value={transformOrigin:ne(r)}),e.autoFitPopupMinWidth?a.minWidth=`${o.width}px`:e.autoFitPopupWidth&&(a.width=`${o.width}px`),_.value!==r&&(_.value=r),J.value=a,e.showArrow&&(G.value=((e,t,o,{customStyle:l={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(e)){let a=Math.abs(t.scrollLeft+t.width/2-o.scrollLeft);return a>o.width-8&&(a=t.width>o.width?o.width/2:o.width-8),["top","tl","tr"].includes(e)?te({left:`${a}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},l):te({left:`${a}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},l)}let a=Math.abs(t.scrollTop+t.height/2-o.scrollTop);return a>o.height-8&&(a=t.height>o.height?o.height/2:o.height-8),["left","lt","lb"].includes(e)?te({top:`${a}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},l):te({top:`${a}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},l)})(r,o,l,{customStyle:e.arrowStyle}))},we=(e,t)=>{if(e===ee.value&&0===he)return;const o=()=>{X.value=e,a("update:popupVisible",e),a("popupVisibleChange",e),e&&F((()=>{be()}))};t?(he&&(window.clearTimeout(he),he=0),e!==ee.value&&(he=window.setTimeout(o,t))):o()},Ce=t=>{var o;null==(o=$.onClick)||o.call($,t),e.disabled||ee.value&&!e.clickToClose||(z.value.includes("click")?(ge(t),we(!ee.value)):z.value.includes("contextMenu")&&ee.value&&we(!1))},Oe=t=>{var o;null==(o=$.onMouseenter)||o.call($,t),!e.disabled&&z.value.includes("hover")&&(ge(t),we(!0,e.mouseEnterDelay))},Se=e=>{null==k||k.onMouseenter(e),Oe(e)},Pe=t=>{var o;null==(o=$.onMouseleave)||o.call($,t),!e.disabled&&z.value.includes("hover")&&we(!1,e.mouseLeaveDelay)},Be=e=>{null==k||k.onMouseleave(e),Pe(e)},Re=t=>{var o;null==(o=$.onFocusin)||o.call($,t),!e.disabled&&z.value.includes("focus")&&we(!0,e.focusDelay)},Te=t=>{var o;null==(o=$.onFocusout)||o.call($,t),!e.disabled&&z.value.includes("focus")&&e.blurToClose&&we(!1)},je=t=>{var o;null==(o=$.onContextmenu)||o.call($,t),e.disabled||!z.value.includes("contextMenu")||ee.value&&!e.clickToClose||(ge(t),we(!ee.value),t.preventDefault())};f(pe,h({onMouseenter:Se,onMouseleave:Be,addChildRef:e=>{W.add(e),null==k||k.addChildRef(e)},removeChildRef:e=>{W.delete(e),null==k||k.removeChildRef(e)}}));const Me=()=>{M(document.documentElement,"mousedown",$e),ve=!1},Fe=ue(x,"content"),xe=s((()=>{var t;return e.hideEmpty&&v(null==(t=Fe.value)?void 0:t.call(Fe))})),$e=e=>{var t,o,l;if(!(null==(t=H.value)?void 0:t.contains(e.target))&&!(null==(o=N.value)?void 0:o.contains(e.target))){for(const t of W)if(null==(l=t.value)?void 0:l.contains(e.target))return;Me(),we(!1)}},Ae=U((()=>{ee.value&&be()})),Ve=()=>{ee.value&&be()},Ee=()=>{Ve(),a("resize")},Le=t=>{e.preventFocus&&t.preventDefault()};null==k||k.addChildRef(N);const ze=s((()=>ee.value?e.openedClass:void 0));let We;g(ee,(t=>{if(e.clickOutsideToClose&&(!t&&ve?Me():t&&!ve&&(b(document.documentElement,"mousedown",$e),ve=!0)),e.updateAtScroll||(null==L?void 0:L.updateAtScroll))if(t){We=ie(H.value);for(const e of We)e.addEventListener("scroll",Ae)}else if(We){for(const e of We)e.removeEventListener("scroll",Ae);We=void 0}t&&(He.value=!0)})),g((()=>[e.autoFitPopupWidth,e.autoFitPopupMinWidth]),(()=>{ee.value&&be()}));const{createResizeObserver:ke,destroyResizeObserver:De}=(({elementRef:e,onResize:t})=>{let o;return{createResizeObserver:()=>{e.value&&(o=new Q((e=>{const o=e[0];l(t)&&t(o)})),o.observe(e.value))},destroyResizeObserver:()=>{o&&(o.disconnect(),o=null)}}})({elementRef:se,onResize:Ve});m((()=>{if(ke(),ee.value&&(be(),e.clickOutsideToClose&&!ve&&(b(document.documentElement,"mousedown",$e),ve=!0),e.updateAtScroll||(null==L?void 0:L.updateAtScroll))){We=ie(H.value);for(const e of We)e.addEventListener("scroll",Ae)}})),o((()=>{ee.value&&be()})),y((()=>{if(null==k||k.removeChildRef(N),De(),ve&&Me(),We){for(const e of We)e.removeEventListener("scroll",Ae);We=void 0}}));const He=t(ee.value),Ne=t(!1),Ie=()=>{Ne.value=!0},qe=()=>{Ne.value=!1,ee.value&&a("show")},Qe=()=>{Ne.value=!1,ee.value||(He.value=!1,a("hide"))};return()=>{var t,o;return D.value=null!=(o=null==(t=x.default)?void 0:t.call(x))?o:[],w(D.value,{class:ze.value,onClick:Ce,onMouseenter:Oe,onMouseleave:Pe,onFocusin:Re,onFocusout:Te,onContextmenu:je}),C(j,null,[e.autoFixPosition?C(q,{onResize:Ee},{default:()=>[D.value]}):D.value,C(O,null,{default:()=>[C(S,{to:le.value,disabled:!e.renderToBody},{default:()=>[(!e.unmountOnClose||ee.value||He.value)&&!xe.value&&C(q,{onResize:Ve},{default:()=>{return[C("div",P({ref:N,class:[`${V}-popup`,`${V}-position-${_.value}`],style:(t=me({},J.value),o={zIndex:ce.value,pointerEvents:Ne.value?"none":"auto"},de(t,fe(o))),"trigger-placement":_.value,onMouseenter:Se,onMouseleave:Be,onMousedown:Le},E.value),[C(B,{name:e.animationName,duration:e.duration,appear:!0,onBeforeEnter:Ie,onAfterEnter:qe,onBeforeLeave:Ie,onAfterLeave:Qe},{default:()=>{var t;return[R(C("div",{class:`${V}-popup-wrapper`,style:Y.value},[C("div",{class:[`${V}-content`,e.contentClass],style:e.contentStyle},[null==(t=x.content)?void 0:t.call(x)]),e.showArrow&&C("div",{ref:K,class:[`${V}-arrow`,e.arrowClass],style:G.value},null)]),[[T,ee.value]])]}})])];var t,o}})]})]})])}}});const Ce=Object.assign(we,{install:(e,t)=>{x(e,t);const o=$(t);e.component(o+we.name,we)}});var Oe=A(a({name:"Popover",components:{Trigger:Ce},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},title:String,content:String,trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"top"},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0},setup(e,{emit:o}){const l=n("popover"),a=t(e.defaultPopupVisible),r=s((()=>{var t;return null!=(t=e.popupVisible)?t:a.value})),i=s((()=>[`${l}-popup-content`,e.contentClass])),u=s((()=>[`${l}-popup-arrow`,e.arrowClass]));return{prefixCls:l,computedPopupVisible:r,contentCls:i,arrowCls:u,handlePopupVisibleChange:e=>{a.value=e,o("update:popupVisible",e),o("popupVisibleChange",e)}}}}),[["render",function(e,t,o,l,a,r){const n=V("trigger");return E(),L(n,{class:N(e.prefixCls),trigger:e.trigger,position:e.position,"popup-visible":e.computedPopupVisible,"popup-offset":10,"content-class":e.contentCls,"content-style":e.contentStyle,"arrow-class":e.arrowCls,"arrow-style":e.arrowStyle,"show-arrow":"","popup-container":e.popupContainer,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:e.handlePopupVisibleChange},{content:z((()=>[W("div",{class:N(`${e.prefixCls}-title`)},[k(e.$slots,"title",{},(()=>[D(H(e.title),1)]))],2),W("div",{class:N(`${e.prefixCls}-content`)},[k(e.$slots,"content",{},(()=>[D(H(e.content),1)]))],2)])),default:z((()=>[k(e.$slots,"default")])),_:3},8,["class","trigger","position","popup-visible","content-class","content-style","arrow-class","arrow-style","popup-container","onPopupVisibleChange"])}]]);const Se=Object.assign(Oe,{install:(e,t)=>{x(e,t);const o=$(t);e.component(o+Oe.name,Oe)}});export{Se as P,Ce as T,J as c,_ as r,U as t,ue as u};
