import{g as e,_ as l,j as a,l as t,k as n,d as u}from"./plugin-vue_export-helper-806773bb.js";import{I as r,b as o,a as s,d as i}from"./index-952d7730.js";import{I as p}from"./index-83b30376.js";import{I as c,u as d}from"./use-size-9fed8212.js";import{u as v,B as f}from"./index-25db428f.js";import{o as m,I as h}from"./use-popup-manager-c09cb0b2.js";import{d as y,c as g,q as b,o as x,a as B,j as k,a8 as $,n as S,a4 as w,t as j,w as I,l as L,m as C,a9 as z,F as O,Q as E}from"./runtime-core.esm-bundler-808dc7a8.js";import{I as F}from"./index-f2c4e0e2.js";import{p as T}from"./pick-c9d12df4.js";var R=l(y({name:"FeedbackIcon",components:{IconLoading:c,IconCheckCircleFill:r,IconExclamationCircleFill:o,IconCloseCircleFill:s},props:{type:{type:String}},setup(l){const a=e("feedback-icon");return{cls:g((()=>[a,`${a}-status-${l.type}`]))}}}),[["render",function(e,l,a,t,n,u){const r=b("icon-loading"),o=b("icon-check-circle-fill"),s=b("icon-exclamation-circle-fill"),i=b("icon-close-circle-fill");return x(),B("span",{class:S(e.cls)},["validating"===e.type?(x(),k(r,{key:0})):"success"===e.type?(x(),k(o,{key:1})):"warning"===e.type?(x(),k(s,{key:2})):"error"===e.type?(x(),k(i,{key:3})):$("v-if",!0)],2)}]]);const V={key:"Enter",code:"Enter"},P={key:"Backspace",code:"Backspace"};var W=Object.defineProperty,A=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,D=(e,l,a)=>l in e?W(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,q=(e,l)=>{for(var a in l||(l={}))M.call(l,a)&&D(e,a,l[a]);if(A)for(var a of A(l))_.call(l,a)&&D(e,a,l[a]);return e},H=y({name:"Input",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},size:{type:String},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},placeholder:String,maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},wordLength:{type:Function},wordSlice:{type:Function},inputAttrs:{type:Object},type:{type:String,default:"text"}},emits:{"update:modelValue":e=>!0,input:(e,l)=>!0,change:(e,l)=>!0,pressEnter:e=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(l,{emit:r,slots:o,attrs:s}){const{size:p,disabled:c,error:f,modelValue:y}=j(l),b=e("input"),x=w(),{mergedSize:B,mergedDisabled:k,mergedError:$,feedback:S,eventHandlers:E}=v({size:p,disabled:c,error:f}),{mergedSize:P}=d(B),[W,A]=function(e){const l=w();return[function(){if(!e.value)return;const{selectionStart:a,selectionEnd:t,value:n}=e.value;if(null==a||null==t)return;const u=n.slice(0,Math.max(0,a)),r=n.slice(Math.max(0,t));l.value={selectionStart:a,selectionEnd:t,value:n,beforeTxt:u,afterTxt:r}},function(){if(!e.value||!l.value)return;const{value:a}=e.value,{beforeTxt:t,afterTxt:n,selectionStart:u}=l.value;if(!t||!n||!u)return;let r=a.length;if(a.endsWith(n))r=a.length-n.length;else if(a.startsWith(t))r=t.length;else{const e=t[u-1],l=a.indexOf(e,u-1);-1!==l&&(r=l+1)}e.value.setSelectionRange(r,r)}]}(x),M=w(l.defaultValue),_=g((()=>{var e;return null!=(e=l.modelValue)?e:M.value}));I(y,(e=>{(a(e)||t(e))&&(M.value="")}));let D=_.value;const H=w(!1),J=g((()=>l.allowClear&&!k.value&&Boolean(_.value))),K=w(!1),N=w(""),Q=e=>{var a;return u(l.wordLength)?l.wordLength(e):null!=(a=e.length)?a:0},G=g((()=>Q(_.value))),U=g((()=>$.value||Boolean(n(l.maxLength)&&l.maxLength.errorOnly&&G.value>Y.value))),X=g((()=>n(l.maxLength)&&Boolean(l.maxLength.errorOnly))),Y=g((()=>n(l.maxLength)?l.maxLength.length:l.maxLength)),Z=e=>{var a,t;Y.value&&!X.value&&Q(e)>Y.value&&(e=null!=(t=null==(a=l.wordSlice)?void 0:a.call(l,e,Y.value))?t:e.slice(0,Y.value)),M.value=e,r("update:modelValue",e)},ee=e=>{x.value&&e.target!==x.value&&(e.preventDefault(),x.value.focus())},le=(e,l)=>{var a,t;e!==D&&(D=e,r("change",e,l),null==(t=null==(a=E.value)?void 0:a.onChange)||t.call(a,l))},ae=e=>{var l,a;H.value=!0,D=_.value,r("focus",e),null==(a=null==(l=E.value)?void 0:l.onFocus)||a.call(l,e)},te=e=>{var l,a;H.value=!1,le(_.value,e),r("blur",e),null==(a=null==(l=E.value)?void 0:l.onBlur)||a.call(l,e)},ne=e=>{var l,a,t;const{value:n,selectionStart:u,selectionEnd:o}=e.target;if("compositionend"===e.type){if(K.value=!1,N.value="",Y.value&&!X.value&&_.value.length>=Y.value&&Q(n)>Y.value&&u===o)return void ue();Z(n),r("input",n,e),null==(a=null==(l=E.value)?void 0:l.onInput)||a.call(l,e),ue()}else K.value=!0,N.value=_.value+(null!=(t=e.data)?t:"")},ue=()=>{W(),O((()=>{x.value&&_.value!==x.value.value&&(x.value.value=_.value,A())}))},re=e=>{var l,a;const{value:t}=e.target;if(!K.value){if(Y.value&&!X.value&&(_.value.length>=Y.value||Q(t)>Y.value)&&"insertText"===e.inputType)return void ue();Z(t),r("input",t,e),null==(a=null==(l=E.value)?void 0:l.onInput)||a.call(l,e),ue()}},oe=e=>{Z(""),le("",e),r("clear",e)},se=e=>{const l=e.key||e.code;K.value||l!==V.key||(le(_.value,e),r("pressEnter",e))},ie=g((()=>[`${b}-outer`,`${b}-outer-size-${P.value}`,{[`${b}-outer-has-suffix`]:Boolean(o.suffix),[`${b}-outer-disabled`]:k.value}])),pe=g((()=>[`${b}-wrapper`,{[`${b}-error`]:U.value,[`${b}-disabled`]:k.value,[`${b}-focus`]:H.value}])),ce=g((()=>[b,`${b}-size-${P.value}`])),de=g((()=>m(s,h))),ve=g((()=>T(s,h))),fe=g((()=>{const e=q(q({},ve.value),l.inputAttrs);return U.value&&(e["aria-invalid"]=!0),e})),me=e=>{var a;return L("span",C({class:pe.value,onMousedown:ee},e?void 0:de.value),[o.prefix&&L("span",{class:`${b}-prefix`},[o.prefix()]),L("input",C(fe.value,{ref:x,class:ce.value,value:_.value,type:l.type,placeholder:l.placeholder,readonly:l.readonly,disabled:k.value,onInput:re,onKeydown:se,onFocus:ae,onBlur:te,onCompositionstart:ne,onCompositionupdate:ne,onCompositionend:ne}),null),J.value&&L(i,{prefix:b,class:`${b}-clear-btn`,onClick:oe},{default:()=>[L(F,null,null)]}),(o.suffix||Boolean(l.maxLength)&&l.showWordLimit||Boolean(S.value))&&L("span",{class:[`${b}-suffix`,{[`${b}-suffix-has-feedback`]:S.value}]},[Boolean(l.maxLength)&&l.showWordLimit&&L("span",{class:`${b}-word-limit`},[G.value,z("/"),Y.value]),null==(a=o.suffix)?void 0:a.call(o),Boolean(S.value)&&L(R,{type:S.value},null)])])};return{inputRef:x,render:()=>o.prepend||o.append?L("span",C({class:ie.value},de.value),[o.prepend&&L("span",{class:`${b}-prepend`},[o.prepend()]),me(!0),o.append&&L("span",{class:`${b}-append`},[o.append()])]):me()}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}}),J=y({name:"InputSearch",props:{searchButton:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String},buttonText:{type:String},buttonProps:{type:Object}},emits:{search:(e,l)=>!0},setup(l,{emit:a,slots:t}){const{size:n}=j(l),u=e("input-search"),{mergedSize:r}=d(n),o=w(),s=e=>{o.value.inputRef&&a("search",o.value.inputRef.value,e)},v=()=>{var e;return L(E,null,[l.loading?L(c,null,null):L(i,{onClick:s},{default:()=>[L(p,null,null)]}),null==(e=t.suffix)?void 0:e.call(t)])},m=()=>{var e;let a={};return a=l.buttonText||t["button-default"]||t["button-icon"]?{default:null!=(e=t["button-default"])?e:l.buttonText?()=>l.buttonText:void 0,icon:t["button-icon"]}:{icon:()=>L(p,null,null)},L(f,C({type:"primary",class:`${u}-btn`,disabled:l.disabled,size:r.value,loading:l.loading},l.buttonProps,{onClick:s}),a)};return{inputRef:o,render:()=>L(H,{ref:o,class:u,size:r.value,disabled:l.disabled},{prepend:t.prepend,prefix:t.prefix,suffix:l.searchButton?t.suffix:v,append:l.searchButton?m:t.append})}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}});export{P as B,V as E,R as F,J as I,H as _};
