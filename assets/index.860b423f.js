import{d as e,g as l,k as a,c as t,_ as o,Y as n,w as u,A as r,x as i,H as s,q as p,b as d,M as v,aT as c,aU as f,C as m,i as b,K as g,h as y,t as h,j as x,V as O,o as S,l as C,r as w,m as V,n as $,y as I,D as k,G as B,a1 as z,a5 as j,aY as P,aZ as R,p as N,a_ as M,J as F,a as T,s as _,v as E,ac as K,u as A,aj as L,ak as D,a2 as H,ab as W,al as G,T as q,a0 as U,W as Y,ai as Z,a$ as J,Z as X,F as Q,am as ee,b0 as le,ap as ae,ao as te,b1 as oe,E as ne,b2 as ue,R as re,S as ie,B as se,as as pe,e as de}from"./index.a5de0260.js";import{u as ve}from"./use-index.44e18381.js";import{R as ce}from"./resize-observer-v2.501e1bb4.js";import{P as fe,T as me}from"./index.8e70a837.js";import{i as be}from"./index.es.c6a35b2f.js";import{I as ge}from"./index.aed55526.js";import{E as ye,F as he,B as xe}from"./input-search.0f52fa10.js";import{p as Oe}from"./pick.47c8be66.js";import{R as Se}from"./resize-observer.89377b16.js";import{E as Ce}from"./index.01f3a160.js";import{S as we}from"./index.e2c79da8.js";import{C as Ve}from"./index.fd8c42f1.js";var $e=o(e({name:"SelectDropdown",components:{Empty:Ce,Spin:we},props:{loading:Boolean,empty:Boolean,virtualList:Boolean,bottomOffset:{type:Number,default:0},onScroll:{type:[Function,Array]},onReachBottom:{type:[Function,Array]}},emits:["scroll","reachBottom"],setup(e,{emit:o,slots:n}){const u=l("select-dropdown"),r=a(),i=t((()=>[u,{[`${u}-has-footer`]:Boolean(n.footer)}]));return{prefixCls:u,cls:i,wrapperRef:r,handleScroll:l=>{const{scrollTop:a,scrollHeight:t,offsetHeight:n}=l.target;t-(a+n)<=e.bottomOffset&&o("reachBottom",l),o("scroll",l)}}}}),[["render",function(e,l,a,t,o,b){const g=n("spin"),y=n("empty");return u(),r("div",{class:s(e.cls)},[e.loading?(u(),i(g,{key:0,class:s(`${e.prefixCls}-loading`)},null,8,["class"])):e.empty?(u(),r("div",{key:1,class:s(`${e.prefixCls}-empty`)},[p(e.$slots,"empty",{},(()=>[d(y)]))],2)):v("v-if",!0),!e.virtualList||e.loading||e.empty?v("v-if",!0):p(e.$slots,"virtual-list",{key:2}),e.virtualList?v("v-if",!0):c((u(),r("div",{key:3,ref:"wrapperRef",class:s(`${e.prefixCls}-list-wrapper`),onScroll:l[0]||(l[0]=(...l)=>e.handleScroll&&e.handleScroll(...l))},[m("ul",{class:s(`${e.prefixCls}-list`)},[p(e.$slots,"default")],2)],34)),[[f,!e.loading&&!e.empty]]),e.$slots.footer&&!e.empty?(u(),r("div",{key:4,class:s(`${e.prefixCls}-footer`)},[p(e.$slots,"footer")],2)):v("v-if",!0)],2)}]]);const Ie=Symbol("ArcoSelectContext");var ke=Object.defineProperty,Be=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Ne=(e,l,a)=>l in e?ke(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,Me=(e,l)=>{for(var a in l||(l={}))Pe.call(l,a)&&Ne(e,a,l[a]);if(je)for(var a of je(l))Re.call(l,a)&&Ne(e,a,l[a]);return e},Fe=(e,l)=>Be(e,ze(l));const Te=e=>b(e)&&"isGroup"in e,_e=(e,l="value")=>String(b(e)?e[l]:e),Ee=(e,l="value")=>b(e)?`__arco__option__object__${e[l]}`:e||g(e)?`__arco__option__${typeof e}-${e}`:"",Ke=(e,{valueKey:l,fieldNames:a,origin:t,index:o=-1})=>{var n;if(b(e)){const u=e[a.value];return{raw:e,index:o,key:Ee(u,l),origin:t,value:u,label:null!=(n=e[a.label])?n:_e(u,l),render:e[a.render],disabled:Boolean(e[a.disabled]),tagProps:e[a.tagProps]}}const u={value:e,label:String(e),disabled:!1};return Me({raw:u,index:o,key:Ee(e,l),origin:t},u)},Ae=(e,{valueKey:l,fieldNames:a,origin:t,optionInfoMap:o})=>{var n;const u=[];for(const i of e)if(b(r=i)&&"isGroup"in r){const e=Ae(null!=(n=i.options)?n:[],{valueKey:l,fieldNames:a,origin:t,optionInfoMap:o});e.length>0&&u.push(Fe(Me({},i),{key:`__arco__group__${i.label}`,options:e}))}else{const e=Ke(i,{valueKey:l,fieldNames:a,origin:t});u.push(e),o.get(e.key)||o.set(e.key,e)}var r;return u},Le=(e,{inputValue:l,filterOption:a})=>{const t=e=>{var o;const n=[];for(const u of e)if(Te(u)){const e=t(null!=(o=u.options)?o:[]);e.length>0&&n.push(Fe(Me({},u),{options:e}))}else De(u,{inputValue:l,filterOption:a})&&n.push(u);return n};return t(e)},De=(e,{inputValue:l,filterOption:a})=>y(a)?!l||a(l,e.raw):!a||e.label.toLowerCase().includes((null!=l?l:"").toLowerCase()),He=(e,l)=>{const a=Object.prototype.toString.call(e);return a===Object.prototype.toString.call(l)&&("[object Object]"===a?((e,l)=>{if(!e||!l)return!1;if(e.length!==l.length)return!1;for(const a of Object.keys(e))if(!He(e[a],l[a]))return!1;return!0})(e,l):"[object Array]"===a?((e,l)=>{if(!e||!l)return!1;const{length:a}=e;if(a!==l.length)return!1;for(let t=0;t<a;t++)if(!He(e[t],l[t]))return!1;return!0})(e,l):"[object Function]"===a?e===l||e.toString()===l.toString():e===l)};var We=o(e({name:"Option",components:{Checkbox:Ve},props:{value:[String,Number,Object],label:String,disabled:Boolean,tagProps:{type:Object},extra:{type:Object},index:{type:Number},internal:Boolean},setup(e){const{disabled:o,tagProps:n,index:u}=h(e),r=l("select-option"),i=x(Ie,void 0),s=$(),p=a(),d=a(n.value);O(n,((e,l)=>{He(e,l)||(d.value=e)}));const v=a(""),c=t((()=>{var l,a;return null!=(a=null!=(l=e.value)?l:e.label)?a:v.value})),f=t((()=>{var l;return null!=(l=e.label)?l:v.value})),m=t((()=>Ee(c.value,null==i?void 0:i.valueKey))),b=t((()=>{var e;return null!=(e=null==i?void 0:i.component)?e:"li"})),g=()=>{var l;if(!e.label&&p.value){const e=null!=(l=p.value.textContent)?l:"";v.value!==e&&(v.value=e)}};S((()=>g())),C((()=>g()));const y=t((()=>{var e;return null!=(e=null==i?void 0:i.valueKeys.includes(m.value))&&e})),I=t((()=>(null==i?void 0:i.activeKey)===m.value));let k=a(!0);if(!e.internal){const e=w({raw:{value:c,label:f,disabled:o,tagProps:d},ref:p,index:u,key:m,origin:"slot",value:c,label:f,disabled:o,tagProps:d});k=t((()=>De(e,{inputValue:null==i?void 0:i.inputValue,filterOption:null==i?void 0:i.filterOption}))),s&&(null==i||i.addSlotOptionInfo(s.uid,e)),V((()=>{s&&(null==i||i.removeSlotOptionInfo(s.uid))}))}const B=t((()=>[r,{[`${r}-disabled`]:e.disabled,[`${r}-active`]:I.value,[`${r}-multiple`]:null==i?void 0:i.multiple}]));return{prefixCls:r,cls:B,selectCtx:i,itemRef:p,component:b,isSelected:y,isValid:k,handleClick:l=>{e.disabled||null==i||i.onSelect(m.value,l)},handleMouseEnter:()=>{e.disabled||null==i||i.setActiveKey(m.value)},handleMouseLeave:()=>{e.disabled||null==i||i.setActiveKey()}}}}),[["render",function(e,l,a,t,o,d){const m=n("checkbox");return c((u(),i(z(e.component),{ref:"itemRef",class:s([e.cls,{[`${e.prefixCls}-has-suffix`]:Boolean(e.$slots.suffix)}]),onClick:e.handleClick,onMouseenter:e.handleMouseEnter,onMouseleave:e.handleMouseLeave},{default:I((()=>[e.$slots.icon?(u(),r("span",{key:0,class:s(`${e.prefixCls}-icon`)},[p(e.$slots,"icon")],2)):v("v-if",!0),e.selectCtx&&e.selectCtx.multiple?(u(),i(m,{key:1,class:s(`${e.prefixCls}-checkbox`),"model-value":e.isSelected,disabled:e.disabled,"uninject-group-context":""},{default:I((()=>[p(e.$slots,"default",{},(()=>[k(B(e.label),1)]))])),_:3},8,["class","model-value","disabled"])):(u(),r("span",{key:2,class:s(`${e.prefixCls}-content`)},[p(e.$slots,"default",{},(()=>[k(B(e.label),1)]))],2)),e.$slots.suffix?(u(),r("span",{key:3,class:s(`${e.prefixCls}-suffix`)},[p(e.$slots,"suffix")],2)):v("v-if",!0)])),_:3},8,["class","onClick","onMouseenter","onMouseleave"])),[[f,e.isValid]])}]]),Ge=Object.defineProperty,qe=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Xe=(e,l,a)=>l in e?Ge(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,Qe=(e,l)=>{for(var a in l||(l={}))Ze.call(l,a)&&Xe(e,a,l[a]);if(Ye)for(var a of Ye(l))Je.call(l,a)&&Xe(e,a,l[a]);return e};const el={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"},ll=({options:e,extraOptions:l,inputValue:o,filterOption:n,showExtraOptions:u,valueKey:r,fieldNames:i})=>{const s=t((()=>Qe(Qe({},el),null==i?void 0:i.value))),p=w(new Map),d=a([]);O(p,(e=>{d.value=Array.from(e.values()).sort(((e,l)=>g(e.index)&&g(l.index)?e.index-l.index:0))}),{deep:!0});const v=t((()=>{var l,a;const t=new Map;return{optionInfos:Ae(null!=(l=null==e?void 0:e.value)?l:[],{valueKey:null!=(a=null==r?void 0:r.value)?a:"value",fieldNames:s.value,origin:"options",optionInfoMap:t}),optionInfoMap:t}})),c=t((()=>{var e,a;const t=new Map;return{optionInfos:Ae(null!=(e=null==l?void 0:l.value)?e:[],{valueKey:null!=(a=null==r?void 0:r.value)?a:"value",fieldNames:s.value,origin:"extraOptions",optionInfoMap:t}),optionInfoMap:t}})),f=w(new Map);O([p,null!=e?e:a([]),null!=l?l:a([]),null!=r?r:a("value")],(()=>{f.clear(),d.value.forEach(((e,l)=>{var a;f.set(e.key,(a=Qe({},e),qe(a,Ue({index:l}))))})),v.value.optionInfoMap.forEach((e=>{f.has(e.key)||(e.index=f.size,f.set(e.key,e))})),c.value.optionInfoMap.forEach((e=>{f.has(e.key)||(e.index=f.size,f.set(e.key,e))}))}),{immediate:!0,deep:!0});const m=t((()=>{var e;const l=Le(v.value.optionInfos,{inputValue:null==o?void 0:o.value,filterOption:null==n?void 0:n.value});return(null==(e=null==u?void 0:u.value)||e)&&l.push(...Le(c.value.optionInfos,{inputValue:null==o?void 0:o.value,filterOption:null==n?void 0:n.value})),l})),b=t((()=>Array.from(f.values()).filter((e=>("extraOptions"!==e.origin||!1!==(null==u?void 0:u.value))&&De(e,{inputValue:null==o?void 0:o.value,filterOption:null==n?void 0:n.value}))))),y=t((()=>b.value.filter((e=>!e.disabled)).map((e=>e.key))));return{validOptions:m,optionInfoMap:f,validOptionInfos:b,enabledOptionKeys:y,getNextSlotOptionIndex:()=>p.size,addSlotOptionInfo:(e,l)=>{p.set(e,l)},removeSlotOptionInfo:e=>{p.delete(e)}}},al=Symbol("ArcoAvatarGroup");var tl=Object.defineProperty,ol=Object.getOwnPropertySymbols,nl=Object.prototype.hasOwnProperty,ul=Object.prototype.propertyIsEnumerable,rl=(e,l,a)=>l in e?tl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,il=(e,l)=>{for(var a in l||(l={}))nl.call(l,a)&&rl(e,a,l[a]);if(ol)for(var a of ol(l))ul.call(l,a)&&rl(e,a,l[a]);return e};const sl=e({name:"Avatar",components:{ResizeObserver:ce},props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0},setup(e,{slots:o,emit:n,attrs:u}){const{shape:r,size:i,autoFixFontSize:s,triggerType:p,triggerIconStyle:d}=h(e),v=l("avatar"),c=x(al,void 0),f=a(),m=a(),b=t((()=>{var e;return null!=(e=null==c?void 0:c.shape)?e:r.value})),y=t((()=>{var e;return null!=(e=null==c?void 0:c.size)?e:i.value})),C=t((()=>{var e;return null!=(e=null==c?void 0:c.autoFixFontSize)?e:s.value})),w=a(!1),V=c?ve({itemRef:f,selector:`.${v}`}).computedIndex:a(-1),$=t((()=>{var e;const l=g(y.value)?{width:`${y.value}px`,height:`${y.value}px`,fontSize:y.value/2+"px"}:{};return c&&(l.zIndex=c.zIndexAscend?V.value+1:c.total-V.value,l.marginLeft=0!==V.value?`-${(null!=(e=y.value)?e:40)/4}px`:"0"),l})),I=pl({triggerIconStyle:null==d?void 0:d.value,inlineStyle:u.style,triggerType:p.value}),k=()=>{w.value||j((()=>{var e;if(!m.value||!f.value)return;const l=m.value.clientWidth,a=null!=(e=y.value)?e:f.value.offsetWidth,t=a/(l+8);a&&t<1&&(m.value.style.transform=`scale(${t}) translateX(-50%)`)}))};S((()=>{var e;(null==(e=m.value)?void 0:e.firstElementChild)&&["IMG","PICTURE"].includes(m.value.firstElementChild.tagName)&&(w.value=!0),C.value&&k()})),O(i,(()=>{C.value&&k()}));const B=t((()=>[v,`${v}-${b.value}`])),z=t((()=>w.value?`${v}-image`:`${v}-text`));return{prefixCls:v,itemRef:f,cls:B,outerStyle:$,wrapperRef:m,wrapperCls:z,computedTriggerIconStyle:I,isImage:w,onClick:e=>{n("click",e)},handleResize:()=>{C.value&&k()}}}}),pl=({triggerType:e,inlineStyle:l={},triggerIconStyle:a={}})=>{let t={};return"button"===e&&(!a||a&&!a.color)&&l&&l.backgroundColor&&(t={color:l.backgroundColor}),il(il({},a),t)};var dl=o(sl,[["render",function(e,l,a,t,o,i){const c=n("resize-observer");return u(),r("div",{ref:"itemRef",style:F(e.outerStyle),class:s([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:Boolean(e.$slots["trigger-icon"])}]),onClick:l[0]||(l[0]=(...l)=>e.onClick&&e.onClick(...l))},[d(c,{onResize:e.handleResize},{default:I((()=>[m("span",{ref:"wrapperRef",class:s(e.wrapperCls)},[p(e.$slots,"default")],2)])),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(u(),r("div",{key:0,class:s(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:F(e.computedTriggerIconStyle)},[p(e.$slots,"trigger-icon")],6)):v("v-if",!0)],6)}]]);const vl=e({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:t}){const{shape:o,size:n,autoFixFontSize:u,zIndexAscend:r}=h(e),i=l("avatar-group"),s=a(0);return N(al,w({shape:o,size:n,autoFixFontSize:u,zIndexAscend:r,total:s})),()=>{var l,a;const o=T(null!=(a=null==(l=t.default)?void 0:l.call(t))?a:[]),n=e.maxCount>0?o.slice(0,e.maxCount):o,u=e.maxCount>0?o.slice(e.maxCount):[];return s.value!==n.length&&(s.value=n.length),d("div",{class:i},[n,u.length>0&&d(fe,e.maxPopoverTriggerProps,{default:()=>[d(dl,{class:`${i}-max-count-avatar`,style:e.maxStyle},{default:()=>[k("+"),u.length]})],content:()=>d("div",null,[u])})])}}}),cl=Object.assign(dl,{Group:vl,install:(e,l)=>{_(e,l);const a=E(l);e.component(a+dl.name,dl),e.component(a+vl.name,vl)}});var fl=e({name:"InputLabel",inheritAttrs:!1,props:{modelValue:Object,inputValue:{type:String,default:""},enabledInput:Boolean,formatLabel:Function,placeholder:String,retainInputValue:Boolean,disabled:Boolean,baseCls:String,size:String,error:Boolean,focused:Boolean,uninjectFormItemContext:Boolean},emits:["update:inputValue","inputValueChange","focus","blur"],setup(e,{attrs:o,emit:n,slots:u}){var r;const{size:i,disabled:s,error:p,inputValue:v,uninjectFormItemContext:c}=h(e),f=null!=(r=e.baseCls)?r:l("input-label"),{mergedSize:m,mergedDisabled:b,mergedError:g,eventHandlers:y}=K({size:i,disabled:s,error:p,uninject:null==c?void 0:c.value}),{mergedSize:x}=A(m),{inputRef:S,_focused:C,computedValue:w,handleInput:V,handleComposition:$,handleFocus:I,handleBlur:k,handleMousedown:B}=(({defaultValue:e,modelValue:l,emit:o,eventName:n="input",updateEventName:u="update:modelValue",eventHandlers:r})=>{var i;const s=a(),p=a(null!=(i=null==e?void 0:e.value)?i:""),d=a(!1),v=a(!1),c=a("");let f;const m=t((()=>{var e;return null!=(e=null==l?void 0:l.value)?e:p.value})),b=(e,l)=>{p.value=e,o(u,e),o(n,e,l)},g=e=>{"input"===n&&m.value!==f&&(f=m.value,o("change",m.value,e))};return O(m,(e=>{s.value&&e!==s.value.value&&(s.value.value=e)})),{inputRef:s,_value:p,_focused:d,isComposition:v,compositionValue:c,computedValue:m,handleInput:e=>{const{value:l}=e.target;v.value||(b(l,e),j((()=>{s.value&&m.value!==s.value.value&&(s.value.value=m.value)})))},handleComposition:e=>{var l;const{value:a}=e.target;"compositionend"===e.type?(v.value=!1,c.value="",b(a,e),j((()=>{s.value&&m.value!==s.value.value&&(s.value.value=m.value)}))):(v.value=!0,c.value=m.value+(null!=(l=e.data)?l:""))},handleFocus:e=>{var l,a;d.value=!0,f=m.value,o("focus",e),null==(a=null==(l=null==r?void 0:r.value)?void 0:l.onFocus)||a.call(l,e)},handleBlur:e=>{var l,a;d.value=!1,o("blur",e),null==(a=null==(l=null==r?void 0:r.value)?void 0:l.onBlur)||a.call(l,e),g(e)},handleKeyDown:e=>{const l=e.key||e.code;v.value||l!==ye.key||(o("pressEnter",e),g(e))},handleMousedown:e=>{s.value&&e.target!==s.value&&(e.preventDefault(),s.value.focus())}}})({modelValue:v,emit:n,eventName:"inputValueChange",updateEventName:"update:inputValue",eventHandlers:y}),z=t((()=>{var l;return null!=(l=e.focused)?l:C.value})),P=t((()=>e.enabledInput&&C.value||!e.modelValue)),R=t((()=>e.enabledInput&&e.modelValue?e.modelValue.label:e.placeholder)),N=t((()=>[f,`${f}-size-${x.value}`,{[`${f}-search`]:e.enabledInput,[`${f}-focus`]:z.value,[`${f}-disabled`]:b.value,[`${f}-error`]:g.value}])),M=t((()=>L(o,D))),F=t((()=>Oe(o,D)));return{inputRef:S,render:()=>{return d("span",H(M.value,{class:N.value,onMousedown:B}),[u.prefix&&d("span",{class:`${f}-prefix`},[u.prefix()]),d("input",H(F.value,{ref:S,class:[`${f}-input`,{[`${f}-input-hidden`]:!P.value}],value:w.value,readonly:!e.enabledInput,placeholder:R.value,disabled:b.value,onInput:V,onFocus:I,onBlur:k,onCompositionstart:$,onCompositionupdate:$,onCompositionend:$}),null),d("span",{class:[`${f}-value`,{[`${f}-value-hidden`]:P.value}]},[e.modelValue?null!=(n=null!=(t=null==(l=u.default)?void 0:l.call(u,{data:e.modelValue}))?t:null==(a=e.formatLabel)?void 0:a.call(e,e.modelValue))?n:null==(o=e.modelValue)?void 0:o.label:null]),u.suffix&&d("span",{class:`${f}-suffix`},[u.suffix()])]);var l,a,t,o,n}}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}}),ml=Object.defineProperty,bl=Object.getOwnPropertySymbols,gl=Object.prototype.hasOwnProperty,yl=Object.prototype.propertyIsEnumerable,hl=(e,l,a)=>l in e?ml(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,xl=(e,l)=>{for(var a in l||(l={}))gl.call(l,a)&&hl(e,a,l[a]);if(bl)for(var a of bl(l))yl.call(l,a)&&hl(e,a,l[a]);return e};const Ol=["red","orangered","orange","gold","lime","green","cyan","blue","arcoblue","purple","pinkpurple","magenta","gray"];var Sl=o(e({name:"Tag",components:{IconHover:W,IconClose:G,IconLoading:q},props:{color:{type:String},size:{type:String},bordered:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,default:!0}},emits:{"update:visible":e=>!0,"update:checked":e=>!0,close:e=>!0,check:(e,l)=>!0},setup(e,{emit:o}){const{size:n}=h(e),u=l("tag"),r=t((()=>e.color&&Ol.includes(e.color))),i=t((()=>e.color&&!Ol.includes(e.color))),s=a(e.defaultVisible),p=a(e.defaultChecked),d=t((()=>{var l;return null!=(l=e.visible)?l:s.value})),v=t((()=>{var l;return!e.checkable||(null!=(l=e.checked)?l:p.value)})),{mergedSize:c}=A(n),f=t((()=>"mini"===c.value?"small":c.value)),m=t((()=>[u,`${u}-size-${f.value}`,{[`${u}-loading`]:e.loading,[`${u}-hide`]:!d.value,[`${u}-${e.color}`]:r.value,[`${u}-bordered`]:e.bordered,[`${u}-checkable`]:e.checkable,[`${u}-checked`]:v.value,[`${u}-custom-color`]:i.value}])),b=t((()=>{if(i.value)return{backgroundColor:e.color}}));return{prefixCls:u,cls:m,style:b,computedVisible:d,computedChecked:v,handleClick:l=>{if(e.checkable){const e=!v.value;p.value=e,o("update:checked",e),o("check",e,l)}},handleClose:e=>{s.value=!1,o("update:visible",!1),o("close",e)}}}}),[["render",function(e,l,a,t,o,c){const f=n("icon-close"),m=n("icon-hover"),b=n("icon-loading");return e.computedVisible?(u(),r("span",{key:0,class:s(e.cls),style:F(e.style),onClick:l[0]||(l[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[e.$slots.icon?(u(),r("span",{key:0,class:s(`${e.prefixCls}-icon`)},[p(e.$slots,"icon")],2)):v("v-if",!0),p(e.$slots,"default"),e.closable?(u(),i(m,{key:1,role:"button","aria-label":"Close",prefix:e.prefixCls,class:s(`${e.prefixCls}-close-btn`),onClick:U(e.handleClose,["stop"])},{default:I((()=>[p(e.$slots,"close-icon",{},(()=>[d(f)]))])),_:3},8,["prefix","class","onClick"])):v("v-if",!0),e.loading?(u(),r("span",{key:2,class:s(`${e.prefixCls}-loading-icon`)},[d(b)],2)):v("v-if",!0)],6)):v("v-if",!0)}]]);const Cl=Object.assign(Sl,{install:(e,l)=>{_(e,l);const a=E(l);e.component(a+Sl.name,Sl)}});var wl=Object.defineProperty,Vl=Object.getOwnPropertySymbols,$l=Object.prototype.hasOwnProperty,Il=Object.prototype.propertyIsEnumerable,kl=(e,l,a)=>l in e?wl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,Bl=(e,l)=>{for(var a in l||(l={}))$l.call(l,a)&&kl(e,a,l[a]);if(Vl)for(var a of Vl(l))Il.call(l,a)&&kl(e,a,l[a]);return e};const zl={value:"value",label:"label",closable:"closable",tagProps:"tagProps"};var jl=e({name:"InputTag",inheritAttrs:!1,props:{modelValue:{type:Array},defaultValue:{type:Array,default:()=>[]},inputValue:String,defaultInputValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},size:{type:String},maxTagCount:{type:Number,default:0},retainInputValue:{type:[Boolean,Object],default:!1},formatTag:{type:Function},uniqueValue:{type:Boolean,default:!1},fieldNames:{type:Object},baseCls:String,focused:Boolean,disabledInput:Boolean,uninjectFormItemContext:Boolean},emits:{"update:modelValue":e=>!0,"update:inputValue":e=>!0,change:(e,l)=>!0,inputValueChange:(e,l)=>!0,pressEnter:(e,l)=>!0,remove:(e,l)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:o,slots:n,attrs:u}){const{size:r,disabled:i,error:s,uninjectFormItemContext:p,modelValue:v}=h(e),c=e.baseCls||l("input-tag"),f=a(),m=a(),{mergedSize:y,mergedDisabled:x,mergedError:C,feedback:V,eventHandlers:$}=K({size:r,disabled:i,error:s,uninject:null==p?void 0:p.value}),{mergedSize:I}=A(y),k=t((()=>Bl(Bl({},zl),e.fieldNames))),B=a(!1),z=a(e.defaultValue),P=a(e.defaultInputValue),R=a(!1),N=a(""),M=t((()=>b(e.retainInputValue)?Bl({create:!1,blur:!1},e.retainInputValue):{create:e.retainInputValue,blur:e.retainInputValue})),F=w({width:"12px"}),T=t((()=>e.focused||B.value)),_=(e,l)=>{P.value=e,o("update:inputValue",e),o("inputValueChange",e,l)},E=e=>{var l;const{value:a}=e.target;"compositionend"===e.type?(R.value=!1,N.value="",_(a,e),j((()=>{f.value&&U.value!==f.value.value&&(f.value.value=U.value)}))):(R.value=!0,N.value=U.value+(null!=(l=e.data)?l:""))},q=t((()=>{var l;return null!=(l=e.modelValue)?l:z.value})),U=t((()=>{var l;return null!=(l=e.inputValue)?l:P.value}));O(v,(e=>{(Y(e)||Z(e))&&(z.value=[])}));const X=e=>{f.value&&e.target!==f.value&&(e.preventDefault(),f.value.focus())},Q=e=>{const{value:l}=e.target;R.value||(_(l,e),j((()=>{f.value&&U.value!==f.value.value&&(f.value.value=U.value)})))},ee=t((()=>((e,l)=>{const a=[];for(const t of e)if(b(t))a.push({raw:t,value:t[l.value],label:t[l.label],closable:t[l.closable],tagProps:t[l.tagProps]});else if(e||g(e)){const e={value:t,label:String(t),closable:!0};a.push(xl({raw:e},e))}return a})(q.value,k.value))),le=t((()=>{if(e.maxTagCount>0){const l=ee.value.length-e.maxTagCount;if(l>0){const a=ee.value.slice(0,e.maxTagCount),t={value:"__arco__more",label:`+${l}...`,closable:!1};return a.push(Bl({raw:t},t)),a}}return ee.value})),ae=(e,l)=>{var a,t;z.value=e,o("update:modelValue",e),o("change",e,l),null==(t=null==(a=$.value)?void 0:a.onChange)||t.call(a,l)},te=(e,l,a)=>{var t;const n=null==(t=q.value)?void 0:t.filter(((e,a)=>a!==l));ae(n,a),o("remove",e,a)},oe=e=>{ae([],e),o("clear",e)},ne=t((()=>!x.value&&!e.readonly&&e.allowClear&&Boolean(q.value.length))),ue=e=>{var l,a;B.value=!0,o("focus",e),null==(a=null==(l=$.value)?void 0:l.onFocus)||a.call(l,e)},re=e=>{var l,a;B.value=!1,!M.value.blur&&U.value&&_("",e),o("blur",e),null==(a=null==(l=$.value)?void 0:l.onBlur)||a.call(l,e)},ie=l=>{const a=l.key||l.code;if(!R.value&&U.value&&a===ye.key&&(l=>{var a;if(U.value){if(l.preventDefault(),e.uniqueValue&&(null==(a=q.value)?void 0:a.includes(U.value)))return void o("pressEnter",U.value,l);const t=q.value.concat(U.value);ae(t,l),o("pressEnter",U.value,l),M.value.create||_("",l)}})(l),!R.value&&le.value.length>0&&!U.value&&a===xe.key){const e=ee.value.length-1;te(ee.value[e].value,e,l)}},se=e=>{F.width=e>12?`${e}px`:"12px"};S((()=>{m.value&&se(m.value.offsetWidth)}));const pe=()=>{m.value&&se(m.value.offsetWidth)};O(U,(e=>{f.value&&!R.value&&e!==f.value.value&&(f.value.value=e)}));const de=t((()=>[c,`${c}-size-${I.value}`,{[`${c}-disabled`]:x.value,[`${c}-disabled-input`]:e.disabledInput,[`${c}-error`]:C.value,[`${c}-focus`]:T.value,[`${c}-readonly`]:e.readonly,[`${c}-has-tag`]:le.value.length>0,[`${c}-has-prefix`]:Boolean(n.prefix),[`${c}-has-suffix`]:Boolean(n.suffix)||ne.value||V.value,[`${c}-has-placeholder`]:!q.value.length}])),ve=t((()=>L(u,D))),ce=t((()=>Oe(u,D)));return{inputRef:f,render:()=>{var l;return d("span",H({class:de.value,onMousedown:X},ve.value),[d(Se,{onResize:pe},{default:()=>[d("span",{ref:m,class:`${c}-mirror`},[le.value.length>0?N.value||U.value:N.value||U.value||e.placeholder])]}),n.prefix&&d("span",{class:`${c}-prefix`},[n.prefix()]),d(J,{tag:"span",name:"input-tag-zoom",class:`${c}-inner`},{default:()=>[le.value.map(((l,a)=>d(Cl,H({key:`tag-${l.value}`,class:`${c}-tag`,closable:!x.value&&!e.readonly&&l.closable,visible:!0},l.tagProps,{onClose:e=>te(l.value,a,e)}),{default:()=>{var a,t,o,u;return[null!=(u=null!=(o=null==(a=n.tag)?void 0:a.call(n,{data:l.raw}))?o:null==(t=e.formatTag)?void 0:t.call(e,l.raw))?u:l.label]}}))),d("input",H(ce.value,{ref:f,key:"input-tag-input",class:`${c}-input`,style:F,placeholder:0===le.value.length?e.placeholder:void 0,disabled:x.value,readonly:e.readonly||e.disabledInput,onInput:Q,onKeydown:ie,onFocus:ue,onBlur:re,onCompositionstart:E,onCompositionupdate:E,onCompositionend:E}),null)]}),ne.value&&d(W,{class:`${c}-clear-btn`,onClick:oe,onMousedown:e=>e.stopPropagation()},{default:()=>[d(G,null,null)]}),(n.suffix||Boolean(V.value))&&d("span",{class:`${c}-suffix`},[null==(l=n.suffix)?void 0:l.call(n),Boolean(V.value)&&d(he,{type:V.value},null)])])}}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}});const Pl=Object.assign(jl,{install:(e,l)=>{_(e,l);const a=E(l);e.component(a+jl.name,jl)}});var Rl=e({name:"SelectView",props:{modelValue:{type:Array,required:!0},inputValue:String,placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},opened:{type:Boolean,default:!1},size:{type:String},bordered:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},allowSearch:{type:Boolean,default:e=>X(e.modelValue)},maxTagCount:{type:Number,default:0},retainInputValue:{type:Boolean,default:!1}},emits:["remove","clear","focus","blur"],setup(e,{emit:o,slots:n}){const{size:u,disabled:r,error:i}=h(e),s=l("select-view"),{feedback:p,eventHandlers:v,mergedDisabled:c,mergedSize:f,mergedError:m}=K({size:u,disabled:r,error:i}),{mergedSize:b}=A(f),{opened:g}=h(e),y=a(),x=t((()=>{var e;return null==(e=y.value)?void 0:e.inputRef})),S=t((()=>0===e.modelValue.length)),C=t((()=>e.allowSearch||e.allowCreate)),w=t((()=>e.allowClear&&!e.disabled&&!S.value)),V=e=>{var l,a;o("focus",e),null==(a=null==(l=v.value)?void 0:l.onFocus)||a.call(l,e)},$=e=>{var l,a;o("blur",e),null==(a=null==(l=v.value)?void 0:l.onBlur)||a.call(l,e)},I=e=>{o("remove",e)},k=e=>{o("clear",e)},B=()=>{return d(Q,null,[w.value&&d(W,{class:`${s}-clear-btn`,onClick:k,onMousedown:e=>e.stopPropagation()},{default:()=>[d(G,null,null)]}),d("span",{class:`${s}-icon`},[e.loading?null!=(a=null==(l=n["loading-icon"])?void 0:l.call(n))?a:d(q,null,null):e.allowSearch&&e.opened?null!=(o=null==(t=n["search-icon"])?void 0:t.call(n))?o:d(ee,null,null):n["arrow-icon"]?n["arrow-icon"]():e.multiple||C.value?d(le,{style:{transform:"rotate(-45deg)"}},null):d(ae,{class:`${s}-arrow-icon`},null)]),Boolean(p.value)&&d(he,{type:p.value},null)]);var l,a,t,o};O(g,(e=>{!e&&x.value&&x.value.isSameNode(document.activeElement)&&x.value.blur()}));const z=t((()=>[`${s}-${e.multiple?"multiple":"single"}`,{[`${s}-opened`]:e.opened,[`${s}-borderless`]:!e.bordered}]));return{inputRef:x,handleFocus:V,handleBlur:$,render:()=>e.multiple?d(Pl,{ref:y,baseCls:s,class:z.value,modelValue:e.modelValue,inputValue:e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:c.value,size:b.value,error:m.value,maxTagCount:e.maxTagCount,disabledInput:!e.allowSearch&&!e.allowCreate,retainInputValue:!0,uninjectFormItemContext:!0,onRemove:I,onFocus:V,onBlur:$},{prefix:n.prefix,suffix:B,tag:n.label}):d(fl,{ref:y,baseCls:s,class:z.value,modelValue:e.modelValue[0],inputValue:e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:c.value,size:b.value,error:m.value,enabledInput:C.value,uninjectFormItemContext:!0,onFocus:V,onBlur:$},{default:n.label,prefix:n.prefix,suffix:B})}},methods:{focus(){this.inputRef&&this.inputRef.focus()},blur(){this.inputRef&&this.inputRef.blur()}},render(){return this.render()}});const Nl="undefined"==typeof window?global:window;const Ml=({popupVisible:e,defaultPopupVisible:l,emit:o})=>{var n;const u=a(null!=(n=null==l?void 0:l.value)&&n),r=t((()=>{var l;return null!=(l=null==e?void 0:e.value)?l:u.value}));return O(r,(e=>{u.value!==e&&(u.value=e)})),{computedPopupVisible:r,handlePopupVisibleChange:e=>{e!==r.value&&(u.value=e,o("update:popupVisible",e),o("popupVisibleChange",e))}}};be.enableBoundaryChecking(!1);var Fl=e({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:Infinity},min:{type:Number,default:-Infinity},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"},readOnly:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:(e,l)=>!0,focus:e=>!0,blur:e=>!0,clear:e=>!0,input:(e,l,a)=>!0},setup(e,{emit:o,slots:n}){var u;const{size:r,disabled:i}=h(e),s=l("input-number"),p=a(),{mergedSize:v,mergedDisabled:c,eventHandlers:f}=K({size:r,disabled:i}),{mergedSize:m}=A(v),b=t((()=>{if(g(e.precision)){const l=`${e.step}`.split(".")[1],a=l&&l.length||0;return Math.max(a,e.precision)}})),y=l=>{var a,t;if(!g(l))return"";const o=b.value?l.toFixed(b.value):String(l);return null!=(t=null==(a=e.formatter)?void 0:a.call(e,o))?t:o},x=a(y(null!=(u=e.modelValue)?u:e.defaultValue)),S=t((()=>{var l,a;if(!x.value)return;const t=Number(null!=(a=null==(l=e.parser)?void 0:l.call(e,x.value))?a:x.value);return Number.isNaN(t)?void 0:t})),C=a(g(S.value)&&S.value<=e.min),w=a(g(S.value)&&S.value>=e.max);let V=0;const $=()=>{V&&(window.clearTimeout(V),V=0)},I=l=>{if(!Y(l))return g(e.min)&&l<e.min&&(l=e.min),g(e.max)&&l>e.max&&(l=e.max),g(b.value)?be.round(l,b.value):l},k=l=>{let a=!1,t=!1;g(l)&&(l<=e.min&&(a=!0),l>=e.max&&(t=!0)),w.value!==t&&(w.value=t),C.value!==a&&(C.value=a)},B=(l,a)=>{if(c.value||"plus"===l&&w.value||"minus"===l&&C.value)return;let t;t=g(S.value)?I(be[l](S.value,e.step)):-Infinity===e.min?0:e.min,x.value=y(t),k(t),o("update:modelValue",t),o("change",t,a)},z=(e,l,a=!1)=>{var t;e.preventDefault(),null==(t=p.value)||t.focus(),B(l,e),a&&(V=window.setTimeout((()=>e.target.dispatchEvent(e)),150))},j=(l,a)=>{var t,n,u,r;l=l.trim().replace(/。/g,"."),l=null!=(n=null==(t=e.parser)?void 0:t.call(e,l))?n:l,(g(Number(l))||/^(\.|-)$/.test(l))&&(x.value=null!=(r=null==(u=e.formatter)?void 0:u.call(e,l))?r:l,k(S.value),"input"===e.modelEvent&&o("update:modelValue",S.value),o("input",S.value,x.value,a))},N=e=>{o("focus",e)},M=(e,l)=>{const a=I(S.value),t=y(a);a===S.value&&x.value===t||(x.value=t,k(a)),o("update:modelValue",a),o("change",a,l)},F=e=>{o("blur",e)},T=e=>{var l,a;x.value="",o("update:modelValue",void 0),o("change",void 0,e),null==(a=null==(l=f.value)?void 0:l.onChange)||a.call(l,e),o("clear",e)},_=P(new Map([[R.ARROW_UP,l=>{l.preventDefault(),!e.readOnly&&B("plus",l)}],[R.ARROW_DOWN,l=>{l.preventDefault(),!e.readOnly&&B("minus",l)}]]));O((()=>e.modelValue),(e=>{e!==S.value&&(x.value=y(e),k(e))}));const E=()=>{var l;return e.readOnly?null:d(Q,null,[null==(l=n.suffix)?void 0:l.call(n),d("div",{class:`${s}-step`},[d("button",{class:[`${s}-step-button`,{[`${s}-step-button-disabled`]:c.value||w.value}],type:"button",tabindex:"-1",disabled:c.value||w.value,onMousedown:e=>z(e,"plus",!0),onMouseup:$,onMouseleave:$},[d(te,null,null)]),d("button",{class:[`${s}-step-button`,{[`${s}-step-button-disabled`]:c.value||C.value}],type:"button",tabindex:"-1",disabled:c.value||C.value,onMousedown:e=>z(e,"minus",!0),onMouseup:$,onMouseleave:$},[d(ae,null,null)])])])},L=t((()=>[s,`${s}-mode-${e.mode}`,`${s}-size-${m.value}`,{[`${s}-readonly`]:e.readOnly}])),D=()=>d(ne,{size:m.value,tabindex:"-1",class:`${s}-step-button`,disabled:c.value||C.value,onMousedown:e=>z(e,"minus",!0),onMouseup:$,onMouseleave:$},{icon:()=>d(oe,null,null)}),H=()=>d(ne,{size:m.value,tabindex:"-1",class:`${s}-step-button`,disabled:c.value||w.value,onMousedown:e=>z(e,"plus",!0),onMouseup:$,onMouseleave:$},{icon:()=>d(ue,null,null)});return{inputRef:p,render:()=>{const l="embed"===e.mode?{prepend:n.prepend,prefix:n.prefix,suffix:e.hideButton?n.suffix:E,append:n.append}:{prepend:D,prefix:n.prefix,suffix:n.suffix,append:H};return d(ge,{key:`__arco__${e.mode}`,ref:p,class:L.value,type:"text",allowClear:e.allowClear,size:m.value,modelValue:x.value,placeholder:e.placeholder,disabled:c.value,readonly:e.readOnly,error:e.error,inputAttrs:{role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":x.value},onInput:j,onFocus:N,onBlur:F,onClear:T,onChange:M,onKeydown:_},l)}}},methods:{focus(){var e;null==(e=this.inputRef)||e.focus()},blur(){var e;null==(e=this.inputRef)||e.blur()}},render(){return this.render()}});const Tl=Object.assign(Fl,{install:(e,l)=>{_(e,l);const a=E(l);e.component(a+Fl.name,Fl)}});var _l=o(e({name:"Optgroup",props:{label:{type:String}},setup:()=>({prefixCls:l("select-group")})}),[["render",function(e,l,a,t,o,n){return u(),r(Q,null,[m("li",{class:s(`${e.prefixCls}-title`)},[p(e.$slots,"label",{},(()=>[k(B(e.label),1)]))],2),p(e.$slots,"default")],64)}]]);const El=({dataKeys:e,contentRef:l,fixedSize:o,estimatedSize:n,buffer:u})=>{const r=a(0),i=new Map,s=t((()=>e.value.length)),p=a(0),d=t((()=>{const e=p.value+3*u.value;return e>s.value?s.value:e})),v=t((()=>{const e=s.value-3*u.value;return e<0?0:e})),c=a(o.value),f=t((()=>30!==n.value?n.value:r.value||n.value)),m=l=>{var a;if(c.value)return f.value;const t=e.value[l];return null!=(a=i.get(t))?a:f.value};S((()=>{const e=Array.from(i.values()).reduce(((e,l)=>e+l),0);e>0&&(r.value=e/i.size)}));const b=(e,l)=>{let a=0;for(let t=e;t<l;t++)a+=m(t);return a},g=t((()=>c.value?f.value*p.value:b(0,p.value))),y=t((()=>c.value?f.value*(s.value-d.value):b(d.value,s.value)));return{frontPadding:g,behindPadding:y,start:p,end:d,getStartByScroll:e=>{const l=(e=>{const l=e>=g.value;let a=Math.abs(e-g.value);const t=l?p.value:p.value-1;let o=0;for(;a>0;)a-=m(t+o),l?o++:o--;return o})(e),a=p.value+l-u.value;return a<0?0:a>v.value?v.value:a},setItemSize:(e,l)=>{i.set(e,l)},hasItemSize:e=>i.has(e),setStart:e=>{e<0?p.value=0:e>v.value?p.value=v.value:p.value=e},getScrollOffset:e=>c.value?f.value*e:b(0,e)}};var Kl=e({name:"VirtualListItem",props:{hasItemSize:{type:Function,required:!0},setItemSize:{type:Function,required:!0}},setup(e,{slots:l}){var t;const o=null==(t=$())?void 0:t.vnode.key,n=a();return S((()=>(()=>{var l,a;const t=null!=(a=null==(l=n.value)?void 0:l.$el)?a:n.value;!e.hasItemSize(o)&&(null==t?void 0:t.offsetHeight)&&e.setItemSize(o,t.offsetHeight)})())),()=>{var e;const a=re(null==(e=l.default)?void 0:e.call(l));return a?ie(a,{ref:n},!0):null}}}),Al=Object.defineProperty,Ll=Object.getOwnPropertySymbols,Dl=Object.prototype.hasOwnProperty,Hl=Object.prototype.propertyIsEnumerable,Wl=(e,l,a)=>l in e?Al(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a;var Gl=o(e({name:"VirtualList",components:{VirtualListItem:Kl},props:{height:{type:[Number,String],default:200},data:{type:Array,default:()=>[]},itemKey:{type:String,default:"key"},fixedSize:{type:Boolean,default:!1},estimatedSize:{type:Number,default:30},buffer:{type:Number,default:10},component:{type:[String,Object],default:"div"},listAttrs:{type:Object},contentAttrs:{type:Object},paddingPosition:{type:String,default:"content"}},emits:{scroll:e=>!0,reachBottom:e=>!0},setup(e,{emit:o}){const{data:n,itemKey:u,fixedSize:r,estimatedSize:i,buffer:s,height:p}=h(e),d=l("virtual-list"),v=t((()=>b(e.component)?((e,l)=>{for(var a in l||(l={}))Dl.call(l,a)&&Wl(e,a,l[a]);if(Ll)for(var a of Ll(l))Hl.call(l,a)&&Wl(e,a,l[a]);return e})({container:"div",list:"div",content:"div"},e.component):{container:e.component,list:"div",content:"div"})),c=a(),f=a(),m=t((()=>({height:g(p.value)?`${p.value}px`:p.value,overflow:"auto"}))),y=t((()=>n.value.map(((e,l)=>{var a;return null!=(a=e[u.value])?a:l})))),{frontPadding:x,behindPadding:O,start:S,end:C,getStartByScroll:w,setItemSize:V,hasItemSize:$,setStart:I,getScrollOffset:k}=El({dataKeys:y,contentRef:f,fixedSize:r,estimatedSize:i,buffer:s}),B=t((()=>n.value.slice(S.value,C.value)));return{prefixCls:d,containerRef:c,contentRef:f,frontPadding:x,currentList:B,behindPadding:O,onScroll:e=>{const{scrollTop:l,scrollHeight:a,offsetHeight:t}=e.target,n=w(l);n!==S.value&&I(n),o("scroll",e);Math.floor(a-(l+t))<=0&&o("reachBottom",e)},setItemSize:V,hasItemSize:$,start:S,scrollTo:e=>{var l,a;if(c.value)if(g(e))c.value.scrollTop=e;else{const t=null!=(a=e.index)?a:y.value.indexOf(null!=(l=e.key)?l:"");I(t-s.value),c.value.scrollTop=k(t),j((()=>{if(c.value){const e=k(t);e!==c.value.scrollTop&&(c.value.scrollTop=e)}}))}},style:m,mergedComponent:v}}}),[["render",function(e,l,a,t,o,d){const v=n("VirtualListItem");return u(),i(z(e.mergedComponent.container),{ref:"containerRef",class:s(e.prefixCls),style:F(e.style),onScroll:e.onScroll},{default:I((()=>[(u(),i(z(e.mergedComponent.list),H(e.listAttrs,{style:"list"===e.paddingPosition?{paddingTop:`${e.frontPadding}px`,paddingBottom:`${e.behindPadding}px`}:{}}),{default:I((()=>[(u(),i(z(e.mergedComponent.content),H({ref:"contentRef"},e.contentAttrs,{style:"content"===e.paddingPosition?{paddingTop:`${e.frontPadding}px`,paddingBottom:`${e.behindPadding}px`}:{}}),{default:I((()=>[(u(!0),r(Q,null,se(e.currentList,((l,a)=>{var t;return u(),i(v,{key:null!=(t=l[e.itemKey])?t:a,"has-item-size":e.hasItemSize,"set-item-size":e.setItemSize},{default:I((()=>[p(e.$slots,"item",{item:l,index:e.start+a})])),_:2},1032,["has-item-size","set-item-size"])})),128))])),_:3},16,["style"]))])),_:3},16,["style"]))])),_:3},8,["class","style","onScroll"])}]]),ql=Object.defineProperty,Ul=Object.defineProperties,Yl=Object.getOwnPropertyDescriptors,Zl=Object.getOwnPropertySymbols,Jl=Object.prototype.hasOwnProperty,Xl=Object.prototype.propertyIsEnumerable,Ql=(e,l,a)=>l in e?ql(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,ea=(e,l)=>{for(var a in l||(l={}))Jl.call(l,a)&&Ql(e,a,l[a]);if(Zl)for(var a of Zl(l))Xl.call(l,a)&&Ql(e,a,l[a]);return e};const la={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"};var aa=e({name:"Select",components:{Trigger:me,SelectView:Rl},inheritAttrs:!1,props:{multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:e=>Y(e.multiple)?"":[]},inputValue:{type:String},defaultInputValue:{type:String,default:""},size:{type:String},placeholder:String,loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowSearch:{type:[Boolean,Object],default:e=>Boolean(e.multiple)},allowCreate:{type:Boolean,default:!1},maxTagCount:{type:Number,default:0},popupContainer:{type:[String,Object]},bordered:{type:Boolean,default:!0},defaultActiveFirstOption:{type:Boolean,default:!0},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},unmountOnClose:{type:Boolean,default:!1},filterOption:{type:[Boolean,Function],default:!0},options:{type:Array,default:()=>[]},virtualListProps:{type:Object},triggerProps:{type:Object},formatLabel:{type:Function},fallbackOption:{type:[Boolean,Function],default:!0},showExtraOptions:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},searchDelay:{type:Number,default:500},limit:{type:Number,default:0},fieldNames:{type:Object}},emits:{"update:modelValue":e=>!0,"update:inputValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,popupVisibleChange:e=>!0,clear:e=>!0,remove:e=>!0,search:e=>!0,dropdownScroll:e=>!0,dropdownReachBottom:e=>!0,exceedLimit:(e,l)=>!0},setup(e,{slots:o,emit:n,attrs:u}){const{size:r,disabled:i,error:s,options:p,filterOption:v,valueKey:c,multiple:f,popupVisible:m,showExtraOptions:x,modelValue:S,fieldNames:C,loading:V}=h(e),$=l("select"),{mergedSize:I,mergedDisabled:k,mergedError:B,eventHandlers:z}=K({size:r,disabled:i,error:s}),F=t((()=>e.virtualListProps?"div":"li")),T=t((()=>b(e.allowSearch)&&Boolean(e.allowSearch.retainInputValue)));t((()=>{if(y(e.formatLabel))return l=>{const a=ce.get(l.value);return e.formatLabel(a)}}));const _=a(),E=a({}),A=a(),{computedPopupVisible:L,handlePopupVisibleChange:D}=Ml({popupVisible:m,emit:n}),W=a(e.defaultValue),G=t((()=>{var l;const a=null!=(l=e.modelValue)?l:W.value;return(X(a)?a:a||g(a)?[a]:[]).map((l=>({value:l,key:Ee(l,e.valueKey)})))}));O(S,(e=>{(Y(e)||Z(e))&&(W.value=f.value?[]:"")}));const q=t((()=>G.value.map((e=>e.key)))),U=t((()=>ea(ea({},la),null==C?void 0:C.value))),J=a([]),Q=t((()=>J.value.map((l=>{return a=l.value,y(e.fallbackOption)?e.fallbackOption(a):{[U.value.value]:a,[U.value.label]:String(b(a)?a[null==c?void 0:c.value]:a)};var a}))));j((()=>{pe((()=>{var l;const a=(()=>{const l=[],a=[];if(e.allowCreate||e.fallbackOption)for(const e of G.value)if(!a.includes(e.key)){const t=ce.get(e.key);t&&"extraOptions"!==t.origin||(l.push(e),a.push(e.key))}if(e.allowCreate&&le.value){const e=Ee(le.value);if(!a.includes(e)){const a=ce.get(e);a&&"extraOptions"!==a.origin||l.push({value:le.value,key:e})}}return l})();if(a.length!==J.value.length)J.value=a;else if(a.length>0)for(let e=0;e<a.length;e++)if(a[e].key!==(null==(l=J.value[e])?void 0:l.key)){J.value=a;break}}))}));const ee=a(""),le=t((()=>{var l;return null!=(l=e.inputValue)?l:ee.value}));O(L,(e=>{e||T.value||!le.value||te("")}));const ae=l=>{var a,t;const o=(l=>{var a,t;return e.multiple?l.map((e=>{var l,a;return null!=(a=null==(l=ce.get(e))?void 0:l.value)?a:""})):null!=(t=null==(a=ce.get(l[0]))?void 0:a.value)?t:""})(l);W.value=o,n("update:modelValue",o),n("change",o),null==(t=null==(a=z.value)?void 0:a.onChange)||t.call(a)},te=e=>{ee.value=e,n("update:inputValue",e),n("inputValueChange",e)},oe=function(e,l){let a=0;return(...t)=>{a&&Nl.clearTimeout(a),a=Nl.setTimeout((()=>{a=0,e(...t)}),l)}}((e=>{n("search",e)}),e.searchDelay),ne=l=>{l!==le.value&&(L.value||D(!0),te(l),e.allowSearch&&oe(l))},ue=e=>{const l=ce.get(e),a=q.value.filter((l=>l!==e));ae(a),n("remove",null==l?void 0:l.value)},re=e=>{null==e||e.stopPropagation();const l=q.value.filter((e=>{var l;return null==(l=ce.get(e))?void 0:l.disabled}));ae(l),te(""),n("clear",e)},ie=e=>{n("dropdownScroll",e)},se=e=>{n("dropdownReachBottom",e)},{validOptions:ve,optionInfoMap:ce,validOptionInfos:fe,enabledOptionKeys:be,handleKeyDown:ge}=(({multiple:e,options:l,extraOptions:t,inputValue:o,filterOption:n,showExtraOptions:u,component:r,valueKey:i,fieldNames:s,loading:p,popupVisible:d,valueKeys:v,dropdownRef:c,optionRefs:f,virtualListRef:m,onSelect:b,onPopupVisibleChange:g})=>{const{validOptions:y,optionInfoMap:h,validOptionInfos:x,enabledOptionKeys:S,getNextSlotOptionIndex:C,addSlotOptionInfo:V,removeSlotOptionInfo:$}=ll({options:l,extraOptions:t,inputValue:o,filterOption:n,showExtraOptions:u,valueKey:i,fieldNames:s}),I=a();O(S,(e=>{I.value&&e.includes(I.value)||(I.value=e[0])}));const k=e=>{I.value=e},B=e=>{const l=S.value.length;if(0===l)return;if(!I.value)return"down"===e?S.value[0]:S.value[l-1];const a=(l+S.value.indexOf(I.value)+("up"===e?-1:1))%l;return S.value[a]},z=e=>{var l,a,t;(null==m?void 0:m.value)&&m.value.scrollTo({key:e});const o=h.get(e),n=null==(a=null==(l=null==c?void 0:c.value)?void 0:l.$refs)?void 0:a.wrapperRef,u=null!=(t=null==f?void 0:f.value[e])?t:null==o?void 0:o.ref;if(!n||!u)return;if(n.scrollHeight===n.offsetHeight)return;const r=M(u,n),i=n.scrollTop;r.top<0?n.scrollTo(0,i+r.top):r.bottom<0&&n.scrollTo(0,i-r.bottom)};O(d,(e=>{if(e){const e=v.value[v.value.length-1],l=S.value.includes(e)?e:S.value[0];l!==I.value&&(I.value=l),j((()=>{I.value&&z(I.value)}))}}));const F=P(new Map([[R.ENTER,e=>{(null==p?void 0:p.value)||(d.value?I.value&&b(I.value,e):g(!0)),e.preventDefault()}],[R.ESC,e=>{g(!1),e.preventDefault()}],[R.ARROW_DOWN,e=>{const l=B("down");l&&(I.value=l,z(l)),e.preventDefault()}],[R.ARROW_UP,e=>{const l=B("up");l&&(I.value=l,z(l)),e.preventDefault()}]]));return N(Ie,w({multiple:e,valueKey:i,inputValue:o,filterOption:n,component:r,valueKeys:v,activeKey:I,setActiveKey:k,onSelect:b,getNextSlotOptionIndex:C,addSlotOptionInfo:V,removeSlotOptionInfo:$})),{validOptions:y,optionInfoMap:h,validOptionInfos:x,enabledOptionKeys:S,activeKey:I,setActiveKey:k,addSlotOptionInfo:V,removeSlotOptionInfo:$,getNextActiveKey:B,scrollIntoView:z,handleKeyDown:F}})({multiple:f,options:p,extraOptions:Q,inputValue:le,filterOption:v,showExtraOptions:x,component:F,valueKey:c,fieldNames:C,loading:V,popupVisible:L,valueKeys:q,dropdownRef:_,optionRefs:E,virtualListRef:A,onSelect:(l,a)=>{if(e.multiple){if(q.value.includes(l)){const e=q.value.filter((e=>e!==l));ae(e)}else if(be.value.includes(l))if(e.limit>0&&q.value.length>=e.limit){const e=ce.get(l);n("exceedLimit",null==e?void 0:e.value,a)}else{const e=q.value.concat(l);ae(e)}T.value||te("")}else{if(l!==q.value[0]&&ae([l]),T.value){const e=ce.get(l);e&&te(e.label)}D(!1)}},onPopupVisibleChange:D}),ye=t((()=>{var e;const l=[];for(const o of G.value){const n=ce.get(o.key);n&&l.push((a=ea({},n),t={value:o.key,label:null!=(e=null==n?void 0:n.label)?e:String(b(o.value)?o.value[null==c?void 0:c.value]:o.value),closable:!(null==n?void 0:n.disabled),tagProps:null==n?void 0:n.tagProps},Ul(a,Yl(t))))}var a,t;return l})),he=e=>{if(y(o.option)){const l=o.option;return()=>l({data:e})}return y(e.render)?e.render:()=>e.label},xe=e=>{if(Te(e)){let a;return d(_l,{key:e.key,label:e.label},"function"==typeof(l=a=e.options.map((e=>xe(e))))||"[object Object]"===Object.prototype.toString.call(l)&&!de(l)?a:{default:()=>[a]})}var l;return De(e,{inputValue:le.value,filterOption:null==v?void 0:v.value})?d(We,{ref:l=>{(null==l?void 0:l.$el)&&(E.value[e.key]=l.$el)},key:e.key,value:e.value,label:e.label,disabled:e.disabled,internal:!0},{default:he(e)}):null},Oe=()=>d($e,{ref:_,loading:e.loading,empty:0===fe.value.length,virtualList:Boolean(e.virtualListProps),onScroll:ie,onReachBottom:se},{default:()=>{var e,l;return[...null!=(l=null==(e=o.default)?void 0:e.call(o))?l:[],...ve.value.map(xe)]},"virtual-list":()=>d(Gl,H(e.virtualListProps,{ref:A,data:ve.value}),{item:({item:e})=>xe(e)}),empty:o.empty,footer:o.footer}),Se=({data:l})=>{var a,t,n;if(o.label||y(e.formatLabel)){const u=ce.get(l.value);if(null==u?void 0:u.raw)return null!=(n=null==(a=o.label)?void 0:a.call(o,{data:u.raw}))?n:null==(t=e.formatLabel)?void 0:t.call(e,u.raw)}return l.label};return()=>d(me,H({trigger:"click",position:"bl",popupOffset:4,animationName:"slide-dynamic-origin",hideEmpty:!0,preventFocus:!0,autoFitPopupWidth:!0,autoFitTransformOrigin:!0,disabled:k.value,popupVisible:L.value,unmountOnClose:e.unmountOnClose,clickToClose:!(e.allowSearch||e.allowCreate),popupContainer:e.popupContainer,onPopupVisibleChange:D},e.triggerProps),{default:()=>{var l,a;return[null!=(a=null==(l=o.trigger)?void 0:l.call(o))?a:d(Rl,H({class:$,modelValue:ye.value,inputValue:le.value,multiple:e.multiple,disabled:k.value,error:B.value,loading:e.loading,allowClear:e.allowClear,allowCreate:e.allowCreate,allowSearch:Boolean(e.allowSearch),opened:L.value,maxTagCount:e.maxTagCount,placeholder:e.placeholder,bordered:e.bordered,size:I.value,onInputValueChange:ne,onRemove:ue,onClear:re,onKeydown:ge},u),{label:Se,prefix:o.prefix,"arrow-icon":o["arrow-icon"],"loading-icon":o["loading-icon"],"search-icon":o["search-icon"]})]},content:Oe})}});const ta=Object.assign(aa,{Option:We,OptGroup:_l,install:(e,l)=>{_(e,l);const a=E(l);e.component(a+aa.name,aa),e.component(a+We.name,We),e.component(a+_l.name,_l)}});export{cl as A,Tl as I,ta as S,Gl as V,Ml as u};
