import{Z as e,k as t,o,l,ap as a,d as r,V as n,m as s,h as i,t as u,g as c,c as p,al as d,j as f,O as h,aq as v,ar as m,p as g,r as b,as as y,at as w,au as O,av as C,b as R,aw as B,ax as T,a4 as M,a5 as P,ay as S,az as F,F as j,a7 as E,aA as x,s as A,v as L}from"./index.e00e4771.js";import{i as z}from"./ResizeObserver.es.c7f27d01.js";const $="undefined"==typeof window?global:window,W=$.requestAnimationFrame,k=$.cancelAnimationFrame;var D=Object.defineProperty,V=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,I=(e,t,o)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,q=(e,t)=>{for(var o in t||(t={}))H.call(t,o)&&I(e,o,t[o]);if(V)for(var o of V(t))N.call(t,o)&&I(e,o,t[o]);return e};const U=(e,t)=>{var o,l;const a=e.getBoundingClientRect();return{top:a.top,bottom:a.bottom,left:a.left,right:a.right,scrollTop:a.top-t.top,scrollBottom:a.bottom-t.top,scrollLeft:a.left-t.left,scrollRight:a.right-t.left,width:null!=(o=e.offsetWidth)?o:e.clientWidth,height:null!=(l=e.offsetHeight)?l:e.clientHeight}},X=(e,t)=>{switch(t){case"top":switch(e){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return e}case"bottom":switch(e){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return e}case"left":switch(e){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return e}case"right":switch(e){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return e}default:return e}},Y=(e,t,{containerRect:o,triggerRect:l,popupRect:a,offset:r,translate:n})=>{const s=(e=>{switch(e){case"top":case"tl":case"tr":default:return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right"}})(e),i={width:document.documentElement.clientWidth||window.innerWidth,height:document.documentElement.clientHeight||window.innerHeight},u=o.top+t.top,c=i.height-(o.top+t.top+a.height),p=o.left+t.left,d=i.width-(o.left+t.left+a.width);let f=e;if("top"===s&&u<0)if(l.top>a.height)t.top=-o.top;else{const s=Z("bottom",l,a,{offset:r,translate:n});i.height-(o.top+s.top+a.height)>0&&(f=X(e,"bottom"),t.top=s.top)}if("bottom"===s&&c<0)if(i.height-l.bottom>a.height)t.top=-o.top+(i.height-a.height);else{const s=Z("top",l,a,{offset:r,translate:n});o.top+s.top>0&&(f=X(e,"top"),t.top=s.top)}if("left"===s&&p<0)if(l.left>a.width)t.left=-o.left;else{const s=Z("right",l,a,{offset:r,translate:n});i.width-(o.left+s.left+a.width)>0&&(f=X(e,"right"),t.left=s.left)}if("right"===s&&d<0)if(i.width-l.right>a.width)t.left=-o.left+(i.width-a.width);else{const s=Z("left",l,a,{offset:r,translate:n});o.left+s.left>0&&(f=X(e,"left"),t.left=s.left)}return"top"!==s&&"bottom"!==s||(p<0?t.left=-o.left:d<0&&(t.left=-o.left+(i.width-a.width))),"left"!==s&&"right"!==s||(u<0?t.top=-o.top:c<0&&(t.top=-o.top+(i.height-a.height))),{popupPosition:t,position:f}},Z=(t,o,l,{offset:a=0,translate:r=[0,0]}={})=>{var n;const s=null!=(n=e(r)?r:r[t])?n:[0,0];switch(t){case"top":return{left:o.scrollLeft+Math.round(o.width/2)-Math.round(l.width/2)+s[0],top:o.scrollTop-l.height-a+s[1]};case"tl":return{left:o.scrollLeft+s[0],top:o.scrollTop-l.height-a+s[1]};case"tr":return{left:o.scrollRight-l.width+s[0],top:o.scrollTop-l.height-a+s[1]};case"bottom":return{left:o.scrollLeft+Math.round(o.width/2)-Math.round(l.width/2)+s[0],top:o.scrollBottom+a+s[1]};case"bl":return{left:o.scrollLeft+s[0],top:o.scrollBottom+a+s[1]};case"br":return{left:o.scrollRight-l.width+s[0],top:o.scrollBottom+a+s[1]};case"left":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollTop+Math.round(o.height/2)-Math.round(l.height/2)+s[1]};case"lt":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollTop+s[1]};case"lb":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollBottom-l.height+s[1]};case"right":return{left:o.scrollRight+a+s[0],top:o.scrollTop+Math.round(o.height/2)-Math.round(l.height/2)+s[1]};case"rt":return{left:o.scrollRight+a+s[0],top:o.scrollTop+s[1]};case"rb":return{left:o.scrollRight+a+s[0],top:o.scrollBottom-l.height+s[1]};default:return{left:0,top:0}}},G=e=>{let t="0";["top","bottom"].includes(e)?t="50%":["left","lt","lb","tr","br"].includes(e)&&(t="100%");let o="0";return["left","right"].includes(e)?o="50%":["top","tl","tr","lt","rt"].includes(e)&&(o="100%"),`${t} ${o}`},J=e=>e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth,K=e=>{var t;const o=[];let l=e;for(;l&&l!==document.documentElement;)J(l)&&o.push(l),l=null!=(t=l.parentElement)?t:void 0;return o},Q=()=>{const e={},r=t(),n=()=>{const t=a(e.value);t!==r.value&&(r.value=t)};return o((()=>n())),l((()=>n())),{children:e,firstElement:r}};var _=r({name:"ResizeObserver",props:{watchOnUpdated:Boolean},emits:["resize"],setup(e,{emit:t,slots:o}){const{children:l,firstElement:a}=Q();let r;const i=()=>{r&&(r.disconnect(),r=null)};return n(a,(e=>{var o;r&&i(),e&&(o=e)&&(r=new z((e=>{const o=e[0];t("resize",o)})),r.observe(o))})),s((()=>{r&&i()})),()=>{var e;return l.value=null==(e=o.default)?void 0:e.call(o),l.value}}});function ee(e,o){const a=t(e[o]);return l((()=>{const t=e[o];a.value!==t&&(a.value=t)})),a}const te=Symbol("ArcoTrigger");var oe=Object.defineProperty,le=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ie=(e,t,o)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,ue=(e,t)=>{for(var o in t||(t={}))ne.call(t,o)&&ie(e,o,t[o]);if(re)for(var o of re(t))se.call(t,o)&&ie(e,o,t[o]);return e};const ce=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var pe=r({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(e,{emit:a,slots:r,attrs:A}){const{popupContainer:L}=u(e),$=c("trigger"),D=p((()=>d(A,ce))),V=f(h,void 0),H=p((()=>[].concat(e.trigger))),N=new Set,I=f(te,void 0),{children:X,firstElement:J}=Q(),oe=t(),re=t(e.defaultPopupVisible),ne=t(e.position),se=t({}),ie=t({}),pe=t({}),de=t(),fe=t({top:0,left:0}),he=p((()=>{var t;return null!=(t=e.popupVisible)?t:re.value})),{teleportContainer:ve,containerRef:me}=v({popupContainer:L,visible:he,documentContainer:!0}),{zIndex:ge}=m("popup",{visible:he});let be=0,ye=!1;const we=t=>{if(e.alignPoint){const{pageX:e,pageY:o}=t;fe.value={top:o,left:e}}},Oe=()=>{if(!J.value||!oe.value||!me.value)return;const t=me.value.getBoundingClientRect(),o=e.alignPoint?{top:fe.value.top,bottom:fe.value.top,left:fe.value.left,right:fe.value.left,scrollTop:fe.value.top,scrollBottom:fe.value.top,scrollLeft:fe.value.left,scrollRight:fe.value.left,width:0,height:0}:U(J.value,t),l=()=>U(oe.value,t),a=l(),{style:r,position:n}=((e,t,o,l,{offset:a=0,translate:r=[0,0],customStyle:n={},autoFitPosition:s=!1}={})=>{let i=e,u=Z(e,o,l,{offset:a,translate:r});if(s){const n=Y(e,u,{containerRect:t,popupRect:l,triggerRect:o,offset:a,translate:r});u=n.popupPosition,i=n.position}return{style:q({left:`${u.left}px`,top:`${u.top}px`},n),position:i}})(e.position,t,o,a,{offset:e.popupOffset,translate:e.popupTranslate,customStyle:e.popupStyle,autoFitPosition:e.autoFitPosition});e.autoFitTransformOrigin&&(ie.value={transformOrigin:G(n)}),e.autoFitPopupMinWidth?r.minWidth=`${o.width}px`:e.autoFitPopupWidth&&(r.width=`${o.width}px`),ne.value!==n&&(ne.value=n),se.value=r,e.showArrow&&E((()=>{pe.value=((e,t,o,{customStyle:l={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(e)){let a=Math.abs(t.scrollLeft+t.width/2-o.scrollLeft);return a>o.width-8&&(a=t.width>o.width?o.width/2:o.width-8),["top","tl","tr"].includes(e)?q({left:`${a}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},l):q({left:`${a}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},l)}let a=Math.abs(t.scrollTop+t.height/2-o.scrollTop);return a>o.height-8&&(a=t.height>o.height?o.height/2:o.height-8),["left","lt","lb"].includes(e)?q({top:`${a}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},l):q({top:`${a}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},l)})(n,o,l(),{customStyle:e.arrowStyle})}))},Ce=(e,t)=>{if(e===he.value&&0===be)return;const o=()=>{re.value=e,a("update:popupVisible",e),a("popupVisibleChange",e),e&&E((()=>{Oe()}))};t?(be&&(window.clearTimeout(be),be=0),e!==he.value&&(be=window.setTimeout(o,t))):o()},Re=t=>{var o;null==(o=A.onClick)||o.call(A,t),e.disabled||he.value&&!e.clickToClose||(H.value.includes("click")?(we(t),Ce(!he.value)):H.value.includes("contextMenu")&&he.value&&Ce(!1))},Be=t=>{var o;null==(o=A.onMouseenter)||o.call(A,t),!e.disabled&&H.value.includes("hover")&&(we(t),Ce(!0,e.mouseEnterDelay))},Te=e=>{null==I||I.onMouseenter(e),Be(e)},Me=t=>{var o;null==(o=A.onMouseleave)||o.call(A,t),!e.disabled&&H.value.includes("hover")&&Ce(!1,e.mouseLeaveDelay)},Pe=e=>{null==I||I.onMouseleave(e),Me(e)},Se=t=>{var o;null==(o=A.onFocusin)||o.call(A,t),!e.disabled&&H.value.includes("focus")&&Ce(!0,e.focusDelay)},Fe=t=>{var o;null==(o=A.onFocusout)||o.call(A,t),!e.disabled&&H.value.includes("focus")&&e.blurToClose&&Ce(!1)},je=t=>{var o;null==(o=A.onContextmenu)||o.call(A,t),e.disabled||!H.value.includes("contextMenu")||he.value&&!e.clickToClose||(we(t),Ce(!he.value),t.preventDefault())};g(te,b({onMouseenter:Te,onMouseleave:Pe,addChildRef:e=>{N.add(e),null==I||I.addChildRef(e)},removeChildRef:e=>{N.delete(e),null==I||I.removeChildRef(e)}}));const Ee=()=>{x(document.documentElement,"mousedown",Le),ye=!1},xe=ee(r,"content"),Ae=p((()=>{var t;return e.hideEmpty&&y(null==(t=xe.value)?void 0:t.call(xe))})),Le=e=>{var t,o,l;if(!(null==(t=J.value)?void 0:t.contains(e.target))&&!(null==(o=oe.value)?void 0:o.contains(e.target))){for(const t of N)if(null==(l=t.value)?void 0:l.contains(e.target))return;Ee(),Ce(!1)}},ze=function(e){let t=0;const o=(...o)=>{t&&k(t),t=W((()=>{e(...o),t=0}))};return o.cancel=()=>{k(t),t=0},o}((()=>{he.value&&Oe()})),$e=()=>{he.value&&Oe()},We=()=>{$e(),a("resize")},ke=t=>{e.preventFocus&&t.preventDefault()};null==I||I.addChildRef(oe);const De=p((()=>he.value?e.openedClass:void 0));let Ve;n(he,(t=>{if(e.clickOutsideToClose&&(!t&&ye?Ee():t&&!ye&&(w(document.documentElement,"mousedown",Le),ye=!0)),e.updateAtScroll||(null==V?void 0:V.updateAtScroll))if(t){Ve=K(J.value);for(const e of Ve)e.addEventListener("scroll",ze)}else if(Ve){for(const e of Ve)e.removeEventListener("scroll",ze);Ve=void 0}t&&(Ie.value=!0)})),n((()=>[e.autoFitPopupWidth,e.autoFitPopupMinWidth]),(()=>{he.value&&Oe()}));const{createResizeObserver:He,destroyResizeObserver:Ne}=(({elementRef:e,onResize:t})=>{let o;return{createResizeObserver:()=>{e.value&&(o=new z((e=>{const o=e[0];i(t)&&t(o)})),o.observe(e.value))},destroyResizeObserver:()=>{o&&(o.disconnect(),o=null)}}})({elementRef:me,onResize:$e});o((()=>{if(He(),he.value&&(Oe(),e.clickOutsideToClose&&!ye&&(w(document.documentElement,"mousedown",Le),ye=!0),e.updateAtScroll||(null==V?void 0:V.updateAtScroll))){Ve=K(J.value);for(const e of Ve)e.addEventListener("scroll",ze)}})),l((()=>{he.value&&Oe()})),O((()=>{Ce(!1)})),s((()=>{if(null==I||I.removeChildRef(oe),Ne(),ye&&Ee(),Ve){for(const e of Ve)e.removeEventListener("scroll",ze);Ve=void 0}}));const Ie=t(he.value),qe=t(!1),Ue=()=>{qe.value=!0},Xe=()=>{qe.value=!1,he.value&&a("show")},Ye=()=>{qe.value=!1,he.value||(Ie.value=!1,a("hide"))};return()=>{var t,o;return X.value=null!=(o=null==(t=r.default)?void 0:t.call(r))?o:[],C(X.value,{class:De.value,onClick:Re,onMouseenter:Be,onMouseleave:Me,onFocusin:Se,onFocusout:Fe,onContextmenu:je}),R(j,null,[e.autoFixPosition?R(_,{onResize:We},{default:()=>[X.value]}):X.value,R(B,null,{default:()=>[R(T,{to:ve.value,disabled:!e.renderToBody},{default:()=>[(!e.unmountOnClose||he.value||Ie.value)&&!Ae.value&&R(_,{onResize:$e},{default:()=>{return[R("div",M({ref:oe,class:[`${$}-popup`,`${$}-position-${ne.value}`],style:(t=ue({},se.value),o={zIndex:ge.value,pointerEvents:qe.value?"none":"auto"},le(t,ae(o))),"trigger-placement":ne.value,onMouseenter:Te,onMouseleave:Pe,onMousedown:ke},D.value),[R(P,{name:e.animationName,duration:e.duration,appear:!0,onBeforeEnter:Ue,onAfterEnter:Xe,onBeforeLeave:Ue,onAfterLeave:Ye},{default:()=>{var t;return[S(R("div",{class:`${$}-popup-wrapper`,style:ie.value},[R("div",{class:[`${$}-content`,e.contentClass],style:e.contentStyle},[null==(t=r.content)?void 0:t.call(r)]),e.showArrow&&R("div",{ref:de,class:[`${$}-arrow`,e.arrowClass],style:pe.value},null)]),[[F,he.value]])]}})])];var t,o}})]})]})])}}});const de=Object.assign(pe,{install:(e,t)=>{A(e,t);const o=L(t);e.component(o+pe.name,pe)}});export{_ as R,de as T,k as c,W as r,ee as u};
