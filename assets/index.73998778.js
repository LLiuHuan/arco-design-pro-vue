import{$ as e,k as t,l as o,h as l,d as a,t as r,g as n,c as s,ak as i,j as u,O as p,aO as c,aP as f,p as d,r as h,aQ as v,V as g,aC as b,o as m,aR as y,m as w,aS as C,b as O,aT as S,aU as P,a3 as R,a4 as B,aV as T,aW as j,F as M,aD as F,a6 as x,s as V,v as $,_ as A,Z as E,w as L,x as z,y as W,D as k,q as D,E as H,G as N,H as I}from"./index.2ff312ec.js";import{u as q,R as _}from"./resize-observer-v2.4af5f029.js";import{i as G}from"./ResizeObserver.es.bd9ff68d.js";const Q="undefined"==typeof window?global:window,U=Q.requestAnimationFrame,X=Q.cancelAnimationFrame;var Y=Object.defineProperty,Z=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,ee=(e,t,o)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,te=(e,t)=>{for(var o in t||(t={}))J.call(t,o)&&ee(e,o,t[o]);if(Z)for(var o of Z(t))K.call(t,o)&&ee(e,o,t[o]);return e};const oe=(e,t)=>{var o,l;const a=e.getBoundingClientRect();return{top:a.top,bottom:a.bottom,left:a.left,right:a.right,scrollTop:a.top-t.top,scrollBottom:a.bottom-t.top,scrollLeft:a.left-t.left,scrollRight:a.right-t.left,width:null!=(o=e.offsetWidth)?o:e.clientWidth,height:null!=(l=e.offsetHeight)?l:e.clientHeight}},le=(e,t)=>{switch(t){case"top":switch(e){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return e}case"bottom":switch(e){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return e}case"left":switch(e){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return e}case"right":switch(e){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return e}default:return e}},ae=(e,t,{containerRect:o,triggerRect:l,popupRect:a,offset:r,translate:n})=>{const s=(e=>{switch(e){case"top":case"tl":case"tr":default:return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right"}})(e),i={width:document.documentElement.clientWidth||window.innerWidth,height:document.documentElement.clientHeight||window.innerHeight},u=o.top+t.top,p=i.height-(o.top+t.top+a.height),c=o.left+t.left,f=i.width-(o.left+t.left+a.width);let d=e;if("top"===s&&u<0)if(l.top>a.height)t.top=-o.top;else{const s=re("bottom",l,a,{offset:r,translate:n});i.height-(o.top+s.top+a.height)>0&&(d=le(e,"bottom"),t.top=s.top)}if("bottom"===s&&p<0)if(i.height-l.bottom>a.height)t.top=-o.top+(i.height-a.height);else{const s=re("top",l,a,{offset:r,translate:n});o.top+s.top>0&&(d=le(e,"top"),t.top=s.top)}if("left"===s&&c<0)if(l.left>a.width)t.left=-o.left;else{const s=re("right",l,a,{offset:r,translate:n});i.width-(o.left+s.left+a.width)>0&&(d=le(e,"right"),t.left=s.left)}if("right"===s&&f<0)if(i.width-l.right>a.width)t.left=-o.left+(i.width-a.width);else{const s=re("left",l,a,{offset:r,translate:n});o.left+s.left>0&&(d=le(e,"left"),t.left=s.left)}return"top"!==s&&"bottom"!==s||(c<0?t.left=-o.left:f<0&&(t.left=-o.left+(i.width-a.width))),"left"!==s&&"right"!==s||(u<0?t.top=-o.top:p<0&&(t.top=-o.top+(i.height-a.height))),{popupPosition:t,position:d}},re=(t,o,l,{offset:a=0,translate:r=[0,0]}={})=>{var n;const s=null!=(n=e(r)?r:r[t])?n:[0,0];switch(t){case"top":return{left:o.scrollLeft+Math.round(o.width/2)-Math.round(l.width/2)+s[0],top:o.scrollTop-l.height-a+s[1]};case"tl":return{left:o.scrollLeft+s[0],top:o.scrollTop-l.height-a+s[1]};case"tr":return{left:o.scrollRight-l.width+s[0],top:o.scrollTop-l.height-a+s[1]};case"bottom":return{left:o.scrollLeft+Math.round(o.width/2)-Math.round(l.width/2)+s[0],top:o.scrollBottom+a+s[1]};case"bl":return{left:o.scrollLeft+s[0],top:o.scrollBottom+a+s[1]};case"br":return{left:o.scrollRight-l.width+s[0],top:o.scrollBottom+a+s[1]};case"left":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollTop+Math.round(o.height/2)-Math.round(l.height/2)+s[1]};case"lt":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollTop+s[1]};case"lb":return{left:o.scrollLeft-l.width-a+s[0],top:o.scrollBottom-l.height+s[1]};case"right":return{left:o.scrollRight+a+s[0],top:o.scrollTop+Math.round(o.height/2)-Math.round(l.height/2)+s[1]};case"rt":return{left:o.scrollRight+a+s[0],top:o.scrollTop+s[1]};case"rb":return{left:o.scrollRight+a+s[0],top:o.scrollBottom-l.height+s[1]};default:return{left:0,top:0}}},ne=e=>{let t="0";["top","bottom"].includes(e)?t="50%":["left","lt","lb","tr","br"].includes(e)&&(t="100%");let o="0";return["left","right"].includes(e)?o="50%":["top","tl","tr","lt","rt"].includes(e)&&(o="100%"),`${t} ${o}`},se=e=>e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth,ie=e=>{var t;const o=[];let l=e;for(;l&&l!==document.documentElement;)se(l)&&o.push(l),l=null!=(t=l.parentElement)?t:void 0;return o};function ue(e,l){const a=t(e[l]);return o((()=>{const t=e[l];a.value!==t&&(a.value=t)})),a}const pe=Symbol("ArcoTrigger");var ce=Object.defineProperty,fe=Object.defineProperties,de=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,be=(e,t,o)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,me=(e,t)=>{for(var o in t||(t={}))ve.call(t,o)&&be(e,o,t[o]);if(he)for(var o of he(t))ge.call(t,o)&&be(e,o,t[o]);return e};const ye=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var we=a({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(e,{emit:a,slots:V,attrs:$}){const{popupContainer:A}=r(e),E=n("trigger"),L=s((()=>i($,ye))),z=u(p,void 0),W=s((()=>[].concat(e.trigger))),k=new Set,D=u(pe,void 0),{children:H,firstElement:N}=q(),I=t(),Q=t(e.defaultPopupVisible),Y=t(e.position),Z=t({}),J=t({}),K=t({}),ee=t(),le=t({top:0,left:0}),se=s((()=>{var t;return null!=(t=e.popupVisible)?t:Q.value})),{teleportContainer:ce,containerRef:he}=c({popupContainer:A,visible:se,documentContainer:!0}),{zIndex:ve}=f("popup",{visible:se});let ge=0,be=!1;const we=t=>{if(e.alignPoint){const{pageX:e,pageY:o}=t;le.value={top:o,left:e}}},Ce=()=>{if(!N.value||!I.value||!he.value)return;const t=he.value.getBoundingClientRect(),o=e.alignPoint?{top:le.value.top,bottom:le.value.top,left:le.value.left,right:le.value.left,scrollTop:le.value.top,scrollBottom:le.value.top,scrollLeft:le.value.left,scrollRight:le.value.left,width:0,height:0}:oe(N.value,t),l=oe(I.value,t),{style:a,position:r}=((e,t,o,l,{offset:a=0,translate:r=[0,0],customStyle:n={},autoFitPosition:s=!1}={})=>{let i=e,u=re(e,o,l,{offset:a,translate:r});if(s){const n=ae(e,u,{containerRect:t,popupRect:l,triggerRect:o,offset:a,translate:r});u=n.popupPosition,i=n.position}return{style:te({left:`${u.left}px`,top:`${u.top}px`},n),position:i}})(e.position,t,o,l,{offset:e.popupOffset,translate:e.popupTranslate,customStyle:e.popupStyle,autoFitPosition:e.autoFitPosition});e.autoFitTransformOrigin&&(J.value={transformOrigin:ne(r)}),e.autoFitPopupMinWidth?a.minWidth=`${o.width}px`:e.autoFitPopupWidth&&(a.width=`${o.width}px`),Y.value!==r&&(Y.value=r),Z.value=a,e.showArrow&&(K.value=((e,t,o,{customStyle:l={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(e)){let a=Math.abs(t.scrollLeft+t.width/2-o.scrollLeft);return a>o.width-8&&(a=t.width>o.width?o.width/2:o.width-8),["top","tl","tr"].includes(e)?te({left:`${a}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},l):te({left:`${a}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},l)}let a=Math.abs(t.scrollTop+t.height/2-o.scrollTop);return a>o.height-8&&(a=t.height>o.height?o.height/2:o.height-8),["left","lt","lb"].includes(e)?te({top:`${a}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},l):te({top:`${a}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},l)})(r,o,l,{customStyle:e.arrowStyle}))},Oe=(e,t)=>{if(e===se.value&&0===ge)return;const o=()=>{Q.value=e,a("update:popupVisible",e),a("popupVisibleChange",e),e&&x((()=>{Ce()}))};t?(ge&&(window.clearTimeout(ge),ge=0),e!==se.value&&(ge=window.setTimeout(o,t))):o()},Se=t=>{var o;null==(o=$.onClick)||o.call($,t),e.disabled||se.value&&!e.clickToClose||(W.value.includes("click")?(we(t),Oe(!se.value)):W.value.includes("contextMenu")&&se.value&&Oe(!1))},Pe=t=>{var o;null==(o=$.onMouseenter)||o.call($,t),!e.disabled&&W.value.includes("hover")&&(we(t),Oe(!0,e.mouseEnterDelay))},Re=e=>{null==D||D.onMouseenter(e),Pe(e)},Be=t=>{var o;null==(o=$.onMouseleave)||o.call($,t),!e.disabled&&W.value.includes("hover")&&Oe(!1,e.mouseLeaveDelay)},Te=e=>{null==D||D.onMouseleave(e),Be(e)},je=t=>{var o;null==(o=$.onFocusin)||o.call($,t),!e.disabled&&W.value.includes("focus")&&Oe(!0,e.focusDelay)},Me=t=>{var o;null==(o=$.onFocusout)||o.call($,t),!e.disabled&&W.value.includes("focus")&&e.blurToClose&&Oe(!1)},Fe=t=>{var o;null==(o=$.onContextmenu)||o.call($,t),e.disabled||!W.value.includes("contextMenu")||se.value&&!e.clickToClose||(we(t),Oe(!se.value),t.preventDefault())};d(pe,h({onMouseenter:Re,onMouseleave:Te,addChildRef:e=>{k.add(e),null==D||D.addChildRef(e)},removeChildRef:e=>{k.delete(e),null==D||D.removeChildRef(e)}}));const xe=()=>{F(document.documentElement,"mousedown",Ae),be=!1},Ve=ue(V,"content"),$e=s((()=>{var t;return e.hideEmpty&&v(null==(t=Ve.value)?void 0:t.call(Ve))})),Ae=e=>{var t,o,l;if(!(null==(t=N.value)?void 0:t.contains(e.target))&&!(null==(o=I.value)?void 0:o.contains(e.target))){for(const t of k)if(null==(l=t.value)?void 0:l.contains(e.target))return;xe(),Oe(!1)}},Ee=function(e){let t=0;const o=(...o)=>{t&&X(t),t=U((()=>{e(...o),t=0}))};return o.cancel=()=>{X(t),t=0},o}((()=>{se.value&&Ce()})),Le=()=>{se.value&&Ce()},ze=()=>{Le(),a("resize")},We=t=>{e.preventFocus&&t.preventDefault()};null==D||D.addChildRef(I);const ke=s((()=>se.value?e.openedClass:void 0));let De;g(se,(t=>{if(e.clickOutsideToClose&&(!t&&be?xe():t&&!be&&(b(document.documentElement,"mousedown",Ae),be=!0)),e.updateAtScroll||(null==z?void 0:z.updateAtScroll))if(t){De=ie(N.value);for(const e of De)e.addEventListener("scroll",Ee)}else if(De){for(const e of De)e.removeEventListener("scroll",Ee);De=void 0}t&&(Ie.value=!0)})),g((()=>[e.autoFitPopupWidth,e.autoFitPopupMinWidth]),(()=>{se.value&&Ce()}));const{createResizeObserver:He,destroyResizeObserver:Ne}=(({elementRef:e,onResize:t})=>{let o;return{createResizeObserver:()=>{e.value&&(o=new G((e=>{const o=e[0];l(t)&&t(o)})),o.observe(e.value))},destroyResizeObserver:()=>{o&&(o.disconnect(),o=null)}}})({elementRef:he,onResize:Le});m((()=>{if(He(),se.value&&(Ce(),e.clickOutsideToClose&&!be&&(b(document.documentElement,"mousedown",Ae),be=!0),e.updateAtScroll||(null==z?void 0:z.updateAtScroll))){De=ie(N.value);for(const e of De)e.addEventListener("scroll",Ee)}})),o((()=>{se.value&&Ce()})),y((()=>{Oe(!1)})),w((()=>{if(null==D||D.removeChildRef(I),Ne(),be&&xe(),De){for(const e of De)e.removeEventListener("scroll",Ee);De=void 0}}));const Ie=t(se.value),qe=t(!1),_e=()=>{qe.value=!0},Ge=()=>{qe.value=!1,se.value&&a("show")},Qe=()=>{qe.value=!1,se.value||(Ie.value=!1,a("hide"))};return()=>{var t,o;return H.value=null!=(o=null==(t=V.default)?void 0:t.call(V))?o:[],C(H.value,{class:ke.value,onClick:Se,onMouseenter:Pe,onMouseleave:Be,onFocusin:je,onFocusout:Me,onContextmenu:Fe}),O(M,null,[e.autoFixPosition?O(_,{onResize:ze},{default:()=>[H.value]}):H.value,O(S,null,{default:()=>[O(P,{to:ce.value,disabled:!e.renderToBody},{default:()=>[(!e.unmountOnClose||se.value||Ie.value)&&!$e.value&&O(_,{onResize:Le},{default:()=>{return[O("div",R({ref:I,class:[`${E}-popup`,`${E}-position-${Y.value}`],style:(t=me({},Z.value),o={zIndex:ve.value,pointerEvents:qe.value?"none":"auto"},fe(t,de(o))),"trigger-placement":Y.value,onMouseenter:Re,onMouseleave:Te,onMousedown:We},L.value),[O(B,{name:e.animationName,duration:e.duration,appear:!0,onBeforeEnter:_e,onAfterEnter:Ge,onBeforeLeave:_e,onAfterLeave:Qe},{default:()=>{var t;return[T(O("div",{class:`${E}-popup-wrapper`,style:J.value},[O("div",{class:[`${E}-content`,e.contentClass],style:e.contentStyle},[null==(t=V.content)?void 0:t.call(V)]),e.showArrow&&O("div",{ref:ee,class:[`${E}-arrow`,e.arrowClass],style:K.value},null)]),[[j,se.value]])]}})])];var t,o}})]})]})])}}});const Ce=Object.assign(we,{install:(e,t)=>{V(e,t);const o=$(t);e.component(o+we.name,we)}});var Oe=A(a({name:"Popover",components:{Trigger:Ce},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},title:String,content:String,trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"top"},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0},setup(e,{emit:o}){const l=n("popover"),a=t(e.defaultPopupVisible),r=s((()=>{var t;return null!=(t=e.popupVisible)?t:a.value})),i=s((()=>[`${l}-popup-content`,e.contentClass])),u=s((()=>[`${l}-popup-arrow`,e.arrowClass]));return{prefixCls:l,computedPopupVisible:r,contentCls:i,arrowCls:u,handlePopupVisibleChange:e=>{a.value=e,o("update:popupVisible",e),o("popupVisibleChange",e)}}}}),[["render",function(e,t,o,l,a,r){const n=E("trigger");return L(),z(n,{class:I(e.prefixCls),trigger:e.trigger,position:e.position,"popup-visible":e.computedPopupVisible,"popup-offset":10,"content-class":e.contentCls,"content-style":e.contentStyle,"arrow-class":e.arrowCls,"arrow-style":e.arrowStyle,"show-arrow":"","popup-container":e.popupContainer,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:e.handlePopupVisibleChange},{content:W((()=>[k("div",{class:I(`${e.prefixCls}-title`)},[D(e.$slots,"title",{},(()=>[H(N(e.title),1)]))],2),k("div",{class:I(`${e.prefixCls}-content`)},[D(e.$slots,"content",{},(()=>[H(N(e.content),1)]))],2)])),default:W((()=>[D(e.$slots,"default")])),_:3},8,["class","trigger","position","popup-visible","content-class","content-style","arrow-class","arrow-style","popup-container","onPopupVisibleChange"])}]]);const Se=Object.assign(Oe,{install:(e,t)=>{V(e,t);const o=$(t);e.component(o+Oe.name,Oe)}});export{Se as P,Ce as T,X as c,U as r,ue as u};
