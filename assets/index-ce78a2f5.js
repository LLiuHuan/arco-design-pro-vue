import{g as e,i as a,_ as r,s as t,a as l}from"./plugin-vue_export-helper-806773bb.js";import{u as o}from"./use-index-d903ce97.js";import{R as s}from"./index-39ecde43.js";import{I as n}from"./index-c1cacebb.js";import{I as i}from"./use-size-9fed8212.js";import{d as u,t as c,ac as p,a4 as d,c as g,K as v,w as m,F as f,q as y,o as x,a as h,l as I,k as z,e as b,n as S,Q as C,f as $,a8 as j,b as k,p as E,r as F,a9 as w}from"./runtime-core.esm-bundler-808dc7a8.js";import{P as L}from"./index-15ee7962.js";import{a as R}from"./vue-utils-fe41050b.js";const O=Symbol("ArcoAvatarGroup");var P=Object.defineProperty,T=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,B=(e,a,r)=>a in e?P(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,G=(e,a)=>{for(var r in a||(a={}))A.call(a,r)&&B(e,r,a[r]);if(T)for(var r of T(a))U.call(a,r)&&B(e,r,a[r]);return e};const N=u({name:"Avatar",components:{ResizeObserver:s,IconImageClose:n,IconLoading:i},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(r,{slots:t,emit:l,attrs:s}){const{shape:n,size:i,autoFixFontSize:u,triggerType:y,triggerIconStyle:x}=c(r),h=e("avatar"),I=p(O,void 0),z=d(),b=d(),S=g((()=>{var e;return null!=(e=null==I?void 0:I.shape)?e:n.value})),C=g((()=>{var e;return null!=(e=null==I?void 0:I.size)?e:i.value})),$=g((()=>{var e;return null!=(e=null==I?void 0:I.autoFixFontSize)?e:u.value})),j=d(!1),k=d(!1),E=d(!0),F=d(!1),w=I?o({itemRef:z,selector:`.${h}`}).computedIndex:d(-1),L=g((()=>{var e;const r=a(C.value)?{width:`${C.value}px`,height:`${C.value}px`,fontSize:C.value/2+"px"}:{};return I&&(r.zIndex=I.zIndexAscend?w.value+1:I.total-w.value,r.marginLeft=0!==w.value?`-${(null!=(e=C.value)?e:40)/4}px`:"0"),r})),R=_({triggerIconStyle:null==x?void 0:x.value,inlineStyle:s.style,triggerType:y.value}),P=()=>{j.value||r.imageUrl||f((()=>{var e;if(!b.value||!z.value)return;const a=b.value.clientWidth,r=null!=(e=C.value)?e:z.value.offsetWidth,t=r/(a+8);r&&t<1&&(b.value.style.transform=`scale(${t}) translateX(-50%)`),E.value=!0}))};v((()=>{var e;(null==(e=b.value)?void 0:e.firstElementChild)&&["IMG","PICTURE"].includes(b.value.firstElementChild.tagName)&&(j.value=!0),$.value&&P()})),m(i,(()=>{$.value&&P()}));const T=g((()=>[h,`${h}-${S.value}`])),A=g((()=>j.value||r.imageUrl?`${h}-image`:`${h}-text`));return{prefixCls:h,itemRef:z,cls:T,outerStyle:L,wrapperRef:b,wrapperCls:A,computedTriggerIconStyle:R,isImage:j,shouldLoad:E,isLoaded:F,hasError:k,onClick:e=>{l("click",e)},handleResize:()=>{$.value&&P()},handleImgLoad:()=>{F.value=!0,l("load")},handleImgError:()=>{k.value=!0,l("error")}}}}),_=({triggerType:e,inlineStyle:a={},triggerIconStyle:r={}})=>{let t={};return"button"===e&&(!r||r&&!r.color)&&a&&a.backgroundColor&&(t={color:a.backgroundColor}),G(G({},r),t)},W=["src"];var q=r(N,[["render",function(e,a,r,t,l,o){const s=y("IconImageClose"),n=y("IconLoading"),i=y("resize-observer");return x(),h("div",{ref:"itemRef",style:k(e.outerStyle),class:S([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:Boolean(e.$slots["trigger-icon"])}]),onClick:a[2]||(a[2]=(...a)=>e.onClick&&e.onClick(...a))},[I(i,{onResize:e.handleResize},{default:z((()=>[b("span",{ref:"wrapperRef",class:S(e.wrapperCls)},[e.imageUrl?(x(),h(C,{key:0},[e.hasError?$(e.$slots,"error",{key:0},(()=>[b("div",{class:S(`${e.prefixCls}-image-icon`)},[I(s)],2)])):j("v-if",!0),e.hasError||!e.shouldLoad||e.isLoaded?j("v-if",!0):$(e.$slots,"default",{key:1},(()=>[b("div",{class:S(`${e.prefixCls}-image-icon`)},[I(n)],2)])),!e.hasError&&e.shouldLoad?(x(),h("img",{key:2,src:e.imageUrl,style:k({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:a[0]||(a[0]=(...a)=>e.handleImgLoad&&e.handleImgLoad(...a)),onError:a[1]||(a[1]=(...a)=>e.handleImgError&&e.handleImgError(...a))},null,44,W)):j("v-if",!0)],64)):$(e.$slots,"default",{key:1})],2)])),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(x(),h("div",{key:0,class:S(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:k(e.computedTriggerIconStyle)},[$(e.$slots,"trigger-icon")],6)):j("v-if",!0)],6)}]]);const K=u({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(a,{slots:r}){const{shape:t,size:l,autoFixFontSize:o,zIndexAscend:s}=c(a),n=e("avatar-group"),i=d(0);return E(O,F({shape:t,size:l,autoFixFontSize:o,zIndexAscend:s,total:i})),()=>{var e,t;const l=R(null!=(t=null==(e=r.default)?void 0:e.call(r))?t:[]),o=a.maxCount>0?l.slice(0,a.maxCount):l,s=a.maxCount>0?l.slice(a.maxCount):[];return i.value!==o.length&&(i.value=o.length),I("div",{class:n},[o,s.length>0&&I(L,a.maxPopoverTriggerProps,{default:()=>[I(q,{class:`${n}-max-count-avatar`,style:a.maxStyle},{default:()=>[w("+"),s.length]})],content:()=>I("div",null,[s])})])}}}),M=Object.assign(q,{Group:K,install:(e,a)=>{t(e,a);const r=l(a);e.component(r+q.name,q),e.component(r+K.name,K)}});export{M as A};
